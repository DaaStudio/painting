<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ArtCanvas - Profesyonel Dijital Boyama</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --dark-color: #2d3436;
            --light-color: #f9f9f9;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #d63031;
            --header-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100%;
        }
        
        /* Header Styles */
        .header {
            background-color: white;
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            flex-shrink: 0;
            width: 100%;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .language-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .language-selector select {
            padding: 6px 10px;
            border-radius: 6px;
            border: 2px solid var(--secondary-color);
            background-color: white;
            color: var(--dark-color);
            font-weight: 500;
            cursor: pointer;
            outline: none;
            font-size: 0.85rem;
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 15px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5b4fd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #8a7efd;
            transform: translateY(-2px);
        }
        
        .btn-accent {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-accent:hover {
            background-color: #fc5d97;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            width: 100%;
            position: relative;
        }
        
        /* Canvas Area */
        .canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            overflow: auto;
            width: 100%;
        }
        
        .canvas-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .canvas-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .canvas-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .canvas-wrapper {
            flex: 1;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            width: 100%;
        }
        
        #drawingCanvas {
            background-color: white;
            display: block;
            cursor: crosshair;
            touch-action: none;
            max-width: 100%;
            max-height: 100%;
        }
        
        /* Canvas üzerindeki kontroller */
        .canvas-overlay-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 8px;
            z-index: 10;
            flex-wrap: wrap;
        }
        
        .overlay-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background-color: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .overlay-btn:hover {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .overlay-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .overlay-btn:disabled:hover {
            background-color: white;
            color: var(--primary-color);
            transform: none;
        }
        
        /* Tuval üzerinde fırça boyutu kontrolü */
        .canvas-brush-controls {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 10;
            width: 200px;
        }
        
        .canvas-brush-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .canvas-brush-slider {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .canvas-brush-value {
            font-size: 0.8rem;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        /* Zoom kontrolleri */
        .zoom-controls {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background-color: white;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 10;
        }
        
        .zoom-btn {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .zoom-btn:hover {
            background-color: #5b4fd8;
            transform: scale(1.05);
        }
        
        .zoom-level {
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        /* Yeni tuval yazısı */
        .canvas-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(0, 0, 0, 0.2);
            font-size: 2.5rem;
            font-weight: bold;
            pointer-events: none;
            user-select: none;
            z-index: 1;
            text-align: center;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            transition: color 0.2s;
        }
        
        .close-modal:hover {
            color: var(--danger-color);
        }
        
        /* Templates Modal */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .template-item {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .template-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .template-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background-color: #f5f5f5;
        }
        
        /* Gallery Modal */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .gallery-item {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            display: flex;
            flex-direction: column;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .gallery-img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            background-color: #f5f5f5;
            flex-grow: 1;
        }
        
        .gallery-name {
            padding: 10px;
            text-align: center;
            font-weight: 600;
            background-color: #f8f9fa;
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .gallery-actions {
            display: flex;
            gap: 8px;
            padding: 8px;
            background-color: #f8f9fa;
        }
        
        .action-btn {
            flex: 1;
            padding: 6px;
            border-radius: 6px;
            border: none;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
        }
        
        .action-btn-download {
            background-color: var(--success-color);
            color: white;
        }
        
        .action-btn-delete {
            background-color: var(--danger-color);
            color: white;
        }
        
        .gallery-bulk-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }
        
        /* Message Modal (Kaydet) */
        .message-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .message-modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            padding: 25px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        .message-modal-icon {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .message-modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark-color);
        }
        
        .message-modal-text {
            font-size: 1rem;
            margin-bottom: 20px;
            color: #555;
            line-height: 1.5;
        }
        
        .message-modal-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .message-modal-input {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }
        
        /* Color Picker Modal */
        .color-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .color-modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            padding: 25px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        }
        
        .color-modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .color-modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            transition: color 0.2s;
        }
        
        .color-modal-close:hover {
            color: var(--danger-color);
        }
        
        .color-modal-palette {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .color-modal-option {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
            border: 3px solid transparent;
        }
        
        .color-modal-option:hover {
            transform: scale(1.1);
        }
        
        .color-modal-option.active {
            border-color: var(--dark-color);
            transform: scale(1.1);
        }
        
        .color-modal-custom {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .color-modal-custom input[type="color"] {
            width: 60px;
            height: 60px;
            border: none;
            background: transparent;
            cursor: pointer;
        }
        
        .color-modal-custom span {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .color-modal-slider {
            margin-top: 20px;
        }
        
        .color-modal-slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .color-modal-slider-label span {
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        /* New Canvas Modal */
        .canvas-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .canvas-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .canvas-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .canvas-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .canvas-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .canvas-option-name {
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }
        
        .canvas-option-desc {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        /* Download Modal */
        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .download-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .download-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .download-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .download-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .download-option-name {
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }
        
        .download-option-desc {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        /* Tools Modal */
        .tools-modal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .tools-modal-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .tools-modal-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .tools-modal-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .tools-modal-option-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .tools-modal-option-name {
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Text Tool Modal */
        .text-tool-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .text-input-container {
            display: flex;
            gap: 10px;
        }
        
        .text-input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }
        
        .text-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .text-option {
            padding: 10px;
            border: 2px solid #eee;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .text-option-label {
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        /* Shape Tool Modal */
        .shape-tool-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .shape-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .shape-option {
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .shape-option:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
        }
        
        .shape-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .shape-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .shape-option-name {
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Drawing View Modal */
        .drawing-view-modal {
            max-width: 800px;
        }
        
        .drawing-view-content {
            text-align: center;
        }
        
        .drawing-view-img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .drawing-view-info {
            text-align: left;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .drawing-view-info h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .drawing-view-info p {
            margin-bottom: 5px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background-color: var(--success-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 8px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 90%;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification i {
            font-size: 1.2rem;
        }
        
        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            flex-direction: column;
            gap: 15px;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Help Guide */
        .help-guide {
            position: fixed;
            bottom: 15px;
            left: 15px;
            background-color: white;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        /* Current Tool Indicator */
        .current-tool-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: white;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }
        
        .current-tool-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* Current Color Indicator */
        .current-color-indicator {
            position: absolute;
            top: 60px;
            right: 10px;
            background-color: white;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }
        
        .color-preview {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid #ddd;
        }
        
        /* Responsive Tasarım */
        @media (max-width: 1200px) {
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .canvas-overlay-controls {
                top: 8px;
                left: 8px;
            }
            
            .overlay-btn {
                width: 36px;
                height: 36px;
                font-size: 1rem;
            }
            
            .canvas-brush-controls {
                width: 180px;
                bottom: 10px;
                left: 10px;
            }
            
            .zoom-controls {
                bottom: 10px;
                right: 10px;
            }
            
            .zoom-btn {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .canvas-placeholder {
                font-size: 2rem;
            }
            
            .current-tool-indicator,
            .current-color-indicator {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 0 10px;
                height: 55px;
            }
            
            .logo-icon {
                font-size: 1.5rem;
            }
            
            .user-actions .btn span {
                display: none;
            }
            
            .user-actions .btn i {
                margin: 0;
            }
            
            .btn {
                padding: 8px 12px;
            }
            
            .language-selector select {
                padding: 5px 8px;
                font-size: 0.8rem;
            }
            
            .language-selector i {
                display: none;
            }
            
            .canvas-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .canvas-controls {
                width: 100%;
                justify-content: center;
            }
            
            .canvas-title {
                font-size: 1.2rem;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .template-img {
                height: 100px;
            }
            
            .gallery-img {
                height: 90px;
            }
            
            .modal-content {
                padding: 15px;
            }
            
            .canvas-placeholder {
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                height: 50px;
            }
            
            .language-selector span {
                display: none;
            }
            
            .language-selector select {
                padding: 4px 6px;
                font-size: 0.75rem;
            }
            
            .canvas-container {
                padding: 10px;
            }
            
            .canvas-wrapper {
                border-radius: 8px;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
            }
            
            .template-img {
                height: 80px;
            }
            
            .gallery-img {
                height: 80px;
            }
            
            .template-name, .gallery-name {
                padding: 8px;
                font-size: 0.8rem;
            }
            
            .gallery-actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .action-btn {
                padding: 5px;
                font-size: 0.7rem;
            }
            
            .message-modal-content {
                padding: 20px 15px;
            }
            
            .message-modal-icon {
                font-size: 3rem;
            }
            
            .message-modal-title {
                font-size: 1.2rem;
            }
            
            .message-modal-text {
                font-size: 0.95rem;
            }
            
            .message-modal-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .message-modal-buttons .btn {
                width: 100%;
                justify-content: center;
            }
            
            .help-guide {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
                bottom: 10px;
                left: 10px;
            }
            
            .notification {
                padding: 10px 15px;
                font-size: 0.9rem;
                max-width: 95%;
            }
            
            .canvas-placeholder {
                font-size: 1.5rem;
            }
            
            .canvas-overlay-controls {
                top: 5px;
                left: 5px;
            }
            
            .overlay-btn {
                width: 34px;
                height: 34px;
                font-size: 0.9rem;
            }
            
            .canvas-brush-controls {
                width: 160px;
                padding: 8px;
                bottom: 8px;
                left: 8px;
            }
            
            .color-modal-content {
                padding: 20px 15px;
            }
            
            .color-modal-palette {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .color-modal-option {
                width: 40px;
                height: 40px;
            }
        }
        
        @media (max-width: 400px) {
            .header {
                padding: 0 8px;
            }
            
            .btn {
                padding: 6px 8px;
                font-size: 0.8rem;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            }
            
            .template-img {
                height: 70px;
            }
            
            .gallery-img {
                height: 70px;
            }
            
            .gallery-bulk-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .zoom-controls {
                padding: 6px;
            }
            
            .zoom-btn {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .overlay-btn {
                width: 32px;
                height: 32px;
                font-size: 0.8rem;
            }
            
            .canvas-placeholder {
                font-size: 1.3rem;
            }
            
            .canvas-brush-controls {
                width: 140px;
            }
            
            .color-modal-palette {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 320px) {
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .template-img {
                height: 60px;
            }
            
            .gallery-img {
                height: 60px;
            }
            
            .template-name, .gallery-name {
                font-size: 0.75rem;
                padding: 6px;
            }
            
            .canvas-placeholder {
                font-size: 1.2rem;
            }
            
            .overlay-btn {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
        }
        
        /* Ekran döndürme için */
        @media (orientation: landscape) and (max-height: 500px) {
            .header {
                height: 50px;
            }
            
            .canvas-wrapper {
                min-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <i class="logo-icon fas fa-palette"></i>
                <div class="language-selector">
                    <i class="fas fa-globe"></i>
                    <select id="languageSelect">
                        <option value="tr">Türkçe</option>
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                    </select>
                </div>
            </div>
            
            <div class="user-actions">
                <button class="btn btn-outline" id="uploadImageHeaderBtn" title="Resim Yükle">
                    <i class="fas fa-upload"></i>
                    <span>Resim Yükle</span>
                </button>
                <button class="btn btn-outline" id="newCanvasHeaderBtn" title="Yeni Tuval">
                    <i class="fas fa-plus"></i>
                    <span>Yeni Tuval</span>
                </button>
                <button class="btn btn-primary" id="saveBtn" title="Kaydet">
                    <i class="fas fa-save"></i>
                    <span>Kaydet</span>
                </button>
                <button class="btn btn-secondary" id="templatesBtn" title="Şablonlar">
                    <i class="fas fa-layer-group"></i>
                    <span>Şablon</span>
                </button>
                <button class="btn btn-accent" id="galleryBtn" title="Galeri">
                    <i class="fas fa-images"></i>
                    <span>Galeri</span>
                </button>
                <button class="btn btn-primary" id="downloadHeaderBtn">
                    <i class="fas fa-download"></i>
                    <span>İndir</span>
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Canvas Area -->
            <main class="canvas-container">
                <div class="canvas-header">
                    <h2 class="canvas-title">ArtCanvas - Dijital Boyama</h2>
                    <div class="canvas-controls">
                        <!-- Boş alan, daha önce indir butonu buradaydı -->
                    </div>
                </div>
                
                <div class="canvas-wrapper">
                    <canvas id="drawingCanvas"></canvas>
                    
                    <!-- Yeni tuval yazısı -->
                    <div class="canvas-placeholder" id="canvasPlaceholder">
                        Yeni Tuval
                    </div>
                    
                    <!-- Tuval üzerinde kontroller -->
                    <div class="canvas-overlay-controls">
                        <button class="overlay-btn" id="undoOverlayBtn" title="Geri Al">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="overlay-btn" id="redoOverlayBtn" title="İleri Al" disabled>
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="overlay-btn" id="eraserOverlayBtn" title="Silgi">
                            <i class="fas fa-eraser"></i>
                        </button>
                        <button class="overlay-btn" id="clearOverlayBtn" title="Temizle">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="overlay-btn" id="colorOverlayBtn" title="Renk Seç">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="overlay-btn" id="brushOverlayBtn" title="Araçlar">
                            <i class="fas fa-paint-brush"></i>
                        </button>
                    </div>
                    
                    <!-- Mevcut araç göstergesi -->
                    <div class="current-tool-indicator" id="currentToolIndicator">
                        <i class="fas fa-paint-brush"></i>
                        <span class="current-tool-name" id="currentToolName">Fırça</span>
                    </div>
                    
                    <!-- Mevcut renk göstergesi -->
                    <div class="current-color-indicator" id="currentColorIndicator">
                        <div class="color-preview" id="currentColorPreview" style="background-color: #6c5ce7;"></div>
                        <span class="current-tool-name">Renk</span>
                    </div>
                    
                    <!-- Tuval üzerinde fırça boyutu kontrolü -->
                    <div class="canvas-brush-controls">
                        <div class="canvas-brush-title">
                            <i class="fas fa-paint-brush"></i>
                            <span>Fırça Boyutu</span>
                        </div>
                        <div class="canvas-brush-slider">
                            <input type="range" id="canvasBrushSize" min="1" max="50" value="10">
                            <span class="canvas-brush-value" id="canvasBrushSizeValue">10px</span>
                        </div>
                    </div>
                    
                    <!-- Zoom kontrolleri -->
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomInBtn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <div class="zoom-level" id="zoomLevel">%100</div>
                        <button class="zoom-btn" id="zoomOutBtn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button class="zoom-btn" id="resetZoomBtn">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Templates Modal -->
    <div class="modal" id="templatesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Boyama Şablonları</h3>
                <button class="close-modal" id="closeTemplatesModal">&times;</button>
            </div>
            <div class="templates-grid" id="templatesGrid">
                <!-- Templates will be added by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Gallery Modal -->
    <div class="modal" id="galleryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Kayıtlı Çizimler</h3>
                <button class="close-modal" id="closeGalleryModal">&times;</button>
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <!-- Gallery items will be added by JavaScript -->
            </div>
            <div class="gallery-bulk-actions">
                <button class="btn btn-outline" id="selectAllBtn">
                    <i class="fas fa-check-square"></i>
                    <span>Tümünü Seç</span>
                </button>
                <button class="btn btn-danger" id="deleteSelectedBtn">
                    <i class="fas fa-trash-alt"></i>
                    <span>Seçilenleri Sil</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Save Modal -->
    <div class="message-modal" id="saveModal">
        <div class="message-modal-content">
            <div class="modal-header" style="margin-bottom: 15px;">
                <h3 class="modal-title">Çizimi Kaydet</h3>
                <button class="close-modal" id="closeSaveModal">&times;</button>
            </div>
            <p class="message-modal-text">Çiziminize bir isim verin:</p>
            <input type="text" id="saveInput" class="message-modal-input" placeholder="Çizim adı">
            <div class="message-modal-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" id="saveModalOkBtn">Kaydet</button>
                <button class="btn btn-outline" id="saveModalCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Color Picker Modal -->
    <div class="color-modal" id="colorModal">
        <div class="color-modal-content">
            <div class="color-modal-title">
                <span>Renk Seç</span>
                <button class="color-modal-close" id="closeColorModal">&times;</button>
            </div>
            <div class="color-modal-palette" id="colorModalPalette">
                <!-- Color options will be added by JavaScript -->
            </div>
            <div class="color-modal-custom">
                <input type="color" id="colorModalPicker" value="#6c5ce7">
                <span>Özel Renk</span>
            </div>
            <div class="color-modal-slider">
                <div class="color-modal-slider-label">
                    <span>Şeffaflık</span>
                    <span id="colorModalOpacityValue">100%</span>
                </div>
                <input type="range" id="colorModalOpacity" min="1" max="100" value="100">
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="colorModalOkBtn">Tamam</button>
            </div>
        </div>
    </div>
    
    <!-- New Canvas Modal -->
    <div class="modal" id="newCanvasModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Yeni Tuval Seç</h3>
                <button class="close-modal" id="closeNewCanvasModal">&times;</button>
            </div>
            <div class="canvas-options-grid" id="canvasOptionsGrid">
                <!-- Canvas options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="newCanvasModalOkBtn">Oluştur</button>
                <button class="btn btn-outline" id="newCanvasModalCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">İndirme Formatı Seç</h3>
                <button class="close-modal" id="closeDownloadModal">&times;</button>
            </div>
            <div class="download-options" id="downloadOptions">
                <!-- Download options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="downloadModalOkBtn">İndir</button>
                <button class="btn btn-outline" id="downloadModalCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Tools Modal -->
    <div class="modal" id="toolsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Boyama Araçları</h3>
                <button class="close-modal" id="closeToolsModal">&times;</button>
            </div>
            <div class="tools-modal-grid" id="toolsModalGrid">
                <!-- Tool options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="toolsModalOkBtn">Tamam</button>
                <button class="btn btn-outline" id="toolsModalCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Text Tool Modal -->
    <div class="modal" id="textToolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Metin Ekle</h3>
                <button class="close-modal" id="closeTextToolModal">&times;</button>
            </div>
            <div class="text-tool-container">
                <div class="text-input-container">
                    <input type="text" id="textInput" class="text-input" placeholder="Metin girin...">
                    <button class="btn btn-primary" id="addTextBtn">Ekle</button>
                </div>
                <div class="text-options">
                    <div class="text-option">
                        <span class="text-option-label">Yazı Tipi</span>
                        <select id="textFont" class="text-input">
                            <option value="Arial">Arial</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Comic Sans MS">Comic Sans MS</option>
                        </select>
                    </div>
                    <div class="text-option">
                        <span class="text-option-label">Boyut</span>
                        <input type="range" id="textSize" min="10" max="72" value="24">
                        <span id="textSizeValue">24px</span>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-outline" id="textToolCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Shape Tool Modal -->
    <div class="modal" id="shapeToolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Şekil Ekle</h3>
                <button class="close-modal" id="closeShapeToolModal">&times;</button>
            </div>
            <div class="shape-tool-container">
                <div class="shape-options" id="shapeOptions">
                    <!-- Shape options will be added by JavaScript -->
                </div>
                <div class="text-options">
                    <div class="text-option">
                        <span class="text-option-label">Dolgu Rengi</span>
                        <input type="color" id="shapeFillColor" value="#6c5ce7">
                    </div>
                    <div class="text-option">
                        <span class="text-option-label">Kenar Rengi</span>
                        <input type="color" id="shapeStrokeColor" value="#000000">
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-outline" id="shapeToolCancelBtn">İptal</button>
            </div>
        </div>
    </div>
    
    <!-- Drawing View Modal -->
    <div class="modal drawing-view-modal" id="drawingViewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Çizim Detayları</h3>
                <button class="close-modal" id="closeDrawingViewModal">&times;</button>
            </div>
            <div class="drawing-view-content" id="drawingViewContent">
                <!-- Drawing view content will be added by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Message Modal (Genel Mesajlar) -->
    <div class="message-modal" id="messageModal">
        <div class="message-modal-content">
            <div class="message-modal-icon" id="messageModalIcon">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3 class="message-modal-title" id="messageModalTitle">Başlık</h3>
            <p class="message-modal-text" id="messageModalText">Mesaj içeriği...</p>
            <div class="message-modal-buttons">
                <button class="btn btn-primary" id="messageModalOkBtn">Tamam</button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Modal -->
    <div class="message-modal" id="confirmModal">
        <div class="message-modal-content">
            <div class="message-modal-icon" id="confirmModalIcon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h3 class="message-modal-title" id="confirmModalTitle">Başlık</h3>
            <p class="message-modal-text" id="confirmModalText">Mesaj içeriği...</p>
            <div class="message-modal-buttons">
                <button class="btn btn-primary" id="confirmModalYesBtn">Evet</button>
                <button class="btn btn-outline" id="confirmModalNoBtn">Hayır</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Çiziminiz kaydedildi!</span>
    </div>
    
    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <p>Yükleniyor...</p>
    </div>
    
    <!-- Help Guide -->
    <div class="help-guide" id="helpGuide">
        <i class="fas fa-question"></i>
    </div>
    
    <script>
        // Dil desteği için metinler
        const translations = {
            tr: {
                canvasTitle: "Yeni Tuval",
                save: "Kaydet",
                templates: "Şablonlar",
                gallery: "Galeri",
                brush: "Fırça",
                pencil: "Kalem",
                eraser: "Silgi",
                watercolor: "Sulu Boya",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Dolgu",
                shape: "Şekil",
                text: "Metin",
                uploadImage: "Resim Yükle",
                clear: "Temizle",
                undo: "Geri Al",
                redo: "İleri Al",
                exportPNG: "PNG",
                exportJPG: "JPG",
                exportPDF: "PDF",
                newCanvas: "Yeni Tuval",
                download: "İndir",
                share: "Paylaş",
                savedNotification: "Çiziminiz kaydedildi!",
                loadedNotification: "Şablon yüklendi!",
                exportedNotification: "Çiziminiz dışa aktarıldı!",
                emptyGallery: "Henüz kayıtlı çiziminiz yok.",
                confirmDelete: "Bu çizimi silmek istediğinize emin misiniz?",
                confirmDeleteMultiple: "Seçili {count} çizimi silmek istediğinize emin misiniz?",
                newCanvasConfirm: "Yeni tuval oluşturmak istediğinize emin misiniz? Mevcut çalışmanız kaydedilmeyecektir.",
                clearCanvasConfirm: "Tuvali temizlemek istediğinize emin misiniz?",
                helpTitle: "ArtCanvas Kullanım Kılavuzu",
                helpContent: `
                    <h3>ArtCanvas'a Hoş Geldiniz!</h3>
                    <p>ArtCanvas ile dijital boyama yapmanın keyfini çıkarın. Tüm kontroller tuval üzerinde ve üst menüdedir.</p>
                    <ul>
                        <li><strong>Tuval Üzerindeki Kontroller (Sol Üst Köşe):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Geri Al: Son işlemi geri alır</li>
                                <li><i class="fas fa-redo"></i> İleri Al: Geri alınan işlemi tekrar uygular</li>
                                <li><i class="fas fa-eraser"></i> Silgi: Çizimi siler (şeffaf yapar)</li>
                                <li><i class="fas fa-trash-alt"></i> Temizle: Tüm tuvali temizler</li>
                                <li><i class="fas fa-palette"></i> Renk Seç: Renk paletini açar</li>
                                <li><i class="fas fa-paint-brush"></i> Araçlar: Çizim araçlarını açar</li>
                            </ul>
                        </li>
                        <li><strong>Üst Menü:</strong>
                            <ul>
                                <li>Resim Yükle: Bilgisayarınızdan resim yükleyin</li>
                                <li>Yeni Tuval: Yeni boş tuval oluşturun</li>
                                <li>Kaydet: Çiziminizi kaydedin</li>
                                <li>Şablon: Hazır şablonlardan seçin</li>
                                <li>Galeri: Kayıtlı çizimlerinizi görüntüleyin</li>
                                <li>İndir: Çiziminizi PNG/JPG/PDF olarak indirin</li>
                            </ul>
                        </li>
                        <li><strong>Tuval Üzerindeki Diğer Kontroller:</strong>
                            <ul>
                                <li>Sol Alt Köşe: Fırça boyutu ayarı</li>
                                <li>Sağ Alt Köşe: Yakınlaştırma/Uzaklaştırma</li>
                                <li>Sağ Üst Köşe: Mevcut araç ve renk bilgisi</li>
                            </ul>
                        </li>
                        <li><strong>Çizim Araçları:</strong> Araçlar butonuna tıklayarak fırça, kalem, sulu boya, pastel, spray, dolgu, metin ve şekil araçlarına erişebilirsiniz.</li>
                        <li><strong>Renk Seçimi:</strong> Renk seç butonuna tıklayarak renk paletini açabilir, özel renk seçebilir ve şeffaflık ayarı yapabilirsiniz.</li>
                        <li><strong>Fırça Boyutu:</strong> Sol alt köşedeki kaydırıcı ile fırça boyutunu ayarlayabilirsiniz.</li>
                        <li><strong>Yakınlaştırma/Uzaklaştırma:</strong> Sağ alt köşedeki düğmelerle tuvali yakınlaştırıp uzaklaştırabilirsiniz.</li>
                        <li><strong>Şablonlar:</strong> Önceden hazırlanmış şablonlardan birini seçerek hızlıca başlayabilirsiniz.</li>
                        <li><strong>Geri Al/İleri Al:</strong> Tuvalin sol üst köşesindeki düğmelerle işlemlerinizi geri alabilir veya ileri alabilirsiniz.</li>
                    </ul>
                    <p>İyi eğlenceler ve sanat dolu anlar!</p>
                `,
                selectAll: "Tümünü Seç",
                deleteSelected: "Seçilenleri Sil",
                noDrawingsSelected: "Hiç çizim seçilmedi.",
                templateLoadError: "Şablon yüklenirken bir hata oluştu. Lütfen başka bir şablon seçin.",
                brushSize: "Fırça Boyutu",
                colorPicker: "Renk Seç",
                transparency: "Şeffaflık",
                tools: "Araçlar",
                ok: "Tamam",
                cancel: "İptal",
                create: "Oluştur",
                blankCanvas: "Boş Tuval",
                gridCanvas: "Kareli Tuval",
                linedCanvas: "Çizgili Tuval",
                coloredCanvas: "Renkli Tuval",
                canvasBlankDesc: "Beyaz boş tuval",
                canvasGridDesc: "Kareli kağıt görünümü",
                canvasLinedDesc: "Çizgili kağıt görünümü",
                canvasColoredDesc: "Seçtiğiniz renkte tuval",
                formatPNG: "PNG Formatı",
                formatJPG: "JPG Formatı",
                formatPDF: "PDF Formatı",
                formatPNGDesc: "Yüksek kaliteli görüntü",
                formatJPGDesc: "Daha küçük dosya boyutu",
                formatPDFDesc: "Vektörel çizim",
                shapeCircle: "Daire",
                shapeSquare: "Kare",
                shapeTriangle: "Üçgen",
                shapeRectangle: "Dikdörtgen",
                shapeStar: "Yıldız",
                shapeHeart: "Kalp",
                drawingName: "Çizim Adı",
                drawingDate: "Kayıt Tarihi",
                viewDrawing: "Çizimi Görüntüle",
                welcomeTitle: "ArtCanvas'a Hoş Geldiniz!",
                welcomeMessage: "ArtCanvas ile dijital boyama yapmanın keyfini çıkarın. Tüm kontroller tuval üzerindedir. Sol üst köşedeki araçları kullanarak çizim yapmaya başlayın. Üst menüden yeni tuval oluşturabilir, resim yükleyebilir, şablonları kullanabilir, çizimlerinizi kaydedip galeriden görüntüleyebilirsiniz. İyi eğlenceler!"
            },
            en: {
                canvasTitle: "New Canvas",
                save: "Save",
                templates: "Templates",
                gallery: "Gallery",
                brush: "Brush",
                pencil: "Pencil",
                eraser: "Eraser",
                watercolor: "Watercolor",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Fill",
                shape: "Shape",
                text: "Text",
                uploadImage: "Upload Image",
                clear: "Clear",
                undo: "Undo",
                redo: "Redo",
                exportPNG: "PNG",
                exportJPG: "JPG",
                exportPDF: "PDF",
                newCanvas: "New Canvas",
                download: "Download",
                share: "Share",
                savedNotification: "Your drawing has been saved!",
                loadedNotification: "Template loaded!",
                exportedNotification: "Your drawing has been exported!",
                emptyGallery: "You don't have any saved drawings yet.",
                confirmDelete: "Are you sure you want to delete this drawing?",
                confirmDeleteMultiple: "Are you sure you want to delete {count} selected drawings?",
                newCanvasConfirm: "Are you sure you want to create a new canvas? Your current work will not be saved.",
                clearCanvasConfirm: "Are you sure you want to clear the canvas?",
                helpTitle: "ArtCanvas User Guide",
                helpContent: `
                    <h3>Welcome to ArtCanvas!</h3>
                    <p>Enjoy digital painting with ArtCanvas. All controls are on the canvas and top menu.</p>
                    <ul>
                        <li><strong>Canvas Controls (Top Left Corner):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Undo: Undo last action</li>
                                <li><i class="fas fa-redo"></i> Redo: Redo undone action</li>
                                <li><i class="fas fa-eraser"></i> Eraser: Erase drawing (makes transparent)</li>
                                <li><i class="fas fa-trash-alt"></i> Clear: Clear entire canvas</li>
                                <li><i class="fas fa-palette"></i> Color Select: Open color palette</li>
                                <li><i class="fas fa-paint-brush"></i> Tools: Open drawing tools</li>
                            </ul>
                        </li>
                        <li><strong>Top Menu:</strong>
                            <ul>
                                <li>Upload Image: Upload image from your computer</li>
                                <li>New Canvas: Create new blank canvas</li>
                                <li>Save: Save your drawing</li>
                                <li>Templates: Choose from ready templates</li>
                                <li>Gallery: View your saved drawings</li>
                                <li>Download: Download your drawing as PNG/JPG/PDF</li>
                            </ul>
                        </li>
                        <li><strong>Other Canvas Controls:</strong>
                            <ul>
                                <li>Bottom Left Corner: Brush size adjustment</li>
                                <li>Bottom Right Corner: Zoom in/out</li>
                                <li>Top Right Corner: Current tool and color information</li>
                            </ul>
                        </li>
                        <li><strong>Drawing Tools:</strong> Click the tools button to access brush, pencil, watercolor, pastel, spray, fill, text and shape tools.</li>
                        <li><strong>Color Selection:</strong> Click the color select button to open the color palette, choose custom colors and adjust transparency.</li>
                        <li><strong>Brush Size:</strong> Adjust brush size with the slider at bottom left corner.</li>
                        <li><strong>Zoom In/Out:</strong> Use buttons at bottom right corner to zoom the canvas.</li>
                        <li><strong>Templates:</strong> Select from pre-made templates to start quickly.</li>
                        <li><strong>Undo/Redo:</strong> Use buttons at top left corner of the canvas to undo or redo your actions.</li>
                    </ul>
                    <p>Have fun and enjoy artistic moments!</p>
                `,
                selectAll: "Select All",
                deleteSelected: "Delete Selected",
                noDrawingsSelected: "No drawings selected.",
                templateLoadError: "Error loading template. Please select another template.",
                brushSize: "Brush Size",
                colorPicker: "Color Picker",
                transparency: "Transparency",
                tools: "Tools",
                ok: "OK",
                cancel: "Cancel",
                create: "Create",
                blankCanvas: "Blank Canvas",
                gridCanvas: "Grid Canvas",
                linedCanvas: "Lined Canvas",
                coloredCanvas: "Colored Canvas",
                canvasBlankDesc: "White blank canvas",
                canvasGridDesc: "Grid paper view",
                canvasLinedDesc: "Lined paper view",
                canvasColoredDesc: "Canvas in selected color",
                formatPNG: "PNG Format",
                formatJPG: "JPG Format",
                formatPDF: "PDF Format",
                formatPNGDesc: "High quality image",
                formatJPGDesc: "Smaller file size",
                formatPDFDesc: "Vector drawing",
                shapeCircle: "Circle",
                shapeSquare: "Square",
                shapeTriangle: "Triangle",
                shapeRectangle: "Rectangle",
                shapeStar: "Star",
                shapeHeart: "Heart",
                drawingName: "Drawing Name",
                drawingDate: "Save Date",
                viewDrawing: "View Drawing",
                welcomeTitle: "Welcome to ArtCanvas!",
                welcomeMessage: "Enjoy digital painting with ArtCanvas. All controls are on the canvas. Start drawing using the tools at the top left corner. From the top menu, you can create a new canvas, upload images, use templates, save your drawings and view them from the gallery. Have fun!"
            }
        };
        
        // Uygulama durumu
        const appState = {
            currentTool: 'brush',
            currentColor: '#6c5ce7',
            brushSize: 10,
            opacity: 1.0,
            zoomLevel: 1.0,
            isDrawing: false,
            lastX: 0,
            lastY: 0,
            undoStack: [],
            redoStack: [],
            currentLanguage: 'tr',
            canvasData: null,
            canvasBackground: 'blank',
            selectedDrawings: new Set(),
            isSelecting: false,
            hasDrawing: false,
            newCanvasSelected: 'blank',
            downloadFormat: 'png',
            selectedShape: 'circle',
            textToolActive: false,
            shapeToolActive: false,
            // Çizim katmanları için
            layers: {
                background: null,
                drawing: null
            }
        };
        
        // DOM elementleri
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        const languageSelect = document.getElementById('languageSelect');
        const brushSizeSlider = document.getElementById('canvasBrushSize');
        const brushSizeValue = document.getElementById('canvasBrushSizeValue');
        const templatesModal = document.getElementById('templatesModal');
        const templatesBtn = document.getElementById('templatesBtn');
        const closeTemplatesModal = document.getElementById('closeTemplatesModal');
        const galleryModal = document.getElementById('galleryModal');
        const galleryBtn = document.getElementById('galleryBtn');
        const closeGalleryModal = document.getElementById('closeGalleryModal');
        const saveBtn = document.getElementById('saveBtn');
        const downloadHeaderBtn = document.getElementById('downloadHeaderBtn');
        const uploadImageHeaderBtn = document.getElementById('uploadImageHeaderBtn');
        const newCanvasHeaderBtn = document.getElementById('newCanvasHeaderBtn');
        const undoOverlayBtn = document.getElementById('undoOverlayBtn');
        const redoOverlayBtn = document.getElementById('redoOverlayBtn');
        const eraserOverlayBtn = document.getElementById('eraserOverlayBtn');
        const clearOverlayBtn = document.getElementById('clearOverlayBtn');
        const colorOverlayBtn = document.getElementById('colorOverlayBtn');
        const brushOverlayBtn = document.getElementById('brushOverlayBtn');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const resetZoomBtn = document.getElementById('resetZoomBtn');
        const zoomLevel = document.getElementById('zoomLevel');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        const loading = document.getElementById('loading');
        const helpGuide = document.getElementById('helpGuide');
        const canvasPlaceholder = document.getElementById('canvasPlaceholder');
        const saveModal = document.getElementById('saveModal');
        const closeSaveModal = document.getElementById('closeSaveModal');
        const saveInput = document.getElementById('saveInput');
        const saveModalOkBtn = document.getElementById('saveModalOkBtn');
        const saveModalCancelBtn = document.getElementById('saveModalCancelBtn');
        const colorModal = document.getElementById('colorModal');
        const closeColorModal = document.getElementById('closeColorModal');
        const colorModalPalette = document.getElementById('colorModalPalette');
        const colorModalPicker = document.getElementById('colorModalPicker');
        const colorModalOpacity = document.getElementById('colorModalOpacity');
        const colorModalOpacityValue = document.getElementById('colorModalOpacityValue');
        const colorModalOkBtn = document.getElementById('colorModalOkBtn');
        const newCanvasModal = document.getElementById('newCanvasModal');
        const closeNewCanvasModal = document.getElementById('closeNewCanvasModal');
        const canvasOptionsGrid = document.getElementById('canvasOptionsGrid');
        const newCanvasModalOkBtn = document.getElementById('newCanvasModalOkBtn');
        const newCanvasModalCancelBtn = document.getElementById('newCanvasModalCancelBtn');
        const downloadModal = document.getElementById('downloadModal');
        const closeDownloadModal = document.getElementById('closeDownloadModal');
        const downloadOptions = document.getElementById('downloadOptions');
        const downloadModalOkBtn = document.getElementById('downloadModalOkBtn');
        const downloadModalCancelBtn = document.getElementById('downloadModalCancelBtn');
        const toolsModal = document.getElementById('toolsModal');
        const closeToolsModal = document.getElementById('closeToolsModal');
        const toolsModalGrid = document.getElementById('toolsModalGrid');
        const toolsModalOkBtn = document.getElementById('toolsModalOkBtn');
        const toolsModalCancelBtn = document.getElementById('toolsModalCancelBtn');
        const textToolModal = document.getElementById('textToolModal');
        const closeTextToolModal = document.getElementById('closeTextToolModal');
        const textInput = document.getElementById('textInput');
        const addTextBtn = document.getElementById('addTextBtn');
        const textFont = document.getElementById('textFont');
        const textSize = document.getElementById('textSize');
        const textSizeValue = document.getElementById('textSizeValue');
        const textToolCancelBtn = document.getElementById('textToolCancelBtn');
        const shapeToolModal = document.getElementById('shapeToolModal');
        const closeShapeToolModal = document.getElementById('closeShapeToolModal');
        const shapeOptions = document.getElementById('shapeOptions');
        const shapeFillColor = document.getElementById('shapeFillColor');
        const shapeStrokeColor = document.getElementById('shapeStrokeColor');
        const shapeToolCancelBtn = document.getElementById('shapeToolCancelBtn');
        const drawingViewModal = document.getElementById('drawingViewModal');
        const closeDrawingViewModal = document.getElementById('closeDrawingViewModal');
        const drawingViewContent = document.getElementById('drawingViewContent');
        const messageModal = document.getElementById('messageModal');
        const messageModalIcon = document.getElementById('messageModalIcon');
        const messageModalTitle = document.getElementById('messageModalTitle');
        const messageModalText = document.getElementById('messageModalText');
        const messageModalOkBtn = document.getElementById('messageModalOkBtn');
        const confirmModal = document.getElementById('confirmModal');
        const confirmModalIcon = document.getElementById('confirmModalIcon');
        const confirmModalTitle = document.getElementById('confirmModalTitle');
        const confirmModalText = document.getElementById('confirmModalText');
        const confirmModalYesBtn = document.getElementById('confirmModalYesBtn');
        const confirmModalNoBtn = document.getElementById('confirmModalNoBtn');
        const currentToolIndicator = document.getElementById('currentToolIndicator');
        const currentToolName = document.getElementById('currentToolName');
        const currentColorIndicator = document.getElementById('currentColorIndicator');
        const currentColorPreview = document.getElementById('currentColorPreview');
        
        // Renk paleti
        const colors = [
            '#6c5ce7', '#a29bfe', '#fd79a8', '#00b894', '#fdcb6e',
            '#e17055', '#d63031', '#0984e3', '#00cec9', '#636e72',
            '#2d3436', '#ffffff', '#000000', '#f1c40f', '#e74c3c',
            '#3498db', '#2ecc71', '#9b59b6', '#1abc9c', '#34495e',
            '#e84393', '#00cec9', '#fd79a8', '#a29bfe', '#fdcb6e',
            '#e17055', '#d63031', '#0984e3', '#00b894', '#6c5ce7'
        ];
        
        // Şablonlar - Verilen tüm resim linkleri
        const templates = [
            { id: 1, name: 'Resim 1', url: 'https://i.hizliresim.com/553goyq.png' },
            { id: 2, name: 'Resim 2', url: 'https://i.hizliresim.com/hlpy6l1.png' },
            { id: 3, name: 'Resim 3', url: 'https://i.hizliresim.com/2e14bw2.png' },
            { id: 4, name: 'Resim 4', url: 'https://i.hizliresim.com/7om8r73.png' },
            { id: 5, name: 'Resim 5', url: 'https://i.hizliresim.com/jr8gesf.png' },
            { id: 6, name: 'Resim 6', url: 'https://i.hizliresim.com/tg8e66j.png' },
            { id: 7, name: 'Resim 7', url: 'https://i.hizliresim.com/4ubuk33.png' },
            { id: 8, name: 'Resim 8', url: 'https://i.hizliresim.com/hqt1zcd.png' },
            { id: 9, name: 'Resim 9', url: 'https://i.hizliresim.com/46263k5.png' },
            { id: 10, name: 'Resim 10', url: 'https://i.hizliresim.com/hli4z19.png' },
            { id: 11, name: 'Resim 11', url: 'https://i.hizliresim.com/m06z3qo.png' },
            { id: 12, name: 'Resim 12', url: 'https://i.hizliresim.com/b2jodaw.png' },
            { id: 13, name: 'Resim 13', url: 'https://i.hizliresim.com/gmmzm61.png' },
            { id: 14, name: 'Resim 14', url: 'https://i.hizliresim.com/h7oj6z3.jpg' },
            { id: 15, name: 'Resim 15', url: 'https://i.hizliresim.com/kylgqm7.png' },
            { id: 16, name: 'Resim 16', url: 'https://i.hizliresim.com/bvbzewm.png' },
            { id: 17, name: 'Resim 17', url: 'https://i.hizliresim.com/azxnfsd.png' },
            { id: 18, name: 'Resim 18', url: 'https://i.hizliresim.com/o2yu4mh.png' },
            { id: 19, name: 'Resim 19', url: 'https://i.hizliresim.com/kqfn8x8.png' },
            { id: 20, name: 'Resim 20', url: 'https://i.hizliresim.com/8kxpuvu.png' },
            { id: 21, name: 'Resim 21', url: 'https://i.hizliresim.com/r98yfe3.jpg' },
            { id: 22, name: 'Resim 22', url: 'https://i.hizliresim.com/k8adqvj.png' },
            { id: 23, name: 'Resim 23', url: 'https://i.hizliresim.com/gn0p8p8.png' },
            { id: 24, name: 'Resim 24', url: 'https://i.hizliresim.com/5qvcb1v.png' },
            { id: 25, name: 'Resim 25', url: 'https://i.hizliresim.com/1lj0j7u.png' },
            { id: 26, name: 'Resim 26', url: 'https://i.hizliresim.com/gp1tkan.png' },
            { id: 27, name: 'Resim 27', url: 'https://i.hizliresim.com/mm8dwsw.png' },
            { id: 28, name: 'Resim 28', url: 'https://i.hizliresim.com/l0lvwbn.jpg' },
            { id: 29, name: 'Resim 29', url: 'https://i.hizliresim.com/qdfwqv0.png' },
            { id: 30, name: 'Resim 30', url: 'https://i.hizliresim.com/iisk7ba.png' },
            { id: 31, name: 'Resim 31', url: 'https://i.hizliresim.com/lkoytni.png' },
            { id: 32, name: 'Resim 32', url: 'https://i.hizliresim.com/7vn90ip.png' },
            { id: 33, name: 'Resim 33', url: 'https://i.hizliresim.com/rc84qso.png' },
            { id: 34, name: 'Resim 34', url: 'https://i.hizliresim.com/df5hx0l.png' },
            { id: 35, name: 'Resim 35', url: 'https://i.hizliresim.com/6n041ap.png' },
            { id: 36, name: 'Resim 36', url: 'https://i.hizliresim.com/i8eevnf.png' },
            { id: 37, name: 'Resim 37', url: 'https://i.hizliresim.com/ll3hr7s.png' },
            { id: 38, name: 'Resim 38', url: 'https://i.hizliresim.com/jx4wesq.png' },
            { id: 39, name: 'Resim 39', url: 'https://i.hizliresim.com/a053li8.png' },
            { id: 40, name: 'Resim 40', url: 'https://i.hizliresim.com/aoqryfb.png' },
            { id: 41, name: 'Resim 41', url: 'https://i.hizliresim.com/okqpgp0.png' },
            { id: 42, name: 'Resim 42', url: 'https://i.hizliresim.com/1u6r2jh.jpg' },
            { id: 43, name: 'Resim 43', url: 'https://i.hizliresim.com/7wle4f4.png' },
            { id: 44, name: 'Resim 44', url: 'https://i.hizliresim.com/ge30qcm.png' },
            { id: 45, name: 'Resim 45', url: 'https://i.hizliresim.com/9xwa92a.png' },
            { id: 46, name: 'Resim 46', url: 'https://i.hizliresim.com/1dgkfir.png' },
            { id: 47, name: 'Resim 47', url: 'https://i.hizliresim.com/g8j4esl.png' },
            { id: 48, name: 'Resim 48', url: 'https://i.hizliresim.com/3c1metf.png' },
            { id: 49, name: 'Resim 49', url: 'https://i.hizliresim.com/r5jnyjy.png' },
            { id: 50, name: 'Resim 50', url: 'https://i.hizliresim.com/s6y8z8v.png' },
            { id: 51, name: 'Resim 51', url: 'https://i.hizliresim.com/7s8uv5n.png' },
            { id: 52, name: 'Resim 52', url: 'https://i.hizliresim.com/a9x3d98.png' },
            { id: 53, name: 'Resim 53', url: 'https://i.hizliresim.com/ihmhd68.png' },
            { id: 54, name: 'Resim 54', url: 'https://i.hizliresim.com/3c0k2up.png' },
            { id: 55, name: 'Resim 55', url: 'https://i.hizliresim.com/lhmerga.png' },
            { id: 56, name: 'Resim 56', url: 'https://i.hizliresim.com/itisvof.png' },
            { id: 57, name: 'Resim 57', url: 'https://i.hizliresim.com/nf25827.jpg' },
            { id: 58, name: 'Resim 58', url: 'https://i.hizliresim.com/rxbdaso.png' },
            { id: 59, name: 'Resim 59', url: 'https://i.hizliresim.com/1b54adu.png' },
            { id: 60, name: 'Resim 60', url: 'https://i.hizliresim.com/q63g7uu.png' },
            { id: 61, name: 'Resim 61', url: 'https://i.hizliresim.com/fvo1gjt.png' },
            { id: 62, name: 'Resim 62', url: 'https://i.hizliresim.com/hxlddgp.png' },
            { id: 63, name: 'Resim 63', url: 'https://i.hizliresim.com/n4xg2ro.png' },
            { id: 64, name: 'Resim 64', url: 'https://i.hizliresim.com/pdkdrqt.png' },
            { id: 65, name: 'Resim 65', url: 'https://i.hizliresim.com/glnc1bb.jpg' }
        ];
        
        // Canvas boyutlarını dinamik ayarla
        function resizeCanvas() {
            const container = canvas.parentElement;
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            // Minimum boyutları belirle
            const minCanvasSize = 300;
            const maxCanvasSize = 2000;
            
            // Container boyutlarına göre canvas boyutlarını hesapla
            let canvasWidth = Math.max(minCanvasSize, containerWidth - 40);
            let canvasHeight = Math.max(minCanvasSize, containerHeight - 40);
            
            // Maksimum boyutu aşmamasını sağla
            canvasWidth = Math.min(canvasWidth, maxCanvasSize);
            canvasHeight = Math.min(canvasHeight, maxCanvasSize);
            
            // Canvas boyutlarını ayarla
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            
            // Canvas stil boyutlarını ayarla (ekran görüntüsü için)
            canvas.style.width = `${canvasWidth}px`;
            canvas.style.height = `${canvasHeight}px`;
            
            // Katmanları başlat
            initLayers();
            
            // Canvas'ı temizle ve seçili arka planı uygula
            applyCanvasBackground();
            
            // Kayıtlı durumu geri yükle
            if (appState.canvasData) {
                const img = new Image();
                img.onload = function() {
                    drawToDrawingLayer(() => {
                        ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);
                    });
                    appState.hasDrawing = true;
                    updateCanvasPlaceholder();
                };
                img.src = appState.canvasData;
            } else {
                appState.hasDrawing = false;
                updateCanvasPlaceholder();
            }
            
            // Undo stack'ini güncelle
            saveToUndoStack();
            
            // İmleç boyutunu güncelle
            updateCursor();
        }
        
        // Katmanları başlat
        function initLayers() {
            // Arka plan katmanı
            appState.layers.background = document.createElement('canvas');
            appState.layers.background.width = canvas.width;
            appState.layers.background.height = canvas.height;
            
            // Çizim katmanı
            appState.layers.drawing = document.createElement('canvas');
            appState.layers.drawing.width = canvas.width;
            appState.layers.drawing.height = canvas.height;
        }
        
        // Çizim katmanına çiz
        function drawToDrawingLayer(drawFunction) {
            const drawingCtx = appState.layers.drawing.getContext('2d');
            drawFunction(drawingCtx);
            renderCanvas();
        }
        
        // Canvas'ı render et (tüm katmanları birleştir)
        function renderCanvas() {
            // Temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Arka plan katmanını çiz
            if (appState.layers.background) {
                ctx.drawImage(appState.layers.background, 0, 0);
            }
            
            // Çizim katmanını çiz
            if (appState.layers.drawing) {
                ctx.drawImage(appState.layers.drawing, 0, 0);
            }
        }
        
        // Canvas arka planını uygula
        function applyCanvasBackground() {
            if (!appState.layers.background) return;
            
            const bgCtx = appState.layers.background.getContext('2d');
            
            // Önce tamamen beyaz yap
            bgCtx.fillStyle = '#ffffff';
            bgCtx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Seçili arka plana göre desen çiz
            switch(appState.canvasBackground) {
                case 'grid':
                    drawGrid(bgCtx);
                    break;
                case 'lined':
                    drawLined(bgCtx);
                    break;
                case 'colored':
                    // Renkli tuval
                    bgCtx.fillStyle = appState.currentColor;
                    bgCtx.fillRect(0, 0, canvas.width, canvas.height);
                    break;
                case 'blank':
                default:
                    // Sadece beyaz kalır
                    break;
            }
            
            renderCanvas();
        }
        
        // Kareli desen çiz
        function drawGrid(context) {
            context.strokeStyle = '#f0f0f0';
            context.lineWidth = 1;
            
            const gridSize = 20;
            const width = canvas.width;
            const height = canvas.height;
            
            // Dikey çizgiler
            for (let x = 0; x <= width; x += gridSize) {
                context.beginPath();
                context.moveTo(x, 0);
                context.lineTo(x, height);
                context.stroke();
            }
            
            // Yatay çizgiler
            for (let y = 0; y <= height; y += gridSize) {
                context.beginPath();
                context.moveTo(0, y);
                context.lineTo(width, y);
                context.stroke();
            }
        }
        
        // Çizgili desen çiz
        function drawLined(context) {
            context.strokeStyle = '#f0f0f0';
            context.lineWidth = 1;
            
            const lineSpacing = 25;
            const height = canvas.height;
            
            // Yatay çizgiler
            for (let y = 0; y <= height; y += lineSpacing) {
                context.beginPath();
                context.moveTo(0, y);
                context.lineTo(canvas.width, y);
                context.stroke();
            }
            
            // Kenar çizgileri (daha kalın)
            context.strokeStyle = '#e0e0e0';
            context.lineWidth = 2;
            
            context.beginPath();
            context.moveTo(0, 0);
            context.lineTo(canvas.width, 0);
            context.stroke();
            
            context.beginPath();
            context.moveTo(0, canvas.height);
            context.lineTo(canvas.width, canvas.height);
            context.stroke();
        }
        
        // Yeni tuval yazısını güncelle
        function updateCanvasPlaceholder() {
            if (appState.hasDrawing) {
                canvasPlaceholder.style.display = 'none';
            } else {
                canvasPlaceholder.style.display = 'block';
                canvasPlaceholder.textContent = translations[appState.currentLanguage].canvasTitle;
            }
        }
        
        // Mevcut araç göstergesini güncelle
        function updateToolIndicator() {
            const toolNames = {
                'brush': translations[appState.currentLanguage].brush,
                'pencil': translations[appState.currentLanguage].pencil,
                'eraser': translations[appState.currentLanguage].eraser,
                'watercolor': translations[appState.currentLanguage].watercolor,
                'pastel': translations[appState.currentLanguage].pastel,
                'spray': translations[appState.currentLanguage].spray,
                'fill': translations[appState.currentLanguage].fill,
                'shape': translations[appState.currentLanguage].shape,
                'text': translations[appState.currentLanguage].text
            };
            
            const toolIcons = {
                'brush': 'fas fa-paint-brush',
                'pencil': 'fas fa-pencil-alt',
                'eraser': 'fas fa-eraser',
                'watercolor': 'fas fa-tint',
                'pastel': 'fas fa-star',
                'spray': 'fas fa-spray-can',
                'fill': 'fas fa-fill-drip',
                'shape': 'fas fa-shapes',
                'text': 'fas fa-font'
            };
            
            const toolName = toolNames[appState.currentTool] || translations[appState.currentLanguage].brush;
            const toolIcon = toolIcons[appState.currentTool] || 'fas fa-paint-brush';
            
            currentToolName.textContent = toolName;
            currentToolIndicator.querySelector('i').className = toolIcon;
            
            // Renk göstergesini güncelle
            currentColorPreview.style.backgroundColor = appState.currentColor;
            
            // Silgi modundaysa renk göstergesini gri yap
            if (appState.currentTool === 'eraser') {
                currentColorPreview.style.backgroundColor = '#cccccc';
            }
        }
        
        // Renk modal paletini oluştur
        function createColorModalPalette() {
            colorModalPalette.innerHTML = '';
            colors.forEach(color => {
                const colorElement = document.createElement('div');
                colorElement.className = 'color-modal-option';
                if (color === appState.currentColor) {
                    colorElement.classList.add('active');
                }
                colorElement.style.backgroundColor = color;
                colorElement.dataset.color = color;
                
                colorElement.addEventListener('click', function() {
                    document.querySelectorAll('.color-modal-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.currentColor = this.dataset.color;
                    colorModalPicker.value = appState.currentColor;
                    
                    // Silgi modundaysa fırça moduna geç
                    if (appState.currentTool === 'eraser') {
                        appState.currentTool = 'brush';
                    }
                    
                    updateCursor();
                    updateToolIndicator();
                });
                
                colorModalPalette.appendChild(colorElement);
            });
        }
        
        // Şablonları oluştur
        function createTemplates() {
            const templatesGrid = document.getElementById('templatesGrid');
            templatesGrid.innerHTML = '';
            
            templates.forEach(template => {
                const templateElement = document.createElement('div');
                templateElement.className = 'template-item';
                templateElement.dataset.id = template.id;
                
                templateElement.innerHTML = `
                    <img class="template-img" src="${template.url}" alt="${template.name}" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"150\"><rect width=\"100%\" height=\"100%\" fill=\"%23f5f5f5\"/></svg>';">
                `;
                
                templateElement.addEventListener('click', function() {
                    loadTemplate(template.id);
                });
                
                templatesGrid.appendChild(templateElement);
            });
        }
        
        // Şablon yükle
        function loadTemplate(templateId) {
            const template = templates.find(t => t.id === templateId);
            if (!template) return;
            
            // Template resmini yükle
            const img = new Image();
            img.crossOrigin = "anonymous";
            
            // Yükleme başladığında loading göster
            loading.style.display = 'flex';
            
            img.onload = function() {
                // Resmi canvas boyutuna sığdır
                const scale = Math.min(
                    canvas.width / img.width,
                    canvas.height / img.height
                );
                const width = img.width * scale;
                const height = img.height * scale;
                const x = (canvas.width - width) / 2;
                const y = (canvas.height - height) / 2;
                
                // Çizim katmanına template resmini çiz
                drawToDrawingLayer((drawingCtx) => {
                    drawingCtx.drawImage(img, x, y, width, height);
                });
                
                appState.hasDrawing = true;
                updateCanvasPlaceholder();
                saveToUndoStack();
                loading.style.display = 'none';
                closeModal(templatesModal);
                showMessage('Başarılı', translations[appState.currentLanguage].loadedNotification);
            };
            
            img.onerror = function() {
                loading.style.display = 'none';
                showMessage('Hata', translations[appState.currentLanguage].templateLoadError, 'error');
            };
            
            img.src = template.url + '?t=' + new Date().getTime(); // Cache önlemek için timestamp ekle
        }
        
        // Yeni tuval modal'ını oluştur
        function createNewCanvasModal() {
            canvasOptionsGrid.innerHTML = '';
            
            const canvasOptions = [
                { id: 'blank', name: translations[appState.currentLanguage].blankCanvas, icon: 'fas fa-square', desc: translations[appState.currentLanguage].canvasBlankDesc },
                { id: 'grid', name: translations[appState.currentLanguage].gridCanvas, icon: 'fas fa-th', desc: translations[appState.currentLanguage].canvasGridDesc },
                { id: 'lined', name: translations[appState.currentLanguage].linedCanvas, icon: 'fas fa-border-all', desc: translations[appState.currentLanguage].canvasLinedDesc },
                { id: 'colored', name: translations[appState.currentLanguage].coloredCanvas, icon: 'fas fa-fill-drip', desc: translations[appState.currentLanguage].canvasColoredDesc }
            ];
            
            canvasOptions.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'canvas-option';
                if (option.id === appState.newCanvasSelected) {
                    optionElement.classList.add('active');
                }
                optionElement.dataset.id = option.id;
                
                optionElement.innerHTML = `
                    <div class="canvas-option-icon">
                        <i class="${option.icon}"></i>
                    </div>
                    <div class="canvas-option-name">${option.name}</div>
                    <div class="canvas-option-desc">${option.desc}</div>
                `;
                
                optionElement.addEventListener('click', function() {
                    document.querySelectorAll('.canvas-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.newCanvasSelected = this.dataset.id;
                });
                
                canvasOptionsGrid.appendChild(optionElement);
            });
        }
        
        // Yeni tuval oluştur
        function createNewCanvas() {
            if (appState.hasDrawing) {
                showConfirm(
                    translations[appState.currentLanguage].newCanvas,
                    translations[appState.currentLanguage].newCanvasConfirm,
                    function() {
                        appState.canvasBackground = appState.newCanvasSelected;
                        
                        // Çizim katmanını temizle
                        if (appState.layers.drawing) {
                            const drawingCtx = appState.layers.drawing.getContext('2d');
                            drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                        }
                        
                        applyCanvasBackground();
                        saveToUndoStack();
                        appState.canvasData = null;
                        appState.hasDrawing = false;
                        updateCanvasPlaceholder();
                        closeModal(newCanvasModal);
                    }
                );
            } else {
                appState.canvasBackground = appState.newCanvasSelected;
                
                // Çizim katmanını temizle
                if (appState.layers.drawing) {
                    const drawingCtx = appState.layers.drawing.getContext('2d');
                    drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                }
                
                applyCanvasBackground();
                saveToUndoStack();
                appState.canvasData = null;
                appState.hasDrawing = false;
                updateCanvasPlaceholder();
                closeModal(newCanvasModal);
            }
        }
        
        // İndirme modal'ını oluştur
        function createDownloadModal() {
            downloadOptions.innerHTML = '';
            
            const downloadOptionsList = [
                { id: 'png', name: translations[appState.currentLanguage].formatPNG, icon: 'fas fa-file-image', desc: translations[appState.currentLanguage].formatPNGDesc },
                { id: 'jpg', name: translations[appState.currentLanguage].formatJPG, icon: 'fas fa-file-image', desc: translations[appState.currentLanguage].formatJPGDesc },
                { id: 'pdf', name: translations[appState.currentLanguage].formatPDF, icon: 'fas fa-file-pdf', desc: translations[appState.currentLanguage].formatPDFDesc }
            ];
            
            downloadOptionsList.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'download-option';
                if (option.id === appState.downloadFormat) {
                    optionElement.classList.add('active');
                }
                optionElement.dataset.id = option.id;
                
                optionElement.innerHTML = `
                    <div class="download-option-icon">
                        <i class="${option.icon}"></i>
                    </div>
                    <div class="download-option-name">${option.name}</div>
                    <div class="download-option-desc">${option.desc}</div>
                `;
                
                optionElement.addEventListener('click', function() {
                    document.querySelectorAll('.download-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.downloadFormat = this.dataset.id;
                });
                
                downloadOptions.appendChild(optionElement);
            });
        }
        
        // Çizimi indir
        function downloadCanvas() {
            // Geçici canvas oluştur
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            const tempCtx = tempCanvas.getContext('2d');
            
            // Tüm katmanları geçici canvasa çiz
            if (appState.layers.background) {
                tempCtx.drawImage(appState.layers.background, 0, 0);
            }
            if (appState.layers.drawing) {
                tempCtx.drawImage(appState.layers.drawing, 0, 0);
            }
            
            const dataUrl = tempCanvas.toDataURL(`image/${appState.downloadFormat}`);
            const link = document.createElement('a');
            link.download = `artcanvas_${new Date().getTime()}.${appState.downloadFormat}`;
            link.href = dataUrl;
            link.click();
            
            closeModal(downloadModal);
            showMessage('Başarılı', translations[appState.currentLanguage].exportedNotification);
        }
        
        // Araçlar modal'ını oluştur
        function createToolsModal() {
            toolsModalGrid.innerHTML = '';
            
            const tools = [
                { id: 'brush', name: translations[appState.currentLanguage].brush, icon: 'fas fa-paint-brush' },
                { id: 'pencil', name: translations[appState.currentLanguage].pencil, icon: 'fas fa-pencil-alt' },
                { id: 'watercolor', name: translations[appState.currentLanguage].watercolor, icon: 'fas fa-tint' },
                { id: 'pastel', name: translations[appState.currentLanguage].pastel, icon: 'fas fa-star' },
                { id: 'spray', name: translations[appState.currentLanguage].spray, icon: 'fas fa-spray-can' },
                { id: 'fill', name: translations[appState.currentLanguage].fill, icon: 'fas fa-fill-drip' },
                { id: 'text', name: translations[appState.currentLanguage].text, icon: 'fas fa-font' },
                { id: 'shape', name: translations[appState.currentLanguage].shape, icon: 'fas fa-shapes' }
            ];
            
            tools.forEach(tool => {
                const toolElement = document.createElement('div');
                toolElement.className = 'tools-modal-option';
                if (tool.id === appState.currentTool) {
                    toolElement.classList.add('active');
                }
                toolElement.dataset.id = tool.id;
                
                toolElement.innerHTML = `
                    <div class="tools-modal-option-icon">
                        <i class="${tool.icon}"></i>
                    </div>
                    <div class="tools-modal-option-name">${tool.name}</div>
                `;
                
                toolElement.addEventListener('click', function() {
                    document.querySelectorAll('.tools-modal-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.currentTool = this.dataset.id;
                    
                    // Özel araçlar için modal aç
                    if (appState.currentTool === 'text') {
                        closeModal(toolsModal);
                        openModal(textToolModal);
                        textInput.focus();
                    } else if (appState.currentTool === 'shape') {
                        closeModal(toolsModal);
                        openModal(shapeToolModal);
                    }
                    
                    updateToolIndicator();
                    closeModal(toolsModal);
                });
                
                toolsModalGrid.appendChild(toolElement);
            });
        }
        
        // Şekil seçeneklerini oluştur
        function createShapeOptions() {
            shapeOptions.innerHTML = '';
            
            const shapes = [
                { id: 'circle', name: translations[appState.currentLanguage].shapeCircle, icon: 'fas fa-circle' },
                { id: 'square', name: translations[appState.currentLanguage].shapeSquare, icon: 'fas fa-square' },
                { id: 'triangle', name: translations[appState.currentLanguage].shapeTriangle, icon: 'fas fa-play fa-rotate-270' },
                { id: 'rectangle', name: translations[appState.currentLanguage].shapeRectangle, icon: 'fas fa-square' },
                { id: 'star', name: translations[appState.currentLanguage].shapeStar, icon: 'fas fa-star' },
                { id: 'heart', name: translations[appState.currentLanguage].shapeHeart, icon: 'fas fa-heart' }
            ];
            
            shapes.forEach(shape => {
                const shapeElement = document.createElement('div');
                shapeElement.className = 'shape-option';
                if (shape.id === appState.selectedShape) {
                    shapeElement.classList.add('active');
                }
                shapeElement.dataset.id = shape.id;
                
                shapeElement.innerHTML = `
                    <div class="shape-option-icon">
                        <i class="${shape.icon}"></i>
                    </div>
                    <div class="shape-option-name">${shape.name}</div>
                `;
                
                shapeElement.addEventListener('click', function() {
                    document.querySelectorAll('.shape-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.selectedShape = this.dataset.id;
                });
                
                shapeOptions.appendChild(shapeElement);
            });
        }
        
        // Şekil çiz
        function drawShape(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.beginPath();
                drawingCtx.globalAlpha = appState.opacity;
                
                const size = appState.brushSize * 5;
                
                switch(appState.selectedShape) {
                    case 'circle':
                        drawingCtx.arc(x, y, size / 2, 0, Math.PI * 2);
                        break;
                    case 'square':
                        drawingCtx.rect(x - size/2, y - size/2, size, size);
                        break;
                    case 'triangle':
                        drawingCtx.moveTo(x, y - size/2);
                        drawingCtx.lineTo(x - size/2, y + size/2);
                        drawingCtx.lineTo(x + size/2, y + size/2);
                        drawingCtx.closePath();
                        break;
                    case 'rectangle':
                        drawingCtx.rect(x - size/2, y - size/4, size, size/2);
                        break;
                    case 'star':
                        drawStar(drawingCtx, x, y, 5, size/2, size/4);
                        break;
                    case 'heart':
                        drawHeart(drawingCtx, x, y, size/2);
                        break;
                }
                
                drawingCtx.fillStyle = shapeFillColor.value;
                drawingCtx.strokeStyle = shapeStrokeColor.value;
                drawingCtx.lineWidth = 2;
                drawingCtx.fill();
                drawingCtx.stroke();
            });
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
            saveToUndoStack();
        }
        
        // Yıldız çiz
        function drawStar(ctx, cx, cy, spikes, outerRadius, innerRadius) {
            let rot = Math.PI / 2 * 3;
            let x = cx;
            let y = cy;
            let step = Math.PI / spikes;
            
            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            
            for (let i = 0; i < spikes; i++) {
                x = cx + Math.cos(rot) * outerRadius;
                y = cy + Math.sin(rot) * outerRadius;
                ctx.lineTo(x, y);
                rot += step;
                
                x = cx + Math.cos(rot) * innerRadius;
                y = cy + Math.sin(rot) * innerRadius;
                ctx.lineTo(x, y);
                rot += step;
            }
            
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
        }
        
        // Kalp çiz
        function drawHeart(ctx, x, y, size) {
            const topCurveHeight = size * 0.3;
            
            ctx.beginPath();
            ctx.moveTo(x, y + size/2);
            
            // Sol üst eğri
            ctx.bezierCurveTo(
                x, y + size/2 - topCurveHeight,
                x - size/2, y,
                x, y - size/2
            );
            
            // Sağ üst eğri
            ctx.bezierCurveTo(
                x + size/2, y,
                x, y + size/2 - topCurveHeight,
                x, y + size/2
            );
            
            ctx.closePath();
        }
        
        // Metin ekle
        function addText() {
            const text = textInput.value.trim();
            if (!text) return;
            
            appState.textToolActive = true;
            canvas.style.cursor = 'text';
            
            closeModal(textToolModal);
            showMessage('Bilgi', 'Tuvalde metni eklemek istediğiniz yere tıklayın.');
        }
        
        // Metin çiz
        function drawText(x, y) {
            if (!appState.textToolActive) return;
            
            const text = textInput.value.trim();
            if (!text) return;
            
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.font = `${textSize.value}px ${textFont.value}`;
                drawingCtx.fillStyle = appState.currentColor;
                drawingCtx.globalAlpha = appState.opacity;
                drawingCtx.fillText(text, x, y);
            });
            
            appState.textToolActive = false;
            canvas.style.cursor = 'crosshair';
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
            saveToUndoStack();
        }
        
        // Çizim fonksiyonları
        function startDrawing(e) {
            appState.isDrawing = true;
            [appState.lastX, appState.lastY] = getMousePos(e);
            
            // Şekil veya metin aracıysa
            if (appState.currentTool === 'shape') {
                drawShape(appState.lastX, appState.lastY);
                appState.isDrawing = false;
                return;
            }
            
            if (appState.textToolActive) {
                drawText(appState.lastX, appState.lastY);
                appState.isDrawing = false;
                return;
            }
            
            // İlk noktayı çiz
            drawPoint(appState.lastX, appState.lastY);
        }
        
        function draw(e) {
            if (!appState.isDrawing) return;
            
            e.preventDefault();
            
            const [x, y] = getMousePos(e);
            
            // Seçili araca göre çizim yap
            switch(appState.currentTool) {
                case 'brush':
                    drawBrush(x, y);
                    break;
                case 'pencil':
                    drawPencil(x, y);
                    break;
                case 'eraser':
                    drawEraser(x, y);
                    break;
                case 'watercolor':
                    drawWatercolor(x, y);
                    break;
                case 'pastel':
                    drawPastel(x, y);
                    break;
                case 'spray':
                    drawSpray(x, y);
                    break;
                case 'fill':
                    // Dolgu işlemi için tıklama gerekli, sürükleme değil
                    break;
                default:
                    drawBrush(x, y);
            }
            
            [appState.lastX, appState.lastY] = [x, y];
            
            // Çizim yapıldığını işaretle
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
        }
        
        function drawPoint(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.beginPath();
                drawingCtx.globalAlpha = appState.opacity;
                
                if (appState.currentTool === 'eraser') {
                    // Silgi: Şeffaf yap
                    drawingCtx.globalCompositeOperation = 'destination-out';
                    drawingCtx.arc(x, y, appState.brushSize / 2, 0, Math.PI * 2);
                    drawingCtx.fill();
                    drawingCtx.globalCompositeOperation = 'source-over';
                } else {
                    drawingCtx.fillStyle = appState.currentColor;
                    drawingCtx.arc(x, y, appState.brushSize / 2, 0, Math.PI * 2);
                    drawingCtx.fill();
                }
            });
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
        }
        
        function stopDrawing() {
            if (appState.isDrawing) {
                appState.isDrawing = false;
                saveToUndoStack();
            }
        }
        
        // Fırça çizimi
        function drawBrush(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
            });
        }
        
        // Kalem çizimi
        function drawPencil(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = Math.max(1, appState.brushSize / 3);
                drawingCtx.lineCap = 'square';
                drawingCtx.lineJoin = 'miter';
                drawingCtx.globalAlpha = appState.opacity;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
            });
        }
        
        // Silgi çizimi
        function drawEraser(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.globalAlpha = appState.opacity;
                drawingCtx.globalCompositeOperation = 'destination-out';
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                drawingCtx.globalCompositeOperation = 'source-over';
            });
        }
        
        // Sulu boya efekti
        function drawWatercolor(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity * 0.5;
                
                // Sulu boya efekti için bulanık çizgi
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                // Ek renk katmanları
                drawingCtx.globalAlpha = appState.opacity * 0.3;
                drawingCtx.lineWidth = appState.brushSize * 0.7;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX + 2, appState.lastY + 2);
                drawingCtx.lineTo(x + 2, y + 2);
                drawingCtx.stroke();
                
                drawingCtx.globalAlpha = appState.opacity;
            });
        }
        
        // Pastel efekti
        function drawPastel(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity;
                
                // Pastel efekti için hafif doku
                drawingCtx.shadowColor = appState.currentColor;
                drawingCtx.shadowBlur = 5;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                drawingCtx.shadowBlur = 0;
            });
        }
        
        // Spray efekti
        function drawSpray(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.fillStyle = appState.currentColor;
                drawingCtx.globalAlpha = appState.opacity;
                
                const density = appState.brushSize * 2;
                const radius = appState.brushSize;
                
                for (let i = 0; i < density; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const sprayRadius = Math.random() * radius;
                    const sprayX = x + Math.cos(angle) * sprayRadius;
                    const sprayY = y + Math.sin(angle) * sprayRadius;
                    const dotSize = Math.random() * 3 + 1;
                    
                    drawingCtx.beginPath();
                    drawingCtx.arc(sprayX, sprayY, dotSize, 0, Math.PI * 2);
                    drawingCtx.fill();
                }
            });
        }
        
        // Fare/touch pozisyonunu al
        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            
            if (e.type.includes('touch')) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            // Zoom seviyesine göre ayarla
            x /= appState.zoomLevel;
            y /= appState.zoomLevel;
            
            // Canvas boyutlarına göre normalize et
            x = x * (canvas.width / rect.width);
            y = y * (canvas.height / rect.height);
            
            return [x, y];
        }
        
        // İmleç boyutunu güncelle
        function updateCursor() {
            // Canvas imlecini güncelle
            if (appState.currentTool === 'eraser') {
                canvas.style.cursor = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="${appState.brushSize * 2}" height="${appState.brushSize * 2}" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="rgba(255,255,255,0.5)" stroke="%23666" stroke-width="5"/></svg>') ${appState.brushSize} ${appState.brushSize}, auto`;
            } else if (appState.textToolActive) {
                canvas.style.cursor = 'text';
            } else if (appState.currentTool === 'shape') {
                canvas.style.cursor = 'crosshair';
            } else {
                canvas.style.cursor = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="${appState.brushSize * 2}" height="${appState.brushSize * 2}" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="${appState.currentColor.replace('#', '%23')}" stroke="%23666" stroke-width="5"/></svg>') ${appState.brushSize} ${appState.brushSize}, crosshair`;
            }
        }
        
        // Undo stack'ine kaydet
        function saveToUndoStack() {
            const imageData = canvas.toDataURL();
            appState.undoStack.push(imageData);
            
            // Stack boyutunu sınırla
            if (appState.undoStack.length > 20) {
                appState.undoStack.shift();
            }
            
            // Redo stack'ini temizle
            appState.redoStack = [];
            
            // Buton durumlarını güncelle
            updateUndoRedoButtons();
        }
        
        // Geri al
        function undo() {
            if (appState.undoStack.length < 2) return;
            
            // Redo stack'ine ekle
            appState.redoStack.push(appState.undoStack.pop());
            
            // Önceki durumu yükle
            const img = new Image();
            img.onload = function() {
                // Çizim katmanını temizle
                const drawingCtx = appState.layers.drawing.getContext('2d');
                drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                
                // Resmi çizim katmanına çiz
                drawingCtx.drawImage(img, 0, 0);
                renderCanvas();
                
                // Çizim durumunu güncelle
                appState.hasDrawing = appState.undoStack.length > 1;
                updateCanvasPlaceholder();
            };
            img.src = appState.undoStack[appState.undoStack.length - 1];
            
            // Buton durumlarını güncelle
            updateUndoRedoButtons();
        }
        
        // İleri al
        function redo() {
            if (appState.redoStack.length === 0) return;
            
            // Undo stack'ine ekle
            appState.undoStack.push(appState.redoStack.pop());
            
            // Sonraki durumu yükle
            const img = new Image();
            img.onload = function() {
                // Çizim katmanını temizle
                const drawingCtx = appState.layers.drawing.getContext('2d');
                drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                
                // Resmi çizim katmanına çiz
                drawingCtx.drawImage(img, 0, 0);
                renderCanvas();
                
                // Çizim durumunu güncelle
                appState.hasDrawing = true;
                updateCanvasPlaceholder();
            };
            img.src = appState.undoStack[appState.undoStack.length - 1];
            
            // Buton durumlarını güncelle
            updateUndoRedoButtons();
        }
        
        // Undo/redo butonlarını güncelle
        function updateUndoRedoButtons() {
            undoOverlayBtn.disabled = appState.undoStack.length < 2;
            redoOverlayBtn.disabled = appState.redoStack.length === 0;
        }
        
        // Araç butonlarını güncelle
        function updateToolButtons() {
            // Silgi butonunu güncelle
            if (appState.currentTool === 'eraser') {
                eraserOverlayBtn.style.backgroundColor = 'var(--primary-color)';
                eraserOverlayBtn.style.color = 'white';
            } else {
                eraserOverlayBtn.style.backgroundColor = 'white';
                eraserOverlayBtn.style.color = 'var(--primary-color)';
            }
            
            // İmleci güncelle
            updateCursor();
            
            // Araç göstergesini güncelle
            updateToolIndicator();
        }
        
        // Canvas'ı temizle
        function clearCanvas() {
            if (!appState.hasDrawing) return;
            
            showConfirm(
                'Tuvali Temizle',
                translations[appState.currentLanguage].clearCanvasConfirm,
                function() {
                    // Çizim katmanını temizle
                    if (appState.layers.drawing) {
                        const drawingCtx = appState.layers.drawing.getContext('2d');
                        drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                        renderCanvas();
                    }
                    
                    saveToUndoStack();
                    appState.hasDrawing = false;
                    updateCanvasPlaceholder();
                }
            );
        }
        
        // Resim yükle
        function uploadImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        // Resmi canvas boyutuna sığdır
                        const scale = Math.min(
                            canvas.width / img.width,
                            canvas.height / img.height
                        );
                        const width = img.width * scale;
                        const height = img.height * scale;
                        const x = (canvas.width - width) / 2;
                        const y = (canvas.height - height) / 2;
                        
                        // Resmi çizim katmanına çiz
                        drawToDrawingLayer((drawingCtx) => {
                            drawingCtx.drawImage(img, x, y, width, height);
                        });
                        
                        appState.hasDrawing = true;
                        updateCanvasPlaceholder();
                        saveToUndoStack();
                    };
                    img.src = event.target.result;
                };
                reader.readAsDataURL(file);
            };
            
            input.click();
        }
        
        // Canvas'ı kaydet
        function saveCanvas() {
            const drawingData = canvas.toDataURL();
            
            // Save modal'ını aç
            saveInput.value = `Çizim_${new Date().toLocaleDateString('tr-TR')}`;
            openModal(saveModal);
            saveInput.focus();
            saveInput.select();
        }
        
        // Kaydetme işlemini gerçekleştir
        function performSave() {
            const drawingName = saveInput.value.trim();
            if (!drawingName) {
                showMessage('Uyarı', 'Lütfen bir çizim adı girin.', 'warning');
                return;
            }
            
            const drawingData = canvas.toDataURL();
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            
            savedDrawings.push({
                name: drawingName,
                data: drawingData,
                date: new Date().toISOString()
            });
            
            localStorage.setItem('artcanvas_drawings', JSON.stringify(savedDrawings));
            showMessage('Başarılı', translations[appState.currentLanguage].savedNotification);
            
            closeModal(saveModal);
        }
        
        // Renk seçme modal'ını aç
        function openColorModal() {
            createColorModalPalette();
            colorModalPicker.value = appState.currentColor;
            colorModalOpacity.value = appState.opacity * 100;
            colorModalOpacityValue.textContent = `${colorModalOpacity.value}%`;
            openModal(colorModal);
        }
        
        // Zoom işlemleri
        function zoomIn() {
            if (appState.zoomLevel < 3) {
                appState.zoomLevel += 0.1;
                updateZoom();
            }
        }
        
        function zoomOut() {
            if (appState.zoomLevel > 0.3) {
                appState.zoomLevel -= 0.1;
                updateZoom();
            }
        }
        
        function resetZoom() {
            appState.zoomLevel = 1.0;
            updateZoom();
        }
        
        function updateZoom() {
            canvas.style.transform = `scale(${appState.zoomLevel})`;
            zoomLevel.textContent = `${Math.round(appState.zoomLevel * 100)}%`;
        }
        
        // Modal işlemleri
        function openModal(modal) {
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // Mesaj göster
        function showMessage(title, text, type = 'info') {
            const iconMap = {
                'info': 'fas fa-info-circle',
                'success': 'fas fa-check-circle',
                'warning': 'fas fa-exclamation-triangle',
                'error': 'fas fa-exclamation-circle'
            };
            
            const colorMap = {
                'info': 'var(--primary-color)',
                'success': 'var(--success-color)',
                'warning': 'var(--warning-color)',
                'error': 'var(--danger-color)'
            };
            
            messageModalIcon.innerHTML = `<i class="${iconMap[type]}" style="color: ${colorMap[type]}"></i>`;
            messageModalTitle.textContent = title;
            messageModalText.textContent = text;
            
            openModal(messageModal);
        }
        
        // Onay mesajı göster
        function showConfirm(title, text, onConfirm) {
            confirmModalTitle.textContent = title;
            confirmModalText.textContent = text;
            
            confirmModalYesBtn.onclick = function() {
                closeModal(confirmModal);
                if (onConfirm) onConfirm();
            };
            
            confirmModalNoBtn.onclick = function() {
                closeModal(confirmModal);
            };
            
            openModal(confirmModal);
        }
        
        // Bildirim göster
        function showNotification(text) {
            notificationText.textContent = text;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Dil değiştir
        function changeLanguage(lang) {
            appState.currentLanguage = lang;
            languageSelect.value = lang;
            
            // Yeni tuval yazısını güncelle
            updateCanvasPlaceholder();
            
            // Tuval üzerindeki fırça boyutu başlığını güncelle
            document.querySelector('.canvas-brush-title span').textContent = translations[lang].brushSize;
            
            // Buton metinlerini güncelle
            document.getElementById('saveBtn').querySelector('span').textContent = translations[lang].save;
            document.getElementById('templatesBtn').querySelector('span').textContent = translations[lang].templates;
            document.getElementById('galleryBtn').querySelector('span').textContent = translations[lang].gallery;
            document.getElementById('uploadImageHeaderBtn').querySelector('span').textContent = translations[lang].uploadImage;
            document.getElementById('newCanvasHeaderBtn').querySelector('span').textContent = translations[lang].newCanvas;
            document.getElementById('downloadHeaderBtn').querySelector('span').textContent = translations[lang].download;
            
            // Araç göstergesini güncelle
            updateToolIndicator();
        }
        
        // Çizim görüntüleme modal'ını aç
        function openDrawingView(drawingData, drawingName, drawingDate) {
            drawingViewContent.innerHTML = `
                <img class="drawing-view-img" src="${drawingData}" alt="${drawingName}">
                <div class="drawing-view-info">
                    <h4>${translations[appState.currentLanguage].drawingName}: ${drawingName}</h4>
                    <p>${translations[appState.currentLanguage].drawingDate}: ${new Date(drawingDate).toLocaleDateString()}</p>
                </div>
                <div class="message-modal-buttons">
                    <button class="btn btn-primary" id="loadDrawingBtn">Çizimi Yükle</button>
                    <button class="btn btn-secondary" id="downloadDrawingBtn">Çizimi İndir</button>
                </div>
            `;
            
            openModal(drawingViewModal);
            
            // Buton event listener'larını ekle
            setTimeout(() => {
                document.getElementById('loadDrawingBtn').addEventListener('click', function() {
                    const img = new Image();
                    img.onload = function() {
                        // Çizim katmanını temizle
                        const drawingCtx = appState.layers.drawing.getContext('2d');
                        drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                        
                        // Resmi çizim katmanına çiz
                        drawingCtx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        renderCanvas();
                        
                        appState.hasDrawing = true;
                        updateCanvasPlaceholder();
                        saveToUndoStack();
                        
                        closeModal(drawingViewModal);
                        closeModal(galleryModal);
                        showMessage('Başarılı', 'Çizim yüklendi!');
                    };
                    img.src = drawingData;
                });
                
                document.getElementById('downloadDrawingBtn').addEventListener('click', function() {
                    const link = document.createElement('a');
                    link.download = `${drawingName}.png`;
                    link.href = drawingData;
                    link.click();
                });
            }, 100);
        }
        
        // Galeri modal'ını aç
        function openGalleryModal() {
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            const galleryGrid = document.getElementById('galleryGrid');
            
            galleryGrid.innerHTML = '';
            
            if (savedDrawings.length === 0) {
                galleryGrid.innerHTML = `<p style="text-align: center; padding: 40px; color: #666;">${translations[appState.currentLanguage].emptyGallery}</p>`;
            } else {
                savedDrawings.forEach((drawing, index) => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    
                    galleryItem.innerHTML = `
                        <div class="gallery-img" style="background-image: url(${drawing.data});"></div>
                        <div class="gallery-name">${drawing.name}</div>
                        <div class="gallery-actions">
                            <button class="action-btn action-btn-download" data-index="${index}">
                                <i class="fas fa-download"></i> İndir
                            </button>
                            <button class="action-btn action-btn-delete" data-index="${index}">
                                <i class="fas fa-trash-alt"></i> Sil
                            </button>
                        </div>
                    `;
                    
                    // Çizim resmine tıklama
                    galleryItem.querySelector('.gallery-img').addEventListener('click', function() {
                        openDrawingView(drawing.data, drawing.name, drawing.date);
                    });
                    
                    galleryGrid.appendChild(galleryItem);
                });
                
                // Galeri butonlarına event listener ekle
                setTimeout(() => {
                    document.querySelectorAll('.action-btn-download').forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const index = parseInt(this.dataset.index);
                            const drawing = savedDrawings[index];
                            const link = document.createElement('a');
                            link.download = `${drawing.name}.png`;
                            link.href = drawing.data;
                            link.click();
                            showMessage('Başarılı', 'Çizim indirildi!');
                        });
                    });
                    
                    document.querySelectorAll('.action-btn-delete').forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const index = parseInt(this.dataset.index);
                            showConfirm(
                                'Çizimi Sil',
                                translations[appState.currentLanguage].confirmDelete,
                                function() {
                                    savedDrawings.splice(index, 1);
                                    localStorage.setItem('artcanvas_drawings', JSON.stringify(savedDrawings));
                                    
                                    // Modal'ı kapat ve yeniden aç
                                    closeModal(galleryModal);
                                    setTimeout(() => {
                                        openGalleryModal();
                                        showMessage('Başarılı', 'Çizim silindi!');
                                    }, 300);
                                }
                            );
                        });
                    });
                }, 100);
            }
            
            openModal(galleryModal);
        }
        
        // Event listeners
        function initEventListeners() {
            // Canvas çizim event'leri
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch event'leri (mobil uyumluluk)
            canvas.addEventListener('touchstart', function(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    startDrawing(e);
                }
            }, { passive: false });
            
            canvas.addEventListener('touchmove', function(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    draw(e);
                }
            }, { passive: false });
            
            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                stopDrawing();
            }, { passive: false });
            
            // Dil değiştirme
            languageSelect.addEventListener('change', function() {
                changeLanguage(this.value);
            });
            
            // Fırça boyutu (canvas üzerinde)
            brushSizeSlider.addEventListener('input', function() {
                appState.brushSize = parseInt(this.value);
                brushSizeValue.textContent = `${appState.brushSize}px`;
                updateCursor();
            });
            
            // Modal butonları
            templatesBtn.addEventListener('click', () => {
                openModal(templatesModal);
                createTemplates();
            });
            
            closeTemplatesModal.addEventListener('click', () => closeModal(templatesModal));
            
            galleryBtn.addEventListener('click', () => {
                openGalleryModal();
            });
            
            closeGalleryModal.addEventListener('click', () => closeModal(galleryModal));
            
            closeDrawingViewModal.addEventListener('click', () => closeModal(drawingViewModal));
            
            // Save modal butonları
            closeSaveModal.addEventListener('click', () => closeModal(saveModal));
            saveModalCancelBtn.addEventListener('click', () => closeModal(saveModal));
            saveModalOkBtn.addEventListener('click', performSave);
            
            // Save input'ta Enter tuşu
            saveInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSave();
                }
            });
            
            // Color modal butonları
            closeColorModal.addEventListener('click', () => closeModal(colorModal));
            colorModalOkBtn.addEventListener('click', () => {
                appState.opacity = colorModalOpacity.value / 100;
                closeModal(colorModal);
            });
            
            colorModalPicker.addEventListener('change', function() {
                appState.currentColor = this.value;
                
                // Silgi modundaysa fırça moduna geç
                if (appState.currentTool === 'eraser') {
                    appState.currentTool = 'brush';
                    updateToolButtons();
                }
                
                updateCursor();
                updateToolIndicator();
            });
            
            colorModalOpacity.addEventListener('input', function() {
                colorModalOpacityValue.textContent = `${this.value}%`;
            });
            
            // New canvas modal butonları
            newCanvasHeaderBtn.addEventListener('click', () => {
                createNewCanvasModal();
                openModal(newCanvasModal);
            });
            
            closeNewCanvasModal.addEventListener('click', () => closeModal(newCanvasModal));
            newCanvasModalOkBtn.addEventListener('click', createNewCanvas);
            newCanvasModalCancelBtn.addEventListener('click', () => closeModal(newCanvasModal));
            
            // Download modal butonları
            downloadHeaderBtn.addEventListener('click', () => {
                createDownloadModal();
                openModal(downloadModal);
            });
            
            closeDownloadModal.addEventListener('click', () => closeModal(downloadModal));
            downloadModalOkBtn.addEventListener('click', downloadCanvas);
            downloadModalCancelBtn.addEventListener('click', () => closeModal(downloadModal));
            
            // Tools modal butonları
            brushOverlayBtn.addEventListener('click', () => {
                createToolsModal();
                openModal(toolsModal);
            });
            
            closeToolsModal.addEventListener('click', () => closeModal(toolsModal));
            toolsModalOkBtn.addEventListener('click', () => {
                closeModal(toolsModal);
                updateToolButtons();
            });
            
            toolsModalCancelBtn.addEventListener('click', () => closeModal(toolsModal));
            
            // Text tool modal butonları
            closeTextToolModal.addEventListener('click', () => {
                appState.currentTool = 'brush';
                appState.textToolActive = false;
                closeModal(textToolModal);
                updateToolButtons();
            });
            
            addTextBtn.addEventListener('click', addText);
            textToolCancelBtn.addEventListener('click', () => {
                appState.currentTool = 'brush';
                appState.textToolActive = false;
                closeModal(textToolModal);
                updateToolButtons();
            });
            
            textSize.addEventListener('input', function() {
                textSizeValue.textContent = `${this.value}px`;
            });
            
            // Shape tool modal butonları
            closeShapeToolModal.addEventListener('click', () => {
                appState.currentTool = 'brush';
                appState.shapeToolActive = false;
                closeModal(shapeToolModal);
                updateToolButtons();
            });
            
            shapeToolCancelBtn.addEventListener('click', () => {
                appState.currentTool = 'brush';
                appState.shapeToolActive = false;
                closeModal(shapeToolModal);
                updateToolButtons();
            });
            
            // Message modal butonları
            messageModalOkBtn.addEventListener('click', () => closeModal(messageModal));
            
            // Confirm modal butonları zaten ayarlandı
            
            // Dış tıklamada modal'ı kapat
            window.addEventListener('click', function(e) {
                if (e.target === templatesModal) closeModal(templatesModal);
                if (e.target === saveModal) closeModal(saveModal);
                if (e.target === colorModal) closeModal(colorModal);
                if (e.target === newCanvasModal) closeModal(newCanvasModal);
                if (e.target === downloadModal) closeModal(downloadModal);
                if (e.target === toolsModal) closeModal(toolsModal);
                if (e.target === textToolModal) {
                    appState.currentTool = 'brush';
                    appState.textToolActive = false;
                    closeModal(textToolModal);
                    updateToolButtons();
                }
                if (e.target === shapeToolModal) {
                    appState.currentTool = 'brush';
                    appState.shapeToolActive = false;
                    closeModal(shapeToolModal);
                    updateToolButtons();
                }
                if (e.target === galleryModal) closeModal(galleryModal);
                if (e.target === drawingViewModal) closeModal(drawingViewModal);
                if (e.target === messageModal) closeModal(messageModal);
                if (e.target === confirmModal) closeModal(confirmModal);
            });
            
            // Tuval üzerindeki butonlar
            undoOverlayBtn.addEventListener('click', undo);
            redoOverlayBtn.addEventListener('click', redo);
            
            eraserOverlayBtn.addEventListener('click', function() {
                if (appState.currentTool === 'eraser') {
                    appState.currentTool = 'brush';
                } else {
                    appState.currentTool = 'eraser';
                }
                updateToolButtons();
            });
            
            clearOverlayBtn.addEventListener('click', clearCanvas);
            colorOverlayBtn.addEventListener('click', openColorModal);
            
            // Diğer butonlar
            saveBtn.addEventListener('click', saveCanvas);
            uploadImageHeaderBtn.addEventListener('click', uploadImage);
            
            zoomInBtn.addEventListener('click', zoomIn);
            zoomOutBtn.addEventListener('click', zoomOut);
            resetZoomBtn.addEventListener('click', resetZoom);
            
            helpGuide.addEventListener('click', function() {
                showMessage(
                    translations[appState.currentLanguage].helpTitle,
                    translations[appState.currentLanguage].helpContent,
                    'info'
                );
            });
            
            // Pencere boyutu değiştiğinde canvas'ı yeniden boyutlandır
            window.addEventListener('resize', resizeCanvas);
            
            // Ekran yönü değiştiğinde
            window.addEventListener('orientationchange', function() {
                setTimeout(resizeCanvas, 100);
            });
        }
        
        // Uygulamayı başlat
        function initApp() {
            // Canvas'ı başlat
            resizeCanvas();
            
            // Şekil seçeneklerini oluştur
            createShapeOptions();
            
            // Event listener'ları başlat
            initEventListeners();
            
            // Varsayılan dili ayarla
            changeLanguage('tr');
            
            // Buton durumlarını güncelle
            updateUndoRedoButtons();
            updateToolButtons();
            updateZoom();
            
            // Loading ekranını kaldır
            setTimeout(() => {
                loading.style.display = 'none';
            }, 800);
            
            // Başlangıç bildirimi
            setTimeout(() => {
                showMessage(
                    translations[appState.currentLanguage].welcomeTitle,
                    translations[appState.currentLanguage].welcomeMessage
                );
            }, 1000);
        }
        
        // Uygulamayı yükle
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
