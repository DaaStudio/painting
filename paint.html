<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ArtCanvas - Professional Digital Painting</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --accent-color: #fd79a8;
            --dark-color: #2d3436;
            --light-color: #f9f9f9;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #d63031;
            --header-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
            width: 100%;
            position: relative;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        
        /* Header Styles */
        .header {
            background-color: white;
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            flex-shrink: 0;
            width: 100%;
            position: relative;
            gap: 10px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .logo-icon {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .language-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .language-selector select {
            padding: 6px 10px;
            border-radius: 6px;
            border: 2px solid var(--secondary-color);
            background-color: white;
            color: var(--dark-color);
            font-weight: 500;
            cursor: pointer;
            outline: none;
            font-size: 0.85rem;
        }
        
        .user-actions {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 5px 0;
            flex: 1;
            justify-content: flex-end;
            max-width: 100%;
        }
        
        .user-actions::-webkit-scrollbar {
            display: none;
        }
        
        .btn {
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: max-content;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5b4fd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #8a7efd;
            transform: translateY(-2px);
        }
        
        .btn-accent {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-accent:hover {
            background-color: #fc5d97;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            width: 100%;
            position: relative;
        }
        
        /* Canvas Area */
        .canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            overflow: hidden;
            width: 100%;
        }
        
        .canvas-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .canvas-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .canvas-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .canvas-wrapper {
            flex: 1;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            width: 100%;
            touch-action: none;
        }
        
        #drawingCanvas {
            background-color: white;
            display: block;
            cursor: crosshair;
            touch-action: none;
            max-width: 100%;
            max-height: 100%;
            transform-origin: center center;
        }
        
        /* Canvas üzerindeki kontroller */
        .canvas-overlay-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 8px;
            z-index: 10;
            flex-wrap: wrap;
        }
        
        .overlay-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background-color: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .overlay-btn:hover {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .overlay-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .overlay-btn:disabled:hover {
            background-color: white;
            color: var(--primary-color);
            transform: none;
        }
        
        /* Tuval üzerinde fırça boyutu kontrolü */
        .canvas-brush-controls {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 10;
            width: 200px;
        }
        
        .canvas-brush-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .canvas-brush-slider {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .canvas-brush-value {
            font-size: 0.8rem;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        /* Zoom kontrolleri */
        .zoom-controls {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background-color: white;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 10;
        }
        
        .zoom-btn {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .zoom-btn:hover {
            background-color: #5b4fd8;
            transform: scale(1.05);
        }
        
        .zoom-level {
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        /* Yeni tuval yazısı */
        .canvas-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(0, 0, 0, 0.2);
            font-size: 2.5rem;
            font-weight: bold;
            pointer-events: none;
            user-select: none;
            z-index: 1;
            text-align: center;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            transition: color 0.2s;
        }
        
        .close-modal:hover {
            color: var(--danger-color);
        }
        
        /* Templates Modal */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .template-item {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .template-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .template-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background-color: #f5f5f5;
        }
        
        /* Gallery Modal */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .gallery-item {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            display: flex;
            flex-direction: column;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .gallery-item.selected {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3);
        }
        
        .gallery-img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            background-color: #f5f5f5;
            flex-grow: 1;
        }
        
        .gallery-name {
            padding: 10px;
            text-align: center;
            font-weight: 600;
            background-color: #f8f9fa;
            font-size: 0.85rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .gallery-actions {
            display: flex;
            gap: 8px;
            padding: 8px;
            background-color: #f8f9fa;
        }
        
        .action-btn {
            flex: 1;
            padding: 6px;
            border-radius: 6px;
            border: none;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
        }
        
        .action-btn-download {
            background-color: var(--success-color);
            color: white;
        }
        
        .action-btn-delete {
            background-color: var(--danger-color);
            color: white;
        }
        
        .gallery-bulk-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* Message Modal (Kaydet) */
        .message-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .message-modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            padding: 25px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        .message-modal-icon {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .message-modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark-color);
        }
        
        .message-modal-text {
            font-size: 1rem;
            margin-bottom: 20px;
            color: #555;
            line-height: 1.5;
        }
        
        .message-modal-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .message-modal-input {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }
        
        /* Color Picker Modal */
        .color-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .color-modal-content {
            background-color: white;
            border-radius: 12px;
            width: 100%;
            max-width: 400px;
            padding: 25px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        }
        
        .color-modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .color-modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--dark-color);
            transition: color 0.2s;
        }
        
        .color-modal-close:hover {
            color: var(--danger-color);
        }
        
        .color-modal-palette {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .color-modal-option {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
            border: 3px solid transparent;
        }
        
        .color-modal-option:hover {
            transform: scale(1.1);
        }
        
        .color-modal-option.active {
            border-color: var(--dark-color);
            transform: scale(1.1);
        }
        
        .color-modal-custom {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .color-modal-custom input[type="color"] {
            width: 60px;
            height: 60px;
            border: none;
            background: transparent;
            cursor: pointer;
        }
        
        .color-modal-custom span {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .color-modal-slider {
            margin-top: 20px;
        }
        
        .color-modal-slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .color-modal-slider-label span {
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        /* New Canvas Modal */
        .canvas-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .canvas-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .canvas-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .canvas-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .canvas-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .canvas-option-name {
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }
        
        .canvas-option-desc {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        /* Download Modal */
        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .download-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .download-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .download-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .download-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .download-option-name {
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }
        
        .download-option-desc {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        /* Tools Modal */
        .tools-modal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .tools-modal-option {
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .tools-modal-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .tools-modal-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .tools-modal-option-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .tools-modal-option-name {
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Text Tool Modal */
        .text-tool-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .text-input-container {
            display: flex;
            gap: 10px;
        }
        
        .text-input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
        }
        
        .text-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .text-option {
            padding: 10px;
            border: 2px solid #eee;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .text-option-label {
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        /* Shape Tool Modal */
        .shape-tool-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .shape-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .shape-option {
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
        }
        
        .shape-option:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
        }
        
        .shape-option.active {
            border-color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
        }
        
        .shape-option-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .shape-option-name {
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Drawing View Modal */
        .drawing-view-modal {
            max-width: 800px;
        }
        
        .drawing-view-content {
            text-align: center;
        }
        
        .drawing-view-img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .drawing-view-info {
            text-align: left;
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .drawing-view-info h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .drawing-view-info p {
            margin-bottom: 5px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background-color: var(--success-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 8px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 90%;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification i {
            font-size: 1.2rem;
        }
        
        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            flex-direction: column;
            gap: 15px;
            transition: opacity 0.3s ease;
        }
        
        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Help Guide */
        .help-guide {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        /* Current Tool Indicator */
        .current-tool-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: white;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }
        
        .current-tool-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* Current Color Indicator */
        .current-color-indicator {
            position: absolute;
            top: 60px;
            right: 10px;
            background-color: white;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
        }
        
        .color-preview {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid #ddd;
        }
        
        /* Responsive Tasarım */
        @media (max-width: 1200px) {
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .canvas-overlay-controls {
                top: 8px;
                left: 8px;
            }
            
            .overlay-btn {
                width: 36px;
                height: 36px;
                font-size: 1rem;
            }
            
            .canvas-brush-controls {
                width: 180px;
                bottom: 10px;
                left: 10px;
            }
            
            .zoom-controls {
                bottom: 10px;
                right: 10px;
            }
            
            .zoom-btn {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            
            .canvas-placeholder {
                font-size: 2rem;
            }
            
            .current-tool-indicator,
            .current-color-indicator {
                display: none;
            }
            
            .user-actions {
                gap: 6px;
            }
            
            .btn {
                padding: 8px 10px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 0 8px;
                height: 55px;
                gap: 8px;
            }
            
            .logo-icon {
                font-size: 1.5rem;
            }
            
            .user-actions {
                gap: 4px;
            }
            
            .user-actions .btn span {
                display: none;
            }
            
            .user-actions .btn i {
                margin: 0;
                font-size: 0.9rem;
            }
            
            .btn {
                padding: 8px 10px;
                min-width: 40px;
                justify-content: center;
            }
            
            .language-selector select {
                padding: 5px 8px;
                font-size: 0.8rem;
            }
            
            .language-selector i {
                display: none;
            }
            
            .language-selector span {
                display: none;
            }
            
            .canvas-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .canvas-controls {
                width: 100%;
                justify-content: center;
            }
            
            .canvas-title {
                font-size: 1.2rem;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .template-img {
                height: 100px;
            }
            
            .gallery-img {
                height: 90px;
            }
            
            .modal-content {
                padding: 15px;
            }
            
            .canvas-placeholder {
                font-size: 1.8rem;
            }
            
            .gallery-bulk-actions {
                flex-direction: column;
                align-items: stretch;
            }
            
            .gallery-bulk-actions .btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                height: 50px;
                padding: 0 5px;
            }
            
            .user-actions {
                gap: 3px;
            }
            
            .btn {
                padding: 7px 8px;
                font-size: 0.75rem;
                min-width: 36px;
            }
            
            .language-selector select {
                padding: 4px 6px;
                font-size: 0.75rem;
                width: 50px;
            }
            
            .canvas-container {
                padding: 10px;
            }
            
            .canvas-wrapper {
                border-radius: 8px;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
            }
            
            .template-img {
                height: 80px;
            }
            
            .gallery-img {
                height: 80px;
            }
            
            .gallery-name {
                padding: 8px;
                font-size: 0.8rem;
            }
            
            .gallery-actions {
                flex-direction: column;
                gap: 5px;
            }
            
            .action-btn {
                padding: 5px;
                font-size: 0.7rem;
            }
            
            .message-modal-content {
                padding: 20px 15px;
            }
            
            .message-modal-icon {
                font-size: 3rem;
            }
            
            .message-modal-title {
                font-size: 1.2rem;
            }
            
            .message-modal-text {
                font-size: 0.95rem;
            }
            
            .message-modal-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .message-modal-buttons .btn {
                width: 100%;
                justify-content: center;
            }
            
            .help-guide {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
                bottom: 10px;
            }
            
            .notification {
                padding: 10px 15px;
                font-size: 0.9rem;
                max-width: 95%;
            }
            
            .canvas-placeholder {
                font-size: 1.5rem;
            }
            
            .canvas-overlay-controls {
                top: 5px;
                left: 5px;
            }
            
            .overlay-btn {
                width: 34px;
                height: 34px;
                font-size: 0.9rem;
            }
            
            .canvas-brush-controls {
                width: 160px;
                padding: 8px;
                bottom: 8px;
                left: 8px;
            }
            
            .color-modal-content {
                padding: 20px 15px;
            }
            
            .color-modal-palette {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .color-modal-option {
                width: 40px;
                height: 40px;
            }
        }
        
        @media (max-width: 360px) {
            .header {
                padding: 0 4px;
            }
            
            .user-actions {
                gap: 2px;
            }
            
            .btn {
                padding: 6px 7px;
                font-size: 0.7rem;
                min-width: 34px;
            }
            
            .logo-icon {
                font-size: 1.3rem;
            }
            
            .language-selector select {
                width: 45px;
                padding: 3px 5px;
                font-size: 0.7rem;
            }
            
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            }
            
            .template-img {
                height: 70px;
            }
            
            .gallery-img {
                height: 70px;
            }
            
            .canvas-brush-controls {
                width: 140px;
            }
            
            .color-modal-palette {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 320px) {
            .templates-grid, .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .template-img {
                height: 60px;
            }
            
            .gallery-img {
                height: 60px;
            }
            
            .gallery-name {
                font-size: 0.75rem;
                padding: 6px;
            }
            
            .canvas-placeholder {
                font-size: 1.2rem;
            }
            
            .overlay-btn {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px;
                min-width: 32px;
            }
        }
        
        /* Ekran döndürme için */
        @media (orientation: landscape) and (max-height: 500px) {
            .header {
                height: 50px;
            }
            
            .canvas-wrapper {
                min-height: 200px;
            }
            
            .help-guide {
                bottom: 5px;
            }
        }
        
        /* Yardım modal içeriği için scroll */
        .help-modal-content {
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .help-modal-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .help-modal-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .help-modal-content::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .help-modal-content h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .help-modal-content ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .help-modal-content li {
            margin-bottom: 8px;
        }
        
        .help-modal-content strong {
            color: var(--dark-color);
        }
        
        /* Mobile için header butonlarını sığdırma */
        .header-buttons-container {
            display: flex;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
        }
        
        .header-buttons-container::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <i class="fas fa-globe logo-icon"></i>
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="tr">Türkçe</option>
                        <option value="es">Español</option>
                        <option value="pt">Português</option>
                        <option value="ru">Русский</option>
                        <option value="de">Deutsch</option>
                        <option value="fr">Français</option>
                        <option value="hi">हिन्दी</option>
                        <option value="id">Indonesia</option>
                        <option value="ja">日本語</option>
                        <option value="ko">한국어</option>
                        <option value="ar">العربية</option>
                        <option value="it">Italiano</option>
                        <option value="pl">Polski</option>
                        <option value="th">ไทย</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="zh">中文</option>
                        <option value="nl">Nederlands</option>
                        <option value="uk">Українська</option>
                    </select>
                </div>
            </div>
            
            <div class="user-actions">
                <button class="btn btn-outline" id="uploadImageHeaderBtn" title="Upload Image">
                    <i class="fas fa-upload"></i>
                    <span>Upload</span>
                </button>
                <button class="btn btn-outline" id="newCanvasHeaderBtn" title="New Canvas">
                    <i class="fas fa-plus"></i>
                    <span>New</span>
                </button>
                <button class="btn btn-primary" id="saveBtn" title="Save">
                    <i class="fas fa-save"></i>
                    <span>Save</span>
                </button>
                <button class="btn btn-secondary" id="templatesBtn" title="Templates">
                    <i class="fas fa-layer-group"></i>
                    <span>Templates</span>
                </button>
                <button class="btn btn-accent" id="galleryBtn" title="Gallery">
                    <i class="fas fa-images"></i>
                    <span>Gallery</span>
                </button>
                <button class="btn btn-primary" id="downloadHeaderBtn">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Canvas Area -->
            <main class="canvas-container">
                <div class="canvas-header">
                    <div class="canvas-controls">
                        <!-- Boş alan, daha önce indir butonu buradaydı -->
                    </div>
                </div>
                
                <div class="canvas-wrapper">
                    <canvas id="drawingCanvas"></canvas>
                    
                    <!-- Yeni tuval yazısı -->
                    <div class="canvas-placeholder" id="canvasPlaceholder">
                        New Canvas
                    </div>
                    
                    <!-- Tuval üzerinde kontroller -->
                    <div class="canvas-overlay-controls">
                        <button class="overlay-btn" id="undoOverlayBtn" title="Undo">
                            <i class="fas fa-undo"></i>
                        </button>
                        <button class="overlay-btn" id="redoOverlayBtn" title="Redo" disabled>
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="overlay-btn" id="eraserOverlayBtn" title="Eraser">
                            <i class="fas fa-eraser"></i>
                        </button>
                        <button class="overlay-btn" id="clearOverlayBtn" title="Clear">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="overlay-btn" id="colorOverlayBtn" title="Color">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="overlay-btn" id="brushOverlayBtn" title="Tools">
                            <i class="fas fa-paint-brush"></i>
                        </button>
                    </div>
                    
                    <!-- Mevcut araç göstergesi -->
                    <div class="current-tool-indicator" id="currentToolIndicator">
                        <i class="fas fa-paint-brush"></i>
                        <span class="current-tool-name" id="currentToolName">Brush</span>
                    </div>
                    
                    <!-- Mevcut renk göstergesi -->
                    <div class="current-color-indicator" id="currentColorIndicator">
                        <div class="color-preview" id="currentColorPreview" style="background-color: #6c5ce7;"></div>
                        <span class="current-tool-name">Color</span>
                    </div>
                    
                    <!-- Tuval üzerinde fırça boyutu kontrolü -->
                    <div class="canvas-brush-controls">
                        <div class="canvas-brush-title">
                            <i class="fas fa-paint-brush"></i>
                            <span>Brush Size</span>
                        </div>
                        <div class="canvas-brush-slider">
                            <input type="range" id="canvasBrushSize" min="1" max="50" value="10">
                            <span class="canvas-brush-value" id="canvasBrushSizeValue">10px</span>
                        </div>
                    </div>
                    
                    <!-- Zoom kontrolleri -->
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomInBtn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <div class="zoom-level" id="zoomLevel">%100</div>
                        <button class="zoom-btn" id="zoomOutBtn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button class="zoom-btn" id="resetZoomBtn">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Templates Modal -->
    <div class="modal" id="templatesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Coloring Templates</h3>
                <button class="close-modal" id="closeTemplatesModal">&times;</button>
            </div>
            <div class="templates-grid" id="templatesGrid">
                <!-- Templates will be added by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Gallery Modal -->
    <div class="modal" id="galleryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Saved Drawings</h3>
                <button class="close-modal" id="closeGalleryModal">&times;</button>
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <!-- Gallery items will be added by JavaScript -->
            </div>
            <div class="gallery-bulk-actions">
                <button class="btn btn-outline" id="selectAllBtn">
                    <i class="fas fa-check-square"></i>
                    <span>Select All</span>
                </button>
                <button class="btn btn-danger" id="deleteSelectedBtn">
                    <i class="fas fa-trash-alt"></i>
                    <span>Delete Selected</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Save Modal -->
    <div class="message-modal" id="saveModal">
        <div class="message-modal-content">
            <div class="modal-header" style="margin-bottom: 15px;">
                <h3 class="modal-title">Save Drawing</h3>
                <button class="close-modal" id="closeSaveModal">&times;</button>
            </div>
            <p class="message-modal-text">Enter a name for your drawing:</p>
            <input type="text" id="saveInput" class="message-modal-input" placeholder="Drawing name">
            <div class="message-modal-buttons" style="margin-top: 20px;">
                <button class="btn btn-primary" id="saveModalOkBtn">Save</button>
                <button class="btn btn-outline" id="saveModalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Color Picker Modal -->
    <div class="color-modal" id="colorModal">
        <div class="color-modal-content">
            <div class="color-modal-title">
                <span>Select Color</span>
                <button class="color-modal-close" id="closeColorModal">&times;</button>
            </div>
            <div class="color-modal-palette" id="colorModalPalette">
                <!-- Color options will be added by JavaScript -->
            </div>
            <div class="color-modal-custom">
                <input type="color" id="colorModalPicker" value="#6c5ce7">
                <span>Custom Color</span>
            </div>
            <div class="color-modal-slider">
                <div class="color-modal-slider-label">
                    <span>Transparency</span>
                    <span id="colorModalOpacityValue">100%</span>
                </div>
                <input type="range" id="colorModalOpacity" min="1" max="100" value="100">
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="colorModalOkBtn">OK</button>
            </div>
        </div>
    </div>
    
    <!-- New Canvas Modal -->
    <div class="modal" id="newCanvasModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Select New Canvas</h3>
                <button class="close-modal" id="closeNewCanvasModal">&times;</button>
            </div>
            <div class="canvas-options-grid" id="canvasOptionsGrid">
                <!-- Canvas options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="newCanvasModalOkBtn">Create</button>
                <button class="btn btn-outline" id="newCanvasModalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Select Download Format</h3>
                <button class="close-modal" id="closeDownloadModal">&times;</button>
            </div>
            <div class="download-options" id="downloadOptions">
                <!-- Download options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="downloadModalOkBtn">Download</button>
                <button class="btn btn-outline" id="downloadModalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Tools Modal -->
    <div class="modal" id="toolsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Drawing Tools</h3>
                <button class="close-modal" id="closeToolsModal">&times;</button>
            </div>
            <div class="tools-modal-grid" id="toolsModalGrid">
                <!-- Tool options will be added by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" id="toolsModalOkBtn">OK</button>
                <button class="btn btn-outline" id="toolsModalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Text Tool Modal -->
    <div class="modal" id="textToolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Text</h3>
                <button class="close-modal" id="closeTextToolModal">&times;</button>
            </div>
            <div class="text-tool-container">
                <div class="text-input-container">
                    <input type="text" id="textInput" class="text-input" placeholder="Enter text...">
                    <button class="btn btn-primary" id="addTextBtn">Add</button>
                </div>
                <div class="text-options">
                    <div class="text-option">
                        <span class="text-option-label">Font</span>
                        <select id="textFont" class="text-input">
                            <option value="Arial">Arial</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Comic Sans MS">Comic Sans MS</option>
                        </select>
                    </div>
                    <div class="text-option">
                        <span class="text-option-label">Size</span>
                        <input type="range" id="textSize" min="10" max="72" value="24">
                        <span id="textSizeValue">24px</span>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-outline" id="textToolCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Shape Tool Modal -->
    <div class="modal" id="shapeToolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Shape</h3>
                <button class="close-modal" id="closeShapeToolModal">&times;</button>
            </div>
            <div class="shape-tool-container">
                <div class="shape-options" id="shapeOptions">
                    <!-- Shape options will be added by JavaScript -->
                </div>
                <div class="text-options">
                    <div class="text-option">
                        <span class="text-option-label">Fill Color</span>
                        <input type="color" id="shapeFillColor" value="#6c5ce7">
                    </div>
                    <div class="text-option">
                        <span class="text-option-label">Border Color</span>
                        <input type="color" id="shapeStrokeColor" value="#000000">
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-outline" id="shapeToolCancelBtn">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Drawing View Modal -->
    <div class="modal drawing-view-modal" id="drawingViewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Drawing Details</h3>
                <button class="close-modal" id="closeDrawingViewModal">&times;</button>
            </div>
            <div class="drawing-view-content" id="drawingViewContent">
                <!-- Drawing view content will be added by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Message Modal (Genel Mesajlar) -->
    <div class="message-modal" id="messageModal">
        <div class="message-modal-content">
            <div class="message-modal-icon" id="messageModalIcon">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3 class="message-modal-title" id="messageModalTitle">Title</h3>
            <p class="message-modal-text" id="messageModalText">Message content...</p>
            <div class="message-modal-buttons">
                <button class="btn btn-primary" id="messageModalOkBtn">OK</button>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="helpModalTitle">ArtCanvas User Guide</h3>
                <button class="close-modal" id="closeHelpModal">&times;</button>
            </div>
            <div class="help-modal-content" id="helpModalContent">
                <!-- Help content will be added by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Confirm Modal -->
    <div class="message-modal" id="confirmModal">
        <div class="message-modal-content">
            <div class="message-modal-icon" id="confirmModalIcon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h3 class="message-modal-title" id="confirmModalTitle">Title</h3>
            <p class="message-modal-text" id="confirmModalText">Message content...</p>
            <div class="message-modal-buttons">
                <button class="btn btn-primary" id="confirmModalYesBtn">Yes</button>
                <button class="btn btn-outline" id="confirmModalNoBtn">No</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Your drawing has been saved!</span>
    </div>
    
    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>
    
    <!-- Help Guide -->
    <div class="help-guide" id="helpGuide">
        <i class="fas fa-question"></i>
    </div>
    
    <script>
        // Dil desteği için metinler - 20 dil (tam çeviri)
        const translations = {
            en: {
                canvasTitle: "New Canvas",
                save: "Save",
                templates: "Templates",
                gallery: "Gallery",
                brush: "Brush",
                pencil: "Pencil",
                eraser: "Eraser",
                watercolor: "Watercolor",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Fill",
                shape: "Shape",
                text: "Text",
                uploadImage: "Upload Image",
                clear: "Clear",
                undo: "Undo",
                redo: "Redo",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "New Canvas",
                download: "Download",
                share: "Share",
                savedNotification: "Your drawing has been saved!",
                loadedNotification: "Template loaded!",
                exportedNotification: "Your drawing has been exported!",
                emptyGallery: "You don't have any saved drawings yet.",
                confirmDelete: "Are you sure you want to delete this drawing?",
                confirmDeleteMultiple: "Are you sure you want to delete {count} selected drawings?",
                newCanvasConfirm: "Are you sure you want to create a new canvas? Your current work will not be saved.",
                clearCanvasConfirm: "Are you sure you want to clear the canvas?",
                helpTitle: "ArtCanvas User Guide",
                helpContent: `
                    <h3>Welcome to ArtCanvas!</h3>
                    <p>Enjoy digital painting with ArtCanvas. All controls are on the canvas and top menu.</p>
                    <ul>
                        <li><strong>Canvas Controls (Top Left Corner):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Undo: Undo last action</li>
                                <li><i class="fas fa-redo"></i> Redo: Redo undone action</li>
                                <li><i class="fas fa-eraser"></i> Eraser: Erase drawing (makes transparent)</li>
                                <li><i class="fas fa-trash-alt"></i> Clear: Clear entire canvas</li>
                                <li><i class="fas fa-palette"></i> Color Select: Open color palette</li>
                                <li><i class="fas fa-paint-brush"></i> Tools: Open drawing tools</li>
                            </ul>
                        </li>
                        <li><strong>Top Menu:</strong>
                            <ul>
                                <li>Upload Image: Upload image from your computer</li>
                                <li>New Canvas: Create new blank canvas</li>
                                <li>Save: Save your drawing</li>
                                <li>Templates: Choose from ready templates</li>
                                <li>Gallery: View your saved drawings</li>
                                <li>Download: Download your drawing as PNG/JPG</li>
                            </ul>
                        </li>
                        <li><strong>Other Canvas Controls:</strong>
                            <ul>
                                <li>Bottom Left Corner: Brush size adjustment</li>
                                <li>Bottom Right Corner: Zoom in/out</li>
                                <li>Top Right Corner: Current tool and color information</li>
                            </ul>
                        </li>
                        <li><strong>Drawing Tools:</strong> Click the tools button to access brush, pencil, watercolor, pastel, spray, fill, text and shape tools.</li>
                        <li><strong>Color Selection:</strong> Click the color select button to open the color palette, choose custom colors and adjust transparency.</li>
                        <li><strong>Brush Size:</strong> Adjust brush size with the slider at bottom left corner.</li>
                        <li><strong>Zoom In/Out:</strong> Use buttons at bottom right corner to zoom the canvas.</li>
                        <li><strong>Templates:</strong> Select from pre-made templates to start quickly.</li>
                        <li><strong>Undo/Redo:</strong> Use buttons at top left corner of the canvas to undo or redo your actions.</li>
                    </ul>
                    <p>Have fun and enjoy artistic moments!</p>
                `,
                selectAll: "Select All",
                deleteSelected: "Delete Selected",
                noDrawingsSelected: "No drawings selected.",
                templateLoadError: "Error loading template. Please select another template.",
                brushSize: "Brush Size",
                colorPicker: "Color Picker",
                transparency: "Transparency",
                tools: "Tools",
                ok: "OK",
                cancel: "Cancel",
                create: "Create",
                blankCanvas: "Blank Canvas",
                gridCanvas: "Grid Canvas",
                linedCanvas: "Lined Canvas",
                coloredCanvas: "Colored Canvas",
                canvasBlankDesc: "White blank canvas",
                canvasGridDesc: "Grid paper view",
                canvasLinedDesc: "Lined paper view",
                canvasColoredDesc: "Canvas in selected color",
                formatPNG: "PNG Format",
                formatJPG: "JPG Format",
                formatPNGDesc: "High quality image",
                formatJPGDesc: "Smaller file size",
                shapeCircle: "Circle",
                shapeSquare: "Square",
                shapeTriangle: "Triangle",
                shapeRectangle: "Rectangle",
                shapeStar: "Star",
                shapeHeart: "Heart",
                drawingName: "Drawing Name",
                drawingDate: "Save Date",
                viewDrawing: "View Drawing",
                welcomeTitle: "Welcome to ArtCanvas!",
                welcomeMessage: "Enjoy digital painting with ArtCanvas. All controls are on the canvas. Start drawing using the tools at the top left corner. From the top menu, you can create a new canvas, upload images, use templates, save your drawings and view them from the gallery. Have fun!",
                loading: "Loading..."
            },
            tr: {
                canvasTitle: "Yeni Tuval",
                save: "Kaydet",
                templates: "Şablonlar",
                gallery: "Galeri",
                brush: "Fırça",
                pencil: "Kalem",
                eraser: "Silgi",
                watercolor: "Sulu Boya",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Dolgu",
                shape: "Şekil",
                text: "Metin",
                uploadImage: "Resim Yükle",
                clear: "Temizle",
                undo: "Geri Al",
                redo: "İleri Al",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Yeni Tuval",
                download: "İndir",
                share: "Paylaş",
                savedNotification: "Çiziminiz kaydedildi!",
                loadedNotification: "Şablon yüklendi!",
                exportedNotification: "Çiziminiz dışa aktarıldı!",
                emptyGallery: "Henüz kayıtlı çiziminiz yok.",
                confirmDelete: "Bu çizimi silmek istediğinize emin misiniz?",
                confirmDeleteMultiple: "Seçili {count} çizimi silmek istediğinize emin misiniz?",
                newCanvasConfirm: "Yeni tuval oluşturmak istediğinize emin misiniz? Mevcut çalışmanız kaydedilmeyecektir.",
                clearCanvasConfirm: "Tuvali temizlemek istediğinize emin misiniz?",
                helpTitle: "ArtCanvas Kullanım Kılavuzu",
                helpContent: `
                    <h3>ArtCanvas'a Hoş Geldiniz!</h3>
                    <p>ArtCanvas ile dijital boyama yapmanın keyfini çıkarın. Tüm kontroller tuval üzerinde ve üst menüdedir.</p>
                    <ul>
                        <li><strong>Tuval Üzerindeki Kontroller (Sol Üst Köşe):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Geri Al: Son işlemi geri alır</li>
                                <li><i class="fas fa-redo"></i> İleri Al: Geri alınan işlemi tekrar uygular</li>
                                <li><i class="fas fa-eraser"></i> Silgi: Çizimi siler (şeffaf yapar)</li>
                                <li><i class="fas fa-trash-alt"></i> Temizle: Tüm tuvali temizler</li>
                                <li><i class="fas fa-palette"></i> Renk Seç: Renk paletini açar</li>
                                <li><i class="fas fa-paint-brush"></i> Araçlar: Çizim araçlarını açar</li>
                            </ul>
                        </li>
                        <li><strong>Üst Menü:</strong>
                            <ul>
                                <li>Resim Yükle: Bilgisayarınızdan resim yükleyin</li>
                                <li>Yeni Tuval: Yeni boş tuval oluşturun</li>
                                <li>Kaydet: Çiziminizi kaydedin</li>
                                <li>Şablon: Hazır şablonlardan seçin</li>
                                <li>Galeri: Kayıtlı çizimlerinizi görüntüleyin</li>
                                <li>İndir: Çiziminizi PNG/JPG olarak indirin</li>
                            </ul>
                        </li>
                        <li><strong>Tuval Üzerindeki Diğer Kontroller:</strong>
                            <ul>
                                <li>Sol Alt Köşe: Fırça boyutu ayarı</li>
                                <li>Sağ Alt Köşe: Yakınlaştırma/Uzaklaştırma</li>
                                <li>Sağ Üst Köşe: Mevcut araç ve renk bilgisi</li>
                            </ul>
                        </li>
                        <li><strong>Çizim Araçları:</strong> Araçlar butonuna tıklayarak fırça, kalem, sulu boya, pastel, spray, dolgu, metin ve şekil araçlarına erişebilirsiniz.</li>
                        <li><strong>Renk Seçimi:</strong> Renk seç butonuna tıklayarak renk paletini açabilir, özel renk seçebilir ve şeffaflık ayarı yapabilirsiniz.</li>
                        <li><strong>Fırça Boyutu:</strong> Sol alt köşedeki kaydırıcı ile fırça boyutunu ayarlayabilirsiniz.</li>
                        <li><strong>Yakınlaştırma/Uzaklaştırma:</strong> Sağ alt köşedeki düğmelerle tuvali yakınlaştırıp uzaklaştırabilirsiniz.</li>
                        <li><strong>Şablonlar:</strong> Önceden hazırlanmış şablonlardan birini seçerek hızlıca başlayabilirsiniz.</li>
                        <li><strong>Geri Al/İleri Al:</strong> Tuvalin sol üst köşesindeki düğmelerle işlemlerinizi geri alabilir veya ileri alabilirsiniz.</li>
                    </ul>
                    <p>İyi eğlenceler ve sanat dolu anlar!</p>
                `,
                selectAll: "Tümünü Seç",
                deleteSelected: "Seçilenleri Sil",
                noDrawingsSelected: "Hiç çizim seçilmedi.",
                templateLoadError: "Şablon yüklenirken bir hata oluştu. Lütfen başka bir şablon seçin.",
                brushSize: "Fırça Boyutu",
                colorPicker: "Renk Seç",
                transparency: "Şeffaflık",
                tools: "Araçlar",
                ok: "Tamam",
                cancel: "İptal",
                create: "Oluştur",
                blankCanvas: "Boş Tuval",
                gridCanvas: "Kareli Tuval",
                linedCanvas: "Çizgili Tuval",
                coloredCanvas: "Renkli Tuval",
                canvasBlankDesc: "Beyaz boş tuval",
                canvasGridDesc: "Kareli kağıt görünümü",
                canvasLinedDesc: "Çizgili kağıt görünümü",
                canvasColoredDesc: "Seçtiğiniz renkte tuval",
                formatPNG: "PNG Formatı",
                formatJPG: "JPG Formatı",
                formatPNGDesc: "Yüksek kaliteli görüntü",
                formatJPGDesc: "Daha küçük dosya boyutu",
                shapeCircle: "Daire",
                shapeSquare: "Kare",
                shapeTriangle: "Üçgen",
                shapeRectangle: "Dikdörtgen",
                shapeStar: "Yıldız",
                shapeHeart: "Kalp",
                drawingName: "Çizim Adı",
                drawingDate: "Kayıt Tarihi",
                viewDrawing: "Çizimi Görüntüle",
                welcomeTitle: "ArtCanvas'a Hoş Geldiniz!",
                welcomeMessage: "ArtCanvas ile dijital boyama yapmanın keyfini çıkarın. Tüm kontroller tuval üzerindedir. Sol üst köşedeki araçları kullanarak çizim yapmaya başlayın. Üst menüden yeni tuval oluşturabilir, resim yükleyebilir, şablonları kullanabilir, çizimlerinizi kaydedip galeriden görüntüleyebilirsiniz. İyi eğlenceler!",
                loading: "Yükleniyor..."
            },
            es: {
                canvasTitle: "Nuevo Lienzo",
                save: "Guardar",
                templates: "Plantillas",
                gallery: "Galería",
                brush: "Pincel",
                pencil: "Lápiz",
                eraser: "Borrador",
                watercolor: "Acuarela",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Relleno",
                shape: "Forma",
                text: "Texto",
                uploadImage: "Subir Imagen",
                clear: "Limpiar",
                undo: "Deshacer",
                redo: "Rehacer",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Nuevo Lienzo",
                download: "Descargar",
                share: "Compartir",
                savedNotification: "¡Tu dibujo ha sido guardado!",
                loadedNotification: "¡Plantilla cargada!",
                exportedNotification: "¡Tu dibujo ha sido exportado!",
                emptyGallery: "Aún no tienes dibujos guardados.",
                confirmDelete: "¿Estás seguro de que quieres eliminar este dibujo?",
                confirmDeleteMultiple: "¿Estás seguro de que quieres eliminar {count} dibujos seleccionados?",
                newCanvasConfirm: "¿Estás seguro de que quieres crear un nuevo lienzo? Tu trabajo actual no se guardará.",
                clearCanvasConfirm: "¿Estás seguro de que quieres limpiar el lienzo?",
                helpTitle: "Guía de Usuario de ArtCanvas",
                helpContent: `
                    <h3>¡Bienvenido a ArtCanvas!</h3>
                    <p>Disfruta de la pintura digital con ArtCanvas. Todos los controles están en el lienzo y el menú superior.</p>
                    <ul>
                        <li><strong>Controles del Lienzo (Esquina Superior Izquierda):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Deshacer: Deshace la última acción</li>
                                <li><i class="fas fa-redo"></i> Rehacer: Rehace la acción deshecha</li>
                                <li><i class="fas fa-eraser"></i> Borrador: Borra el dibujo (lo hace transparente)</li>
                                <li><i class="fas fa-trash-alt"></i> Limpiar: Limpia todo el lienzo</li>
                                <li><i class="fas fa-palette"></i> Seleccionar Color: Abre la paleta de colores</li>
                                <li><i class="fas fa-paint-brush"></i> Herramientas: Abre las herramientas de dibujo</li>
                            </ul>
                        </li>
                        <li><strong>Menú Superior:</strong>
                            <ul>
                                <li>Subir Imagen: Sube una imagen desde tu computadora</li>
                                <li>Nuevo Lienzo: Crea un nuevo lienzo en blanco</li>
                                <li>Guardar: Guarda tu dibujo</li>
                                <li>Plantillas: Elige entre plantillas listas</li>
                                <li>Galería: Ve tus dibujos guardados</li>
                                <li>Descargar: Descarga tu dibujo como PNG/JPG</li>
                            </ul>
                        </li>
                        <li><strong>Otros Controles del Lienzo:</strong>
                            <ul>
                                <li>Esquina Inferior Izquierda: Ajuste del tamaño del pincel</li>
                                <li>Esquina Inferior Derecha: Acercar/Alejar</li>
                                <li>Esquina Superior Derecha: Información de herramienta y color actual</li>
                            </ul>
                        </li>
                        <li><strong>Herramientas de Dibujo:</strong> Haz clic en el botón de herramientas para acceder a pincel, lápiz, acuarela, pastel, spray, relleno, texto y herramientas de forma.</li>
                        <li><strong>Selección de Color:</strong> Haz clic en el botón de selección de color para abrir la paleta de colores, elegir colores personalizados y ajustar la transparencia.</li>
                        <li><strong>Tamaño del Pincel:</strong> Ajusta el tamaño del pincel con el deslizador en la esquina inferior izquierda.</li>
                        <li><strong>Acercar/Alejar:</strong> Usa los botones en la esquina inferior derecha para acercar o alejar el lienzo.</li>
                        <li><strong>Plantillas:</strong> Selecciona entre plantillas predefinidas para comenzar rápidamente.</li>
                        <li><strong>Deshacer/Rehacer:</strong> Usa los botones en la esquina superior izquierda del lienzo para deshacer o rehacer tus acciones.</li>
                    </ul>
                    <p>¡Diviértete y disfruta de momentos artísticos!</p>
                `,
                selectAll: "Seleccionar Todo",
                deleteSelected: "Eliminar Seleccionados",
                noDrawingsSelected: "No hay dibujos seleccionados.",
                templateLoadError: "Error al cargar la plantilla. Por favor selecciona otra plantilla.",
                brushSize: "Tamaño del Pincel",
                colorPicker: "Selector de Color",
                transparency: "Transparencia",
                tools: "Herramientas",
                ok: "OK",
                cancel: "Cancelar",
                create: "Crear",
                blankCanvas: "Lienzo en Blanco",
                gridCanvas: "Lienzo con Cuadrícula",
                linedCanvas: "Lienzo con Líneas",
                coloredCanvas: "Lienzo de Color",
                canvasBlankDesc: "Lienzo blanco en blanco",
                canvasGridDesc: "Vista de papel cuadriculado",
                canvasLinedDesc: "Vista de papel rayado",
                canvasColoredDesc: "Lienzo en color seleccionado",
                formatPNG: "Formato PNG",
                formatJPG: "Formato JPG",
                formatPNGDesc: "Imagen de alta calidad",
                formatJPGDesc: "Tamaño de archivo más pequeño",
                shapeCircle: "Círculo",
                shapeSquare: "Cuadrado",
                shapeTriangle: "Triángulo",
                shapeRectangle: "Rectángulo",
                shapeStar: "Estrella",
                shapeHeart: "Corazón",
                drawingName: "Nombre del Dibujo",
                drawingDate: "Fecha de Guardado",
                viewDrawing: "Ver Dibujo",
                welcomeTitle: "¡Bienvenido a ArtCanvas!",
                welcomeMessage: "Disfruta de la pintura digital con ArtCanvas. Todos los controles están en el lienzo. Comienza a dibujar usando las herramientas en la esquina superior izquierda. Desde el menú superior, puedes crear un nuevo lienzo, subir imágenes, usar plantillas, guardar tus dibujos y verlos desde la galería. ¡Diviértete!",
                loading: "Cargando..."
            },
            de: {
                canvasTitle: "Neue Leinwand",
                save: "Speichern",
                templates: "Vorlagen",
                gallery: "Galerie",
                brush: "Pinsel",
                pencil: "Bleistift",
                eraser: "Radiergummi",
                watercolor: "Aquarell",
                pastel: "Pastell",
                spray: "Spray",
                fill: "Füllen",
                shape: "Form",
                text: "Text",
                uploadImage: "Bild hochladen",
                clear: "Löschen",
                undo: "Rückgängig",
                redo: "Wiederholen",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Neue Leinwand",
                download: "Herunterladen",
                share: "Teilen",
                savedNotification: "Ihre Zeichnung wurde gespeichert!",
                loadedNotification: "Vorlage geladen!",
                exportedNotification: "Ihre Zeichnung wurde exportiert!",
                emptyGallery: "Sie haben noch keine gespeicherten Zeichnungen.",
                confirmDelete: "Sind Sie sicher, dass Sie diese Zeichnung löschen möchten?",
                confirmDeleteMultiple: "Sind Sie sicher, dass Sie {count} ausgewählte Zeichnungen löschen möchten?",
                newCanvasConfirm: "Sind Sie sicher, dass Sie eine neue Leinwand erstellen möchten? Ihre aktuelle Arbeit wird nicht gespeichert.",
                clearCanvasConfirm: "Sind Sie sicher, dass Sie die Leinwand löschen möchten?",
                helpTitle: "ArtCanvas Benutzerhandbuch",
                helpContent: `
                    <h3>Willkommen bei ArtCanvas!</h3>
                    <p>Genießen Sie digitales Malen mit ArtCanvas. Alle Steuerelemente befinden sich auf der Leinwand und im oberen Menü.</p>
                    <ul>
                        <li><strong>Leinwandsteuerung (Obere linke Ecke):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Rückgängig: Macht die letzte Aktion rückgängig</li>
                                <li><i class="fas fa-redo"></i> Wiederholen: Wiederholt die rückgängig gemachte Aktion</li>
                                <li><i class="fas fa-eraser"></i> Radiergummi: Löscht die Zeichnung (macht sie transparent)</li>
                                <li><i class="fas fa-trash-alt"></i> Löschen: Löscht die gesamte Leinwand</li>
                                <li><i class="fas fa-palette"></i> Farbe wählen: Öffnet die Farbpalette</li>
                                <li><i class="fas fa-paint-brush"></i> Werkzeuge: Öffnet die Zeichenwerkzeuge</li>
                            </ul>
                        </li>
                        <li><strong>Oberes Menü:</strong>
                            <ul>
                                <li>Bild hochladen: Bild von Ihrem Computer hochladen</li>
                                <li>Neue Leinwand: Neue leere Leinwand erstellen</li>
                                <li>Speichern: Ihre Zeichnung speichern</li>
                                <li>Vorlagen: Wählen Sie aus fertigen Vorlagen</li>
                                <li>Galerie: Zeigen Sie Ihre gespeicherten Zeichnungen an</li>
                                <li>Herunterladen: Laden Sie Ihre Zeichnung als PNG/JPG herunter</li>
                            </ul>
                        </li>
                        <li><strong>Andere Leinwandsteuerungen:</strong>
                            <ul>
                                <li>Untere linke Ecke: Pinselgröße einstellen</li>
                                <li>Untere rechte Ecke: Hinein-/Herauszoomen</li>
                                <li>Obere rechte Ecke: Aktuelles Werkzeug und Farbinformationen</li>
                            </ul>
                        </li>
                        <li><strong>Zeichenwerkzeuge:</strong> Klicken Sie auf die Werkzeugschaltfläche, um auf Pinsel, Bleistift, Aquarell, Pastell, Spray, Füllen, Text und Formwerkzeuge zuzugreifen.</li>
                        <li><strong>Farbauswahl:</strong> Klicken Sie auf die Farbschaltfläche, um die Farbpalette zu öffnen, benutzerdefinierte Farben auszuwählen und die Transparenz einzustellen.</li>
                        <li><strong>Pinselgröße:</strong> Passen Sie die Pinselgröße mit dem Schieberegler in der unteren linken Ecke an.</li>
                        <li><strong>Hinein-/Herauszoomen:</strong> Verwenden Sie die Schaltflächen in der unteren rechte Ecke, um die Leinwand zu vergrößern oder zu verkleinern.</li>
                        <li><strong>Vorlagen:</strong> Wählen Sie aus vorgefertigten Vorlagen, um schnell zu starten.</li>
                        <li><strong>Rückgängig/Wiederholen:</strong> Verwenden Sie die Schaltflächen in der oberen linken Ecke der Leinwand, um Ihre Aktionen rückgängig zu machen oder zu wiederholen.</li>
                    </ul>
                    <p>Viel Spaß und genießen Sie künstlerische Momente!</p>
                `,
                selectAll: "Alle auswählen",
                deleteSelected: "Ausgewählte löschen",
                noDrawingsSelected: "Keine Zeichnungen ausgewählt.",
                templateLoadError: "Fehler beim Laden der Vorlage. Bitte wählen Sie eine andere Vorlage.",
                brushSize: "Pinselgröße",
                colorPicker: "Farbauswahl",
                transparency: "Transparenz",
                tools: "Werkzeuge",
                ok: "OK",
                cancel: "Abbrechen",
                create: "Erstellen",
                blankCanvas: "Leere Leinwand",
                gridCanvas: "Gitternetz-Leinwand",
                linedCanvas: "Liniert Leinwand",
                coloredCanvas: "Farbige Leinwand",
                canvasBlankDesc: "Weiße leere Leinwand",
                canvasGridDesc: "Gitternetzpapier-Ansicht",
                canvasLinedDesc: "Liniertes Papier-Ansicht",
                canvasColoredDesc: "Leinwand in gewählter Farbe",
                formatPNG: "PNG-Format",
                formatJPG: "JPG-Format",
                formatPNGDesc: "Hohe Bildqualität",
                formatJPGDesc: "Kleinere Dateigröße",
                shapeCircle: "Kreis",
                shapeSquare: "Quadrat",
                shapeTriangle: "Dreieck",
                shapeRectangle: "Rechteck",
                shapeStar: "Stern",
                shapeHeart: "Herz",
                drawingName: "Zeichnungsname",
                drawingDate: "Speicherdatum",
                viewDrawing: "Zeichnung ansehen",
                welcomeTitle: "Willkommen bei ArtCanvas!",
                welcomeMessage: "Genießen Sie digitales Malen mit ArtCanvas. Alle Steuerelemente befinden sich auf der Leinwand. Beginnen Sie mit dem Zeichnen mit den Werkzeugen in der oberen linken Ecke. Im oberen Menü können Sie eine neue Leinwand erstellen, Bilder hochladen, Vorlagen verwenden, Ihre Zeichnungen speichern und sie aus der Galerie ansehen. Viel Spaß!",
                loading: "Laden..."
            },
            fr: {
                canvasTitle: "Nouvelle Toile",
                save: "Enregistrer",
                templates: "Modèles",
                gallery: "Galerie",
                brush: "Pinceau",
                pencil: "Crayon",
                eraser: "Gomme",
                watercolor: "Aquarelle",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Remplir",
                shape: "Forme",
                text: "Texte",
                uploadImage: "Télécharger Image",
                clear: "Effacer",
                undo: "Annuler",
                redo: "Rétablir",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Nouvelle Toile",
                download: "Télécharger",
                share: "Partager",
                savedNotification: "Votre dessin a été enregistré!",
                loadedNotification: "Modèle chargé!",
                exportedNotification: "Votre dessin a été exporté!",
                emptyGallery: "Vous n'avez pas encore de dessins enregistrés.",
                confirmDelete: "Êtes-vous sûr de vouloir supprimer ce dessin?",
                confirmDeleteMultiple: "Êtes-vous sûr de vouloir supprimer {count} dessins sélectionnés?",
                newCanvasConfirm: "Êtes-vous sûr de vouloir créer une nouvelle toile? Votre travail actuel ne sera pas enregistré.",
                clearCanvasConfirm: "Êtes-vous sûr de vouloir effacer la toile?",
                helpTitle: "Guide Utilisateur ArtCanvas",
                helpContent: `
                    <h3>Bienvenue sur ArtCanvas!</h3>
                    <p>Profitez de la peinture numérique avec ArtCanvas. Tous les contrôles sont sur la toile et le menu supérieur.</p>
                    <ul>
                        <li><strong>Contrôles de la Toile (Coin supérieur gauche):</strong>
                            <ul>
                                <li><i class="fas fa-undo"></i> Annuler: Annule la dernière action</li>
                                <li><i class="fas fa-redo"></i> Rétablir: Rétablit l'action annulée</li>
                                <li><i class="fas fa-eraser"></i> Gomme: Efface le dessin (le rend transparent)</li>
                                <li><i class="fas fa-trash-alt"></i> Effacer: Efface toute la toile</li>
                                <li><i class="fas fa-palette"></i> Sélection Couleur: Ouvre la palette de couleurs</li>
                                <li><i class="fas fa-paint-brush"></i> Outils: Ouvre les outils de dessin</li>
                            </ul>
                        </li>
                        <li><strong>Menu Supérieur:</strong>
                            <ul>
                                <li>Télécharger Image: Téléchargez une image depuis votre ordinateur</li>
                                <li>Nouvelle Toile: Créez une nouvelle toile vierge</li>
                                <li>Enregistrer: Enregistrez votre dessin</li>
                                <li>Modèles: Choisissez parmi des modèles prêts</li>
                                <li>Galerie: Voir vos dessins enregistrés</li>
                                <li>Télécharger: Téléchargez votre dessin en PNG/JPG</li>
                            </ul>
                        </li>
                        <li><strong>Autres Contrôles de la Toile:</strong>
                            <ul>
                                <li>Coin inférieur gauche: Ajustement de la taille du pinceau</li>
                                <li>Coin inférieur droit: Zoom avant/arrière</li>
                                <li>Coin supérieur droit: Information sur l'outil et la couleur actuels</li>
                            </ul>
                        </li>
                        <li><strong>Outils de Dessin:</strong> Cliquez sur le bouton outils pour accéder aux pinceaux, crayons, aquarelles, pastels, sprays, remplissage, texte et outils de forme.</li>
                        <li><strong>Sélection de Couleur:</strong> Cliquez sur le bouton de sélection de couleur pour ouvrir la palette de couleurs, choisir des couleurs personnalisées et ajuster la transparence.</li>
                        <li><strong>Taille du Pinceau:</strong> Ajustez la taille du pinceau avec le curseur dans le coin inférieur gauche.</li>
                        <li><strong>Zoom avant/arrière:</strong> Utilisez les boutons dans le coin inférieur droit pour zoomer sur la toile.</li>
                        <li><strong>Modèles:</strong> Sélectionnez parmi des modèles pré-faits pour commencer rapidement.</li>
                        <li><strong>Annuler/Rétablir:</strong> Utilisez les boutons dans le coin supérieur gauche de la toile pour annuler ou rétablir vos actions.</li>
                    </ul>
                    <p>Amusez-vous et profitez de moments artistiques!</p>
                `,
                selectAll: "Tout Sélectionner",
                deleteSelected: "Supprimer Sélectionnés",
                noDrawingsSelected: "Aucun dessin sélectionné.",
                templateLoadError: "Erreur de chargement du modèle. Veuillez sélectionner un autre modèle.",
                brushSize: "Taille du Pinceau",
                colorPicker: "Sélecteur de Couleur",
                transparency: "Transparence",
                tools: "Outils",
                ok: "OK",
                cancel: "Annuler",
                create: "Créer",
                blankCanvas: "Toile Vierge",
                gridCanvas: "Toile Quadrillée",
                linedCanvas: "Toile Lignée",
                coloredCanvas: "Toile Colorée",
                canvasBlankDesc: "Toile blanche vierge",
                canvasGridDesc: "Vue papier quadrillé",
                canvasLinedDesc: "Vue papier ligné",
                canvasColoredDesc: "Toile dans la couleur sélectionnée",
                formatPNG: "Format PNG",
                formatJPG: "Format JPG",
                formatPNGDesc: "Image haute qualité",
                formatJPGDesc: "Taille de fichier plus petite",
                shapeCircle: "Cercle",
                shapeSquare: "Carré",
                shapeTriangle: "Triangle",
                shapeRectangle: "Rectangle",
                shapeStar: "Étoile",
                shapeHeart: "Cœur",
                drawingName: "Nom du Dessin",
                drawingDate: "Date d'Enregistrement",
                viewDrawing: "Voir le Dessin",
                welcomeTitle: "Bienvenue sur ArtCanvas!",
                welcomeMessage: "Profitez de la peinture numérique avec ArtCanvas. Tous les contrôles sont sur la toile. Commencez à dessiner en utilisant les outils dans le coin supérieur gauche. Depuis le menu supérieur, vous pouvez créer une nouvelle toile, télécharger des images, utiliser des modèles, enregistrer vos dessins et les voir depuis la galería. Amusez-vous!",
                loading: "Chargement..."
            },
            // Diğer diller için çeviriler
            it: {
                canvasTitle: "Nuova Tela",
                save: "Salva",
                templates: "Modelli",
                gallery: "Galleria",
                brush: "Pennello",
                pencil: "Matita",
                eraser: "Gomma",
                watercolor: "Acquerello",
                pastel: "Pastello",
                spray: "Spray",
                fill: "Riempimento",
                shape: "Forma",
                text: "Testo",
                uploadImage: "Carica Immagine",
                clear: "Pulisci",
                undo: "Annulla",
                redo: "Ripristina",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Nuova Tela",
                download: "Scarica",
                savedNotification: "Il tuo disegno è stato salvato!",
                loadedNotification: "Modello caricato!",
                exportedNotification: "Il tuo disegno è stato esportato!",
                emptyGallery: "Non hai ancora disegni salvati.",
                confirmDelete: "Sei sicuro di voler eliminare questo disegno?",
                selectAll: "Seleziona Tutto",
                deleteSelected: "Elimina Selezionati",
                brushSize: "Dimensione Pennello",
                colorPicker: "Selettore Colore",
                transparency: "Trasparenza",
                tools: "Strumenti",
                ok: "OK",
                cancel: "Annulla",
                create: "Crea",
                blankCanvas: "Tela Bianca",
                gridCanvas: "Tela a Griglia",
                linedCanvas: "Tela Rigata",
                coloredCanvas: "Tela Colorata",
                formatPNG: "Formato PNG",
                formatJPG: "Formato JPG",
                shapeCircle: "Cerchio",
                shapeSquare: "Quadrato",
                shapeTriangle: "Triangolo",
                shapeRectangle: "Rettangolo",
                shapeStar: "Stella",
                shapeHeart: "Cuore",
                drawingName: "Nome Disegno",
                drawingDate: "Data Salvataggio",
                viewDrawing: "Visualizza Disegno",
                loading: "Caricamento..."
            },
            pt: {
                canvasTitle: "Nova Tela",
                save: "Salvar",
                templates: "Modelos",
                gallery: "Galeria",
                brush: "Pincel",
                pencil: "Lápis",
                eraser: "Borracha",
                watercolor: "Aquarela",
                pastel: "Pastel",
                spray: "Spray",
                fill: "Preenchimento",
                shape: "Forma",
                text: "Texto",
                uploadImage: "Carregar Imagem",
                clear: "Limpar",
                undo: "Desfazer",
                redo: "Refazer",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Nova Tela",
                download: "Baixar",
                savedNotification: "Seu desenho foi salvo!",
                loadedNotification: "Modelo carregado!",
                exportedNotification: "Seu desenho foi exportado!",
                emptyGallery: "Você ainda não tem desenhos salvos.",
                confirmDelete: "Tem certeza que deseja excluir este desenho?",
                selectAll: "Selecionar Tudo",
                deleteSelected: "Excluir Selecionados",
                brushSize: "Tamanho do Pincel",
                colorPicker: "Seletor de Cor",
                transparency: "Transparência",
                tools: "Ferramentas",
                ok: "OK",
                cancel: "Cancelar",
                create: "Criar",
                blankCanvas: "Tela em Branco",
                gridCanvas: "Tela com Grade",
                linedCanvas: "Tela com Linhas",
                coloredCanvas: "Tela Colorida",
                formatPNG: "Formato PNG",
                formatJPG: "Formato JPG",
                shapeCircle: "Círculo",
                shapeSquare: "Quadrado",
                shapeTriangle: "Triângulo",
                shapeRectangle: "Retângulo",
                shapeStar: "Estrela",
                shapeHeart: "Coração",
                drawingName: "Nome do Desenho",
                drawingDate: "Data de Salvamento",
                viewDrawing: "Ver Desenho",
                loading: "Carregando..."
            },
            ru: {
                canvasTitle: "Новый Холст",
                save: "Сохранить",
                templates: "Шаблоны",
                gallery: "Галерея",
                brush: "Кисть",
                pencil: "Карандаш",
                eraser: "Ластик",
                watercolor: "Акварель",
                pastel: "Пастель",
                spray: "Спрей",
                fill: "Заливка",
                shape: "Фигура",
                text: "Текст",
                uploadImage: "Загрузить Изображение",
                clear: "Очистить",
                undo: "Отменить",
                redo: "Вернуть",
                exportPNG: "PNG",
                exportJPG: "JPG",
                newCanvas: "Новый Холст",
                download: "Скачать",
                savedNotification: "Ваш рисунок сохранен!",
                loadedNotification: "Шаблон загружен!",
                exportedNotification: "Ваш рисунок экспортирован!",
                emptyGallery: "У вас еще нет сохраненных рисунков.",
                confirmDelete: "Вы уверены, что хотите удалить этот рисунок?",
                selectAll: "Выбрать Все",
                deleteSelected: "Удалить Выбранные",
                brushSize: "Размер Кисти",
                colorPicker: "Выбор Цвета",
                transparency: "Прозрачность",
                tools: "Инструменты",
                ok: "OK",
                cancel: "Отмена",
                create: "Создать",
                blankCanvas: "Чистый Холст",
                gridCanvas: "Холст с Сеткой",
                linedCanvas: "Холст с Линиями",
                coloredCanvas: "Цветной Холст",
                formatPNG: "Формат PNG",
                formatJPG: "Формат JPG",
                shapeCircle: "Круг",
                shapeSquare: "Квадрат",
                shapeTriangle: "Треугольник",
                shapeRectangle: "Прямоугольник",
                shapeStar: "Звезда",
                shapeHeart: "Сердце",
                drawingName: "Название Рисунка",
                drawingDate: "Дата Сохранения",
                viewDrawing: "Просмотр Рисунка",
                loading: "Загрузка..."
            },
            ja: { canvasTitle: "新しいキャンバス", save: "保存", templates: "テンプレート", gallery: "ギャラリー", brush: "ブラシ", pencil: "鉛筆", eraser: "消しゴム", watercolor: "水彩", pastel: "パステル", spray: "スプレー", fill: "塗りつぶし", shape: "形状", text: "テキスト", uploadImage: "画像をアップロード", clear: "クリア", undo: "元に戻す", redo: "やり直し", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "新しいキャンバス", download: "ダウンロード", loading: "読み込み中..." },
            ko: { canvasTitle: "새 캔버스", save: "저장", templates: "템플릿", gallery: "갤러리", brush: "브러시", pencil: "연필", eraser: "지우개", watercolor: "수채화", pastel: "파스텔", spray: "스프레이", fill: "채우기", shape: "도형", text: "텍스트", uploadImage: "이미지 업로드", clear: "지우기", undo: "실행 취소", redo: "다시 실행", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "새 캔버스", download: "다운로드", loading: "로딩 중..." },
            zh: { canvasTitle: "新画布", save: "保存", templates: "模板", gallery: "画廊", brush: "画笔", pencil: "铅笔", eraser: "橡皮擦", watercolor: "水彩", pastel: "粉彩", spray: "喷雾", fill: "填充", shape: "形状", text: "文本", uploadImage: "上传图片", clear: "清除", undo: "撤销", redo: "重做", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "新画布", download: "下载", loading: "加载中..." },
            ar: { canvasTitle: "لوحة جديدة", save: "حفظ", templates: "قوالب", gallery: "معرض", brush: "فرشاة", pencil: "قلم رصاص", eraser: "ممحاة", watercolor: "ألوان مائية", pastel: "باستيل", spray: "رش", fill: "ملء", shape: "شكل", text: "نص", uploadImage: "تحميل صورة", clear: "مسح", undo: "تراجع", redo: "إعادة", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "لوحة جديدة", download: "تحميل", loading: "جاري التحميل..." },
            hi: { canvasTitle: "नया कैनवास", save: "सहेजें", templates: "टेम्प्लेट", gallery: "गैलरी", brush: "ब्रश", pencil: "पेंसिल", eraser: "रबड़", watercolor: "वॉटरकलर", pastel: "पेस्टल", spray: "स्प्रे", fill: "भरण", shape: "आकार", text: "पाठ", uploadImage: "छवि अपलोड", clear: "साफ़", undo: "पूर्ववत", redo: "फिर से करें", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "नया कैनवास", download: "डाउनलोड", loading: "लोड हो रहा है..." },
            nl: { canvasTitle: "Nieuw Canvas", save: "Opslaan", templates: "Sjablonen", gallery: "Galerij", brush: "Penseel", pencil: "Potlood", eraser: "Gum", watercolor: "Waterverf", pastel: "Pastel", spray: "Spray", fill: "Vullen", shape: "Vorm", text: "Tekst", uploadImage: "Afbeelding uploaden", clear: "Wissen", undo: "Ongedaan maken", redo: "Opnieuw", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "Nieuw Canvas", download: "Downloaden", loading: "Laden..." },
            pl: { canvasTitle: "Nowe Płótno", save: "Zapisz", templates: "Szablony", gallery: "Galeria", brush: "Pędzel", pencil: "Ołówek", eraser: "Gumka", watercolor: "Akwarela", pastel: "Pastel", spray: "Spray", fill: "Wypełnienie", shape: "Kształt", text: "Tekst", uploadImage: "Prześlij Obraz", clear: "Wyczyść", undo: "Cofnij", redo: "Ponów", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "Nowe Płótno", download: "Pobierz", loading: "Ładowanie..." },
            th: { canvasTitle: "ผืนผ้าใบใหม่", save: "บันทึก", templates: "เทมเพลต", gallery: "แกลเลอรี่", brush: "แปรง", pencil: "ดินสอ", eraser: "ยางลบ", watercolor: "สีน้ำ", pastel: "พาสเทล", spray: "สเปรย์", fill: "เติม", shape: "รูปร่าง", text: "ข้อความ", uploadImage: "อัปโหลดรูปภาพ", clear: "ล้าง", undo: "เลิกทำ", redo: "ทำซ้ำ", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "ผืนผ้าใบใหม่", download: "ดาวน์โหลด", loading: "กำลังโหลด..." },
            vi: { canvasTitle: "Canvas Mới", save: "Lưu", templates: "Mẫu", gallery: "Thư viện", brush: "Cọ", pencil: "Bút chì", eraser: "Tẩy", watercolor: "Màu nước", pastel: "Phấn màu", spray: "Xịt", fill: "Tô", shape: "Hình dạng", text: "Văn bản", uploadImage: "Tải ảnh lên", clear: "Xóa", undo: "Hoàn tác", redo: "Làm lại", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "Canvas Mới", download: "Tải xuống", loading: "Đang tải..." },
            id: { canvasTitle: "Kanvas Baru", save: "Simpan", templates: "Templat", gallery: "Galeri", brush: "Kuas", pencil: "Pensil", eraser: "Penghapus", watercolor: "Cat Air", pastel: "Pastel", spray: "Semprot", fill: "Isi", shape: "Bentuk", text: "Teks", uploadImage: "Unggah Gambar", clear: "Hapus", undo: "Batalkan", redo: "Ulangi", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "Kanvas Baru", download: "Unduh", loading: "Memuat..." },
            uk: { canvasTitle: "Новий Холст", save: "Зберегти", templates: "Шаблони", gallery: "Галерея", brush: "Пензель", pencil: "Олівець", eraser: "Гумка", watercolor: "Акварель", pastel: "Пастель", spray: "Спрей", fill: "Заливка", shape: "Форма", text: "Текст", uploadImage: "Завантажити Зображення", clear: "Очистити", undo: "Скасувати", redo: "Повторити", exportPNG: "PNG", exportJPG: "JPG", newCanvas: "Новий Холст", download: "Завантажити", loading: "Завантаження..." }
        };
        
        // Uygulama durumu
        const appState = {
            currentTool: 'brush',
            currentColor: '#6c5ce7',
            brushSize: 10,
            opacity: 1.0,
            zoomLevel: 1.0,
            isDrawing: false,
            lastX: 0,
            lastY: 0,
            undoStack: [],
            redoStack: [],
            currentLanguage: 'en',
            canvasData: null,
            canvasBackground: 'blank',
            selectedDrawings: new Set(),
            isSelecting: false,
            hasDrawing: false,
            newCanvasSelected: 'blank',
            downloadFormat: 'png',
            selectedShape: 'circle',
            textToolActive: false,
            shapeToolActive: false,
            layers: {
                background: null,
                drawing: null
            },
            appInitialized: false
        };
        
        // DOM elementleri
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        const languageSelect = document.getElementById('languageSelect');
        const brushSizeSlider = document.getElementById('canvasBrushSize');
        const brushSizeValue = document.getElementById('canvasBrushSizeValue');
        const templatesModal = document.getElementById('templatesModal');
        const templatesBtn = document.getElementById('templatesBtn');
        const closeTemplatesModal = document.getElementById('closeTemplatesModal');
        const galleryModal = document.getElementById('galleryModal');
        const galleryBtn = document.getElementById('galleryBtn');
        const closeGalleryModal = document.getElementById('closeGalleryModal');
        const saveBtn = document.getElementById('saveBtn');
        const downloadHeaderBtn = document.getElementById('downloadHeaderBtn');
        const uploadImageHeaderBtn = document.getElementById('uploadImageHeaderBtn');
        const newCanvasHeaderBtn = document.getElementById('newCanvasHeaderBtn');
        const undoOverlayBtn = document.getElementById('undoOverlayBtn');
        const redoOverlayBtn = document.getElementById('redoOverlayBtn');
        const eraserOverlayBtn = document.getElementById('eraserOverlayBtn');
        const clearOverlayBtn = document.getElementById('clearOverlayBtn');
        const colorOverlayBtn = document.getElementById('colorOverlayBtn');
        const brushOverlayBtn = document.getElementById('brushOverlayBtn');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const resetZoomBtn = document.getElementById('resetZoomBtn');
        const zoomLevel = document.getElementById('zoomLevel');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        const loading = document.getElementById('loading');
        const helpGuide = document.getElementById('helpGuide');
        const canvasPlaceholder = document.getElementById('canvasPlaceholder');
        const saveModal = document.getElementById('saveModal');
        const closeSaveModal = document.getElementById('closeSaveModal');
        const saveInput = document.getElementById('saveInput');
        const saveModalOkBtn = document.getElementById('saveModalOkBtn');
        const saveModalCancelBtn = document.getElementById('saveModalCancelBtn');
        const colorModal = document.getElementById('colorModal');
        const closeColorModal = document.getElementById('closeColorModal');
        const colorModalPalette = document.getElementById('colorModalPalette');
        const colorModalPicker = document.getElementById('colorModalPicker');
        const colorModalOpacity = document.getElementById('colorModalOpacity');
        const colorModalOpacityValue = document.getElementById('colorModalOpacityValue');
        const colorModalOkBtn = document.getElementById('colorModalOkBtn');
        const newCanvasModal = document.getElementById('newCanvasModal');
        const closeNewCanvasModal = document.getElementById('closeNewCanvasModal');
        const canvasOptionsGrid = document.getElementById('canvasOptionsGrid');
        const newCanvasModalOkBtn = document.getElementById('newCanvasModalOkBtn');
        const newCanvasModalCancelBtn = document.getElementById('newCanvasModalCancelBtn');
        const downloadModal = document.getElementById('downloadModal');
        const closeDownloadModal = document.getElementById('closeDownloadModal');
        const downloadOptions = document.getElementById('downloadOptions');
        const downloadModalOkBtn = document.getElementById('downloadModalOkBtn');
        const downloadModalCancelBtn = document.getElementById('downloadModalCancelBtn');
        const toolsModal = document.getElementById('toolsModal');
        const closeToolsModal = document.getElementById('closeToolsModal');
        const toolsModalGrid = document.getElementById('toolsModalGrid');
        const toolsModalOkBtn = document.getElementById('toolsModalOkBtn');
        const toolsModalCancelBtn = document.getElementById('toolsModalCancelBtn');
        const textToolModal = document.getElementById('textToolModal');
        const closeTextToolModal = document.getElementById('closeTextToolModal');
        const textInput = document.getElementById('textInput');
        const addTextBtn = document.getElementById('addTextBtn');
        const textFont = document.getElementById('textFont');
        const textSize = document.getElementById('textSize');
        const textSizeValue = document.getElementById('textSizeValue');
        const textToolCancelBtn = document.getElementById('textToolCancelBtn');
        const shapeToolModal = document.getElementById('shapeToolModal');
        const closeShapeToolModal = document.getElementById('closeShapeToolModal');
        const shapeOptions = document.getElementById('shapeOptions');
        const shapeFillColor = document.getElementById('shapeFillColor');
        const shapeStrokeColor = document.getElementById('shapeStrokeColor');
        const shapeToolCancelBtn = document.getElementById('shapeToolCancelBtn');
        const drawingViewModal = document.getElementById('drawingViewModal');
        const closeDrawingViewModal = document.getElementById('closeDrawingViewModal');
        const drawingViewContent = document.getElementById('drawingViewContent');
        const messageModal = document.getElementById('messageModal');
        const messageModalIcon = document.getElementById('messageModalIcon');
        const messageModalTitle = document.getElementById('messageModalTitle');
        const messageModalText = document.getElementById('messageModalText');
        const messageModalOkBtn = document.getElementById('messageModalOkBtn');
        const confirmModal = document.getElementById('confirmModal');
        const confirmModalIcon = document.getElementById('confirmModalIcon');
        const confirmModalTitle = document.getElementById('confirmModalTitle');
        const confirmModalText = document.getElementById('confirmModalText');
        const confirmModalYesBtn = document.getElementById('confirmModalYesBtn');
        const confirmModalNoBtn = document.getElementById('confirmModalNoBtn');
        const currentToolIndicator = document.getElementById('currentToolIndicator');
        const currentToolName = document.getElementById('currentToolName');
        const currentColorIndicator = document.getElementById('currentColorIndicator');
        const currentColorPreview = document.getElementById('currentColorPreview');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const deleteSelectedBtn = document.getElementById('deleteSelectedBtn');
        const helpModal = document.getElementById('helpModal');
        const closeHelpModal = document.getElementById('closeHelpModal');
        const helpModalTitle = document.getElementById('helpModalTitle');
        const helpModalContent = document.getElementById('helpModalContent');
        
        // Renk paleti
        const colors = [
            '#6c5ce7', '#a29bfe', '#fd79a8', '#00b894', '#fdcb6e',
            '#e17055', '#d63031', '#0984e3', '#00cec9', '#636e72',
            '#2d3436', '#ffffff', '#000000', '#f1c40f', '#e74c3c',
            '#3498db', '#2ecc71', '#9b59b6', '#1abc9c', '#34495e',
            '#e84393', '#00cec9', '#fd79a8', '#a29bfe', '#fdcb6e',
            '#e17055', '#d63031', '#0984e3', '#00b894', '#6c5ce7'
        ];
        
        // Şablonlar - Verilen tüm resim linkleri
        const templates = [
            { id: 2,  url: 'https://i.hizliresim.com/hlpy6l1.png' },
            { id: 3,  url: 'https://i.hizliresim.com/2e14bw2.png' },
            { id: 4,  url: 'https://i.hizliresim.com/7om8r73.png' },
            { id: 5,  url: 'https://i.hizliresim.com/jr8gesf.png' },
            { id: 6,  url: 'https://i.hizliresim.com/tg8e66j.png' },
            { id: 7,  url: 'https://i.hizliresim.com/4ubuk33.png' },
            { id: 8,  url: 'https://i.hizliresim.com/hqt1zcd.png' },
            { id: 9,  url: 'https://i.hizliresim.com/46263k5.png' },
            { id: 10,  url: 'https://i.hizliresim.com/hli4z19.png' },
            { id: 11,  url: 'https://i.hizliresim.com/m06z3qo.png' },
            { id: 12,  url: 'https://i.hizliresim.com/b2jodaw.png' },
            { id: 13,  url: 'https://i.hizliresim.com/gmmzm61.png' },
            { id: 14,  url: 'https://i.hizliresim.com/h7oj6z3.jpg' },
            { id: 15,  url: 'https://i.hizliresim.com/kylgqm7.png' },
            { id: 16,  url: 'https://i.hizliresim.com/bvbzewm.png' },
            { id: 17,  url: 'https://i.hizliresim.com/azxnfsd.png' },
            { id: 18,  url: 'https://i.hizliresim.com/o2yu4mh.png' },
            { id: 19,  url: 'https://i.hizliresim.com/kqfn8x8.png' },
            { id: 20,  url: 'https://i.hizliresim.com/8kxpuvu.png' },
            { id: 21,  url: 'https://i.hizliresim.com/r98yfe3.jpg' },
            { id: 22,  url: 'https://i.hizliresim.com/k8adqvj.png' },
            { id: 23,  url: 'https://i.hizliresim.com/gn0p8p8.png' },
            { id: 24,  url: 'https://i.hizliresim.com/5qvcb1v.png' },
            { id: 25,  url: 'https://i.hizliresim.com/1lj0j7u.png' },
            { id: 26,  url: 'https://i.hizliresim.com/gp1tkan.png' },
            { id: 27,  url: 'https://i.hizliresim.com/mm8dwsw.png' },
            { id: 28,  url: 'https://i.hizliresim.com/l0lvwbn.jpg' },
            { id: 29,  url: 'https://i.hizliresim.com/qdfwqv0.png' },
            { id: 30,  url: 'https://i.hizliresim.com/iisk7ba.png' },
            { id: 31,  url: 'https://i.hizliresim.com/lkoytni.png' },
            { id: 32,  url: 'https://i.hizliresim.com/7vn90ip.png' },
            { id: 33,  url: 'https://i.hizliresim.com/rc84qso.png' },
            { id: 34,  url: 'https://i.hizliresim.com/df5hx0l.png' },
            { id: 35,  url: 'https://i.hizliresim.com/6n041ap.png' },
            { id: 36,  url: 'https://i.hizliresim.com/i8eevnf.png' },
            { id: 37,  url: 'https://i.hizliresim.com/ll3hr7s.png' },
            { id: 38,  url: 'https://i.hizliresim.com/jx4wesq.png' },
            { id: 39,  url: 'https://i.hizliresim.com/a053li8.png' },
            { id: 40,  url: 'https://i.hizliresim.com/aoqryfb.png' },
            { id: 41,  url: 'https://i.hizliresim.com/okqpgp0.png' },
            { id: 42,  url: 'https://i.hizliresim.com/1u6r2jh.jpg' },
            { id: 43,  url: 'https://i.hizliresim.com/7wle4f4.png' },
            { id: 44,  url: 'https://i.hizliresim.com/ge30qcm.png' },
            { id: 45,  url: 'https://i.hizliresim.com/9xwa92a.png' },
            { id: 46,  url: 'https://i.hizliresim.com/1dgkfir.png' },
            { id: 47,  url: 'https://i.hizliresim.com/g8j4esl.png' },
            { id: 48,  url: 'https://i.hizliresim.com/3c1metf.png' },
            { id: 49,  url: 'https://i.hizliresim.com/r5jnyjy.png' },
            { id: 50,  url: 'https://i.hizliresim.com/s6y8z8v.png' },
            { id: 51,  url: 'https://i.hizliresim.com/7s8uv5n.png' },
            { id: 52,  url: 'https://i.hizliresim.com/a9x3d98.png' },
            { id: 53,  url: 'https://i.hizliresim.com/ihmhd68.png' },
            { id: 54,  url: 'https://i.hizliresim.com/3c0k2up.png' },
            { id: 55,  url: 'https://i.hizliresim.com/lhmerga.png' },
            { id: 56,  url: 'https://i.hizliresim.com/itisvof.png' },
            { id: 57,  url: 'https://i.hizliresim.com/nf25827.jpg' },
            { id: 58,  url: 'https://i.hizliresim.com/rxbdaso.png' },
            { id: 59,  url: 'https://i.hizliresim.com/1b54adu.png' },
            { id: 60,  url: 'https://i.hizliresim.com/q63g7uu.png' },
            { id: 61,  url: 'https://i.hizliresim.com/fvo1gjt.png' },
            { id: 62,  url: 'https://i.hizliresim.com/hxlddgp.png' },
            { id: 63,  url: 'https://i.hizliresim.com/n4xg2ro.png' },
            { id: 64,  url: 'https://i.hizliresim.com/pdkdrqt.png' },
            { id: 65,  url: 'https://i.hizliresim.com/glnc1bb.jpg' }
        ];
        
        // Loading ekranını gizle
        function hideLoading() {
            loading.classList.add('hidden');
            setTimeout(() => {
                loading.style.display = 'none';
            }, 300);
        }
        
        // Canvas boyutlarını dinamik ayarla
        function resizeCanvas() {
            const container = canvas.parentElement;
            if (!container) return;
            
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            const minCanvasSize = 300;
            const maxCanvasSize = 2000;
            
            let canvasWidth = Math.max(minCanvasSize, containerWidth - 40);
            let canvasHeight = Math.max(minCanvasSize, containerHeight - 40);
            
            canvasWidth = Math.min(canvasWidth, maxCanvasSize);
            canvasHeight = Math.min(canvasHeight, maxCanvasSize);
            
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            
            canvas.style.width = `${canvasWidth}px`;
            canvas.style.height = `${canvasHeight}px`;
            
            initLayers();
            applyCanvasBackground();
            
            if (appState.canvasData) {
                const img = new Image();
                img.onload = function() {
                    drawToDrawingLayer(() => {
                        ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);
                    });
                    appState.hasDrawing = true;
                    updateCanvasPlaceholder();
                };
                img.src = appState.canvasData;
            } else {
                appState.hasDrawing = false;
                updateCanvasPlaceholder();
            }
            
            saveToUndoStack();
            updateCursor();
        }
        
        // Katmanları başlat
        function initLayers() {
            appState.layers.background = document.createElement('canvas');
            appState.layers.background.width = canvas.width;
            appState.layers.background.height = canvas.height;
            
            appState.layers.drawing = document.createElement('canvas');
            appState.layers.drawing.width = canvas.width;
            appState.layers.drawing.height = canvas.height;
        }
        
        // Çizim katmanına çiz
        function drawToDrawingLayer(drawFunction) {
            if (!appState.layers.drawing) return;
            const drawingCtx = appState.layers.drawing.getContext('2d');
            drawFunction(drawingCtx);
            renderCanvas();
        }
        
        // Canvas'ı render et
        function renderCanvas() {
            if (!ctx || !appState.layers.background || !appState.layers.drawing) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(appState.layers.background, 0, 0);
            ctx.drawImage(appState.layers.drawing, 0, 0);
        }
        
        // Canvas arka planını uygula
        function applyCanvasBackground() {
            if (!appState.layers.background) return;
            
            const bgCtx = appState.layers.background.getContext('2d');
            bgCtx.fillStyle = '#ffffff';
            bgCtx.fillRect(0, 0, canvas.width, canvas.height);
            
            switch(appState.canvasBackground) {
                case 'grid':
                    drawGrid(bgCtx);
                    break;
                case 'lined':
                    drawLined(bgCtx);
                    break;
                case 'colored':
                    bgCtx.fillStyle = appState.currentColor;
                    bgCtx.fillRect(0, 0, canvas.width, canvas.height);
                    break;
                default:
                    break;
            }
            
            renderCanvas();
        }
        
        // Kareli desen çiz
        function drawGrid(context) {
            context.strokeStyle = '#f0f0f0';
            context.lineWidth = 1;
            
            const gridSize = 20;
            const width = canvas.width;
            const height = canvas.height;
            
            for (let x = 0; x <= width; x += gridSize) {
                context.beginPath();
                context.moveTo(x, 0);
                context.lineTo(x, height);
                context.stroke();
            }
            
            for (let y = 0; y <= height; y += gridSize) {
                context.beginPath();
                context.moveTo(0, y);
                context.lineTo(width, y);
                context.stroke();
            }
        }
        
        // Çizgili desen çiz
        function drawLined(context) {
            context.strokeStyle = '#f0f0f0';
            context.lineWidth = 1;
            
            const lineSpacing = 25;
            const height = canvas.height;
            
            for (let y = 0; y <= height; y += lineSpacing) {
                context.beginPath();
                context.moveTo(0, y);
                context.lineTo(canvas.width, y);
                context.stroke();
            }
            
            context.strokeStyle = '#e0e0e0';
            context.lineWidth = 2;
            
            context.beginPath();
            context.moveTo(0, 0);
            context.lineTo(canvas.width, 0);
            context.stroke();
            
            context.beginPath();
            context.moveTo(0, canvas.height);
            context.lineTo(canvas.width, canvas.height);
            context.stroke();
        }
        
        // Yeni tuval yazısını güncelle
        function updateCanvasPlaceholder() {
            if (!canvasPlaceholder) return;
            
            if (appState.hasDrawing) {
                canvasPlaceholder.style.display = 'none';
            } else {
                canvasPlaceholder.style.display = 'block';
                canvasPlaceholder.textContent = translations[appState.currentLanguage]?.canvasTitle || translations.en.canvasTitle;
            }
        }
        
        // Mevcut araç göstergesini güncelle
        function updateToolIndicator() {
            if (!currentToolName || !currentColorPreview) return;
            
            const toolNames = {
                'brush': translations[appState.currentLanguage]?.brush || translations.en.brush,
                'pencil': translations[appState.currentLanguage]?.pencil || translations.en.pencil,
                'eraser': translations[appState.currentLanguage]?.eraser || translations.en.eraser,
                'watercolor': translations[appState.currentLanguage]?.watercolor || translations.en.watercolor,
                'pastel': translations[appState.currentLanguage]?.pastel || translations.en.pastel,
                'spray': translations[appState.currentLanguage]?.spray || translations.en.spray,
                'fill': translations[appState.currentLanguage]?.fill || translations.en.fill,
                'shape': translations[appState.currentLanguage]?.shape || translations.en.shape,
                'text': translations[appState.currentLanguage]?.text || translations.en.text
            };
            
            const toolIcons = {
                'brush': 'fas fa-paint-brush',
                'pencil': 'fas fa-pencil-alt',
                'eraser': 'fas fa-eraser',
                'watercolor': 'fas fa-tint',
                'pastel': 'fas fa-star',
                'spray': 'fas fa-spray-can',
                'fill': 'fas fa-fill-drip',
                'shape': 'fas fa-shapes',
                'text': 'fas fa-font'
            };
            
            const toolName = toolNames[appState.currentTool] || translations.en.brush;
            const toolIcon = toolIcons[appState.currentTool] || 'fas fa-paint-brush';
            
            currentToolName.textContent = toolName;
            if (currentToolIndicator.querySelector('i')) {
                currentToolIndicator.querySelector('i').className = toolIcon;
            }
            
            currentColorPreview.style.backgroundColor = appState.currentColor;
            
            if (appState.currentTool === 'eraser') {
                currentColorPreview.style.backgroundColor = '#cccccc';
            }
        }
        
        // Renk modal paletini oluştur
        function createColorModalPalette() {
            if (!colorModalPalette) return;
            
            colorModalPalette.innerHTML = '';
            colors.forEach(color => {
                const colorElement = document.createElement('div');
                colorElement.className = 'color-modal-option';
                if (color === appState.currentColor) {
                    colorElement.classList.add('active');
                }
                colorElement.style.backgroundColor = color;
                colorElement.dataset.color = color;
                
                colorElement.addEventListener('click', function() {
                    document.querySelectorAll('.color-modal-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.currentColor = this.dataset.color;
                    if (colorModalPicker) colorModalPicker.value = appState.currentColor;
                    
                    if (appState.currentTool === 'eraser') {
                        appState.currentTool = 'brush';
                    }
                    
                    updateCursor();
                    updateToolIndicator();
                });
                
                colorModalPalette.appendChild(colorElement);
            });
        }
        
        // Şablonları oluştur
        function createTemplates() {
            const templatesGrid = document.getElementById('templatesGrid');
            if (!templatesGrid) return;
            
            templatesGrid.innerHTML = '';
            
            templates.forEach(template => {
                const templateElement = document.createElement('div');
                templateElement.className = 'template-item';
                templateElement.dataset.id = template.id;
                
                templateElement.innerHTML = `
                    <img class="template-img" src="${template.url}" alt="Template ${template.id}" loading="lazy" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"150\"><rect width=\"100%\" height=\"100%\" fill=\"%23f5f5f5\"/></svg>
                `;
                
                templateElement.addEventListener('click', function() {
                    loadTemplate(template.id);
                });
                
                templatesGrid.appendChild(templateElement);
            });
        }
        
        // Şablon yükle
        function loadTemplate(templateId) {
            const template = templates.find(t => t.id === templateId);
            if (!template) return;
            
            const img = new Image();
            img.crossOrigin = "anonymous";
            
            showLoading();
            
            img.onload = function() {
                const scale = Math.min(
                    canvas.width / img.width,
                    canvas.height / img.height
                );
                const width = img.width * scale;
                const height = img.height * scale;
                const x = (canvas.width - width) / 2;
                const y = (canvas.height - height) / 2;
                
                drawToDrawingLayer((drawingCtx) => {
                    drawingCtx.drawImage(img, x, y, width, height);
                });
                
                appState.hasDrawing = true;
                updateCanvasPlaceholder();
                saveToUndoStack();
                hideLoading();
                closeModal(templatesModal);
                showNotification(translations[appState.currentLanguage]?.loadedNotification || translations.en.loadedNotification);
            };
            
            img.onerror = function() {
                hideLoading();
                showMessage('Error', translations[appState.currentLanguage]?.templateLoadError || translations.en.templateLoadError, 'error');
            };
            
            img.src = template.url + '?t=' + new Date().getTime();
        }
        
        // Yeni tuval modal'ını oluştur
        function createNewCanvasModal() {
            if (!canvasOptionsGrid) return;
            
            canvasOptionsGrid.innerHTML = '';
            
            const canvasOptions = [
                { id: 'blank', name: translations[appState.currentLanguage]?.blankCanvas || translations.en.blankCanvas, icon: 'fas fa-square', desc: translations[appState.currentLanguage]?.canvasBlankDesc || translations.en.canvasBlankDesc },
                { id: 'grid', name: translations[appState.currentLanguage]?.gridCanvas || translations.en.gridCanvas, icon: 'fas fa-th', desc: translations[appState.currentLanguage]?.canvasGridDesc || translations.en.canvasGridDesc },
                { id: 'lined', name: translations[appState.currentLanguage]?.linedCanvas || translations.en.linedCanvas, icon: 'fas fa-border-all', desc: translations[appState.currentLanguage]?.canvasLinedDesc || translations.en.canvasLinedDesc },
                { id: 'colored', name: translations[appState.currentLanguage]?.coloredCanvas || translations.en.coloredCanvas, icon: 'fas fa-fill-drip', desc: translations[appState.currentLanguage]?.canvasColoredDesc || translations.en.canvasColoredDesc }
            ];
            
            canvasOptions.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'canvas-option';
                if (option.id === appState.newCanvasSelected) {
                    optionElement.classList.add('active');
                }
                optionElement.dataset.id = option.id;
                
                optionElement.innerHTML = `
                    <div class="canvas-option-icon">
                        <i class="${option.icon}"></i>
                    </div>
                    <div class="canvas-option-name">${option.name}</div>
                    <div class="canvas-option-desc">${option.desc}</div>
                `;
                
                optionElement.addEventListener('click', function() {
                    document.querySelectorAll('.canvas-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.newCanvasSelected = this.dataset.id;
                });
                
                canvasOptionsGrid.appendChild(optionElement);
            });
        }
        
        // Yeni tuval oluştur
        function createNewCanvas() {
            if (appState.hasDrawing) {
                showConfirm(
                    translations[appState.currentLanguage]?.newCanvas || translations.en.newCanvas,
                    translations[appState.currentLanguage]?.newCanvasConfirm || translations.en.newCanvasConfirm,
                    function() {
                        appState.canvasBackground = appState.newCanvasSelected;
                        
                        if (appState.layers.drawing) {
                            const drawingCtx = appState.layers.drawing.getContext('2d');
                            drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                        }
                        
                        applyCanvasBackground();
                        saveToUndoStack();
                        appState.canvasData = null;
                        appState.hasDrawing = false;
                        updateCanvasPlaceholder();
                        closeModal(newCanvasModal);
                    }
                );
            } else {
                appState.canvasBackground = appState.newCanvasSelected;
                
                if (appState.layers.drawing) {
                    const drawingCtx = appState.layers.drawing.getContext('2d');
                    drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                }
                
                applyCanvasBackground();
                saveToUndoStack();
                appState.canvasData = null;
                appState.hasDrawing = false;
                updateCanvasPlaceholder();
                closeModal(newCanvasModal);
            }
        }
        
        // İndirme modal'ını oluştur
        function createDownloadModal() {
            if (!downloadOptions) return;
            
            downloadOptions.innerHTML = '';
            
            const downloadOptionsList = [
                { id: 'png', name: translations[appState.currentLanguage]?.formatPNG || translations.en.formatPNG, icon: 'fas fa-file-image', desc: translations[appState.currentLanguage]?.formatPNGDesc || translations.en.formatPNGDesc },
                { id: 'jpg', name: translations[appState.currentLanguage]?.formatJPG || translations.en.formatJPG, icon: 'fas fa-file-image', desc: translations[appState.currentLanguage]?.formatJPGDesc || translations.en.formatJPGDesc }
            ];
            
            downloadOptionsList.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'download-option';
                if (option.id === appState.downloadFormat) {
                    optionElement.classList.add('active');
                }
                optionElement.dataset.id = option.id;
                
                optionElement.innerHTML = `
                    <div class="download-option-icon">
                        <i class="${option.icon}"></i>
                    </div>
                    <div class="download-option-name">${option.name}</div>
                    <div class="download-option-desc">${option.desc}</div>
                `;
                
                optionElement.addEventListener('click', function() {
                    document.querySelectorAll('.download-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.downloadFormat = this.dataset.id;
                });
                
                downloadOptions.appendChild(optionElement);
            });
        }
        
        // Çizimi indir
        function downloadCanvas() {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            const tempCtx = tempCanvas.getContext('2d');
            
            if (appState.layers.background) {
                tempCtx.drawImage(appState.layers.background, 0, 0);
            }
            if (appState.layers.drawing) {
                tempCtx.drawImage(appState.layers.drawing, 0, 0);
            }
            
            const dataUrl = tempCanvas.toDataURL(`image/${appState.downloadFormat === 'jpg' ? 'jpeg' : appState.downloadFormat}`);
            const link = document.createElement('a');
            link.download = `artcanvas_${new Date().getTime()}.${appState.downloadFormat}`;
            link.href = dataUrl;
            link.click();
            
            closeModal(downloadModal);
            showNotification(translations[appState.currentLanguage]?.exportedNotification || translations.en.exportedNotification);
        }
        
        // Araçlar modal'ını oluştur
        function createToolsModal() {
            if (!toolsModalGrid) return;
            
            toolsModalGrid.innerHTML = '';
            
            const tools = [
                { id: 'brush', name: translations[appState.currentLanguage]?.brush || translations.en.brush, icon: 'fas fa-paint-brush' },
                { id: 'pencil', name: translations[appState.currentLanguage]?.pencil || translations.en.pencil, icon: 'fas fa-pencil-alt' },
                { id: 'watercolor', name: translations[appState.currentLanguage]?.watercolor || translations.en.watercolor, icon: 'fas fa-tint' },
                { id: 'pastel', name: translations[appState.currentLanguage]?.pastel || translations.en.pastel, icon: 'fas fa-star' },
                { id: 'spray', name: translations[appState.currentLanguage]?.spray || translations.en.spray, icon: 'fas fa-spray-can' },
                { id: 'fill', name: translations[appState.currentLanguage]?.fill || translations.en.fill, icon: 'fas fa-fill-drip' },
                { id: 'text', name: translations[appState.currentLanguage]?.text || translations.en.text, icon: 'fas fa-font' },
                { id: 'shape', name: translations[appState.currentLanguage]?.shape || translations.en.shape, icon: 'fas fa-shapes' }
            ];
            
            tools.forEach(tool => {
                const toolElement = document.createElement('div');
                toolElement.className = 'tools-modal-option';
                if (tool.id === appState.currentTool) {
                    toolElement.classList.add('active');
                }
                toolElement.dataset.id = tool.id;
                
                toolElement.innerHTML = `
                    <div class="tools-modal-option-icon">
                        <i class="${tool.icon}"></i>
                    </div>
                    <div class="tools-modal-option-name">${tool.name}</div>
                `;
                
                toolElement.addEventListener('click', function() {
                    document.querySelectorAll('.tools-modal-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.currentTool = this.dataset.id;
                    
                    if (appState.currentTool === 'text') {
                        closeModal(toolsModal);
                        openModal(textToolModal);
                        if (textInput) textInput.focus();
                    } else if (appState.currentTool === 'shape') {
                        closeModal(toolsModal);
                        openModal(shapeToolModal);
                    } else if (appState.currentTool === 'fill') {
                        closeModal(toolsModal);
                        appState.shapeToolActive = false;
                        appState.textToolActive = false;
                        canvas.style.cursor = 'crosshair';
                        showMessage(
                            translations[appState.currentLanguage]?.fill || translations.en.fill,
                            "Click on any area to fill it with the selected color",
                            'info'
                        );
                    }
                    
                    updateToolIndicator();
                    closeModal(toolsModal);
                });
                
                toolsModalGrid.appendChild(toolElement);
            });
        }
        
        // Şekil seçeneklerini oluştur
        function createShapeOptions() {
            if (!shapeOptions) return;
            
            shapeOptions.innerHTML = '';
            
            const shapes = [
                { id: 'circle', name: translations[appState.currentLanguage]?.shapeCircle || translations.en.shapeCircle, icon: 'fas fa-circle' },
                { id: 'square', name: translations[appState.currentLanguage]?.shapeSquare || translations.en.shapeSquare, icon: 'fas fa-square' },
                { id: 'triangle', name: translations[appState.currentLanguage]?.shapeTriangle || translations.en.shapeTriangle, icon: 'fas fa-play fa-rotate-270' },
                { id: 'rectangle', name: translations[appState.currentLanguage]?.shapeRectangle || translations.en.shapeRectangle, icon: 'fas fa-square' },
                { id: 'star', name: translations[appState.currentLanguage]?.shapeStar || translations.en.shapeStar, icon: 'fas fa-star' },
                { id: 'heart', name: translations[appState.currentLanguage]?.shapeHeart || translations.en.shapeHeart, icon: 'fas fa-heart' }
            ];
            
            shapes.forEach(shape => {
                const shapeElement = document.createElement('div');
                shapeElement.className = 'shape-option';
                if (shape.id === appState.selectedShape) {
                    shapeElement.classList.add('active');
                }
                shapeElement.dataset.id = shape.id;
                
                shapeElement.innerHTML = `
                    <div class="shape-option-icon">
                        <i class="${shape.icon}"></i>
                    </div>
                    <div class="shape-option-name">${shape.name}</div>
                `;
                
                shapeElement.addEventListener('click', function() {
                    document.querySelectorAll('.shape-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    appState.selectedShape = this.dataset.id;
                });
                
                shapeOptions.appendChild(shapeElement);
            });
        }
        
        // Şekil çiz
        function drawShape(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.beginPath();
                drawingCtx.globalAlpha = appState.opacity;
                
                const size = appState.brushSize * 5;
                
                switch(appState.selectedShape) {
                    case 'circle':
                        drawingCtx.arc(x, y, size / 2, 0, Math.PI * 2);
                        break;
                    case 'square':
                        drawingCtx.rect(x - size/2, y - size/2, size, size);
                        break;
                    case 'triangle':
                        drawingCtx.moveTo(x, y - size/2);
                        drawingCtx.lineTo(x - size/2, y + size/2);
                        drawingCtx.lineTo(x + size/2, y + size/2);
                        drawingCtx.closePath();
                        break;
                    case 'rectangle':
                        drawingCtx.rect(x - size/2, y - size/4, size, size/2);
                        break;
                    case 'star':
                        drawStar(drawingCtx, x, y, 5, size/2, size/4);
                        break;
                    case 'heart':
                        drawHeart(drawingCtx, x, y, size/2);
                        break;
                }
                
                drawingCtx.fillStyle = shapeFillColor ? shapeFillColor.value : '#6c5ce7';
                drawingCtx.strokeStyle = shapeStrokeColor ? shapeStrokeColor.value : '#000000';
                drawingCtx.lineWidth = 2;
                drawingCtx.fill();
                drawingCtx.stroke();
            });
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
            saveToUndoStack();
        }
        
        // Fill tool'u çalıştır
        function fillArea(x, y) {
            if (appState.currentTool !== 'fill') return;
            
            // Basit dolgu yöntemi - tüm tuvali seçili renkle doldur
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.globalAlpha = appState.opacity;
                drawingCtx.fillStyle = appState.currentColor;
                drawingCtx.fillRect(0, 0, canvas.width, canvas.height);
            });
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
            saveToUndoStack();
        }
        
        // Yıldız çiz
        function drawStar(ctx, cx, cy, spikes, outerRadius, innerRadius) {
            let rot = Math.PI / 2 * 3;
            let x = cx;
            let y = cy;
            let step = Math.PI / spikes;
            
            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            
            for (let i = 0; i < spikes; i++) {
                x = cx + Math.cos(rot) * outerRadius;
                y = cy + Math.sin(rot) * outerRadius;
                ctx.lineTo(x, y);
                rot += step;
                
                x = cx + Math.cos(rot) * innerRadius;
                y = cy + Math.sin(rot) * innerRadius;
                ctx.lineTo(x, y);
                rot += step;
            }
            
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
        }
        
        // Kalp çiz
        function drawHeart(ctx, x, y, size) {
            const topCurveHeight = size * 0.3;
            
            ctx.beginPath();
            ctx.moveTo(x, y + size/2);
            
            ctx.bezierCurveTo(
                x, y + size/2 - topCurveHeight,
                x - size/2, y,
                x, y - size/2
            );
            
            ctx.bezierCurveTo(
                x + size/2, y,
                x, y + size/2 - topCurveHeight,
                x, y + size/2
            );
            
            ctx.closePath();
        }
        
        // Metin ekle
        function addText() {
            if (!textInput) return;
            
            const text = textInput.value.trim();
            if (!text) return;
            
            appState.textToolActive = true;
            appState.shapeToolActive = false;
            canvas.style.cursor = 'text';
            
            closeModal(textToolModal);
            showMessage(
                translations[appState.currentLanguage]?.text || translations.en.text, 
                "Click on the canvas to place your text",
                'info'
            );
        }
        
        // Metin çiz
        function drawText(x, y) {
            if (!appState.textToolActive || !textInput) return;
            
            const text = textInput.value.trim();
            if (!text) return;
            
            drawToDrawingLayer((drawingCtx) => {
                const fontSize = textSize ? parseInt(textSize.value) : 24;
                const fontFamily = textFont ? textFont.value : 'Arial';
                drawingCtx.font = `${fontSize}px ${fontFamily}`;
                drawingCtx.fillStyle = appState.currentColor;
                drawingCtx.globalAlpha = appState.opacity;
                drawingCtx.fillText(text, x, y);
            });
            
            appState.textToolActive = false;
            canvas.style.cursor = 'crosshair';
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
            saveToUndoStack();
        }
        
        // Fare/touch pozisyonunu al
        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            
            if (e.type.includes('touch')) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            x /= appState.zoomLevel;
            y /= appState.zoomLevel;
            
            x = x * (canvas.width / (rect.width / appState.zoomLevel));
            y = y * (canvas.height / (rect.height / appState.zoomLevel));
            
            return [Math.round(x), Math.round(y)];
        }
        
        // Çizim fonksiyonları
        function startDrawing(e) {
            if (!appState.appInitialized) return;
            
            appState.isDrawing = true;
            [appState.lastX, appState.lastY] = getMousePos(e);
            
            if (appState.currentTool === 'shape') {
                drawShape(appState.lastX, appState.lastY);
                appState.isDrawing = false;
                return;
            }
            
            if (appState.currentTool === 'fill') {
                fillArea(appState.lastX, appState.lastY);
                appState.isDrawing = false;
                return;
            }
            
            if (appState.textToolActive) {
                drawText(appState.lastX, appState.lastY);
                appState.isDrawing = false;
                return;
            }
            
            drawPoint(appState.lastX, appState.lastY);
        }
        
        function draw(e) {
            if (!appState.isDrawing || !appState.appInitialized) return;
            
            e.preventDefault();
            
            const [x, y] = getMousePos(e);
            
            switch(appState.currentTool) {
                case 'brush':
                    drawBrush(x, y);
                    break;
                case 'pencil':
                    drawPencil(x, y);
                    break;
                case 'eraser':
                    drawEraser(x, y);
                    break;
                case 'watercolor':
                    drawWatercolor(x, y);
                    break;
                case 'pastel':
                    drawPastel(x, y);
                    break;
                case 'spray':
                    drawSpray(x, y);
                    break;
                default:
                    drawBrush(x, y);
            }
            
            [appState.lastX, appState.lastY] = [x, y];
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
        }
        
        function drawPoint(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.beginPath();
                drawingCtx.globalAlpha = appState.opacity;
                
                if (appState.currentTool === 'eraser') {
                    drawingCtx.globalCompositeOperation = 'destination-out';
                    drawingCtx.arc(x, y, appState.brushSize / 2, 0, Math.PI * 2);
                    drawingCtx.fill();
                    drawingCtx.globalCompositeOperation = 'source-over';
                } else {
                    drawingCtx.fillStyle = appState.currentColor;
                    drawingCtx.arc(x, y, appState.brushSize / 2, 0, Math.PI * 2);
                    drawingCtx.fill();
                }
            });
            
            appState.hasDrawing = true;
            updateCanvasPlaceholder();
        }
        
        // Fırça çizimi
        function drawBrush(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
            });
        }
        
        // Kalem çizimi
        function drawPencil(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = Math.max(1, appState.brushSize / 3);
                drawingCtx.lineCap = 'square';
                drawingCtx.lineJoin = 'miter';
                drawingCtx.globalAlpha = appState.opacity;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
            });
        }
        
        // Silgi çizimi
        function drawEraser(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.globalAlpha = appState.opacity;
                drawingCtx.globalCompositeOperation = 'destination-out';
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                drawingCtx.globalCompositeOperation = 'source-over';
            });
        }
        
        // Sulu boya efekti
        function drawWatercolor(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity * 0.5;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                drawingCtx.globalAlpha = appState.opacity * 0.3;
                drawingCtx.lineWidth = appState.brushSize * 0.7;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX + 2, appState.lastY + 2);
                drawingCtx.lineTo(x + 2, y + 2);
                drawingCtx.stroke();
                
                drawingCtx.globalAlpha = appState.opacity;
            });
        }
        
        // Pastel efekti
        function drawPastel(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.strokeStyle = appState.currentColor;
                drawingCtx.lineWidth = appState.brushSize;
                drawingCtx.lineCap = 'round';
                drawingCtx.lineJoin = 'round';
                drawingCtx.globalAlpha = appState.opacity;
                
                drawingCtx.shadowColor = appState.currentColor;
                drawingCtx.shadowBlur = 5;
                
                drawingCtx.beginPath();
                drawingCtx.moveTo(appState.lastX, appState.lastY);
                drawingCtx.lineTo(x, y);
                drawingCtx.stroke();
                
                drawingCtx.shadowBlur = 0;
            });
        }
        
        // Spray efekti
        function drawSpray(x, y) {
            drawToDrawingLayer((drawingCtx) => {
                drawingCtx.fillStyle = appState.currentColor;
                drawingCtx.globalAlpha = appState.opacity;
                
                const density = appState.brushSize * 2;
                const radius = appState.brushSize;
                
                for (let i = 0; i < density; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const sprayRadius = Math.random() * radius;
                    const sprayX = x + Math.cos(angle) * sprayRadius;
                    const sprayY = y + Math.sin(angle) * sprayRadius;
                    const dotSize = Math.random() * 3 + 1;
                    
                    drawingCtx.beginPath();
                    drawingCtx.arc(sprayX, sprayY, dotSize, 0, Math.PI * 2);
                    drawingCtx.fill();
                }
            });
        }
        
        function stopDrawing() {
            if (appState.isDrawing) {
                appState.isDrawing = false;
                saveToUndoStack();
            }
        }
        
        // İmleç boyutunu güncelle
        function updateCursor() {
            if (!canvas) return;
            
            if (appState.currentTool === 'eraser') {
                canvas.style.cursor = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="${appState.brushSize * 2}" height="${appState.brushSize * 2}" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="rgba(255,255,255,0.5)" stroke="%23666" stroke-width="5"/></svg>') ${appState.brushSize} ${appState.brushSize}, auto`;
            } else if (appState.textToolActive) {
                canvas.style.cursor = 'text';
            } else if (appState.currentTool === 'shape') {
                canvas.style.cursor = 'crosshair';
            } else if (appState.currentTool === 'fill') {
                canvas.style.cursor = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 100 100"><path d="M50,10 L90,50 L50,90 L10,50 Z" fill="${appState.currentColor.replace('#', '%23')}" stroke="%23666" stroke-width="5"/></svg>') 15 15, crosshair`;
            } else {
                canvas.style.cursor = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="${appState.brushSize * 2}" height="${appState.brushSize * 2}" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="${appState.currentColor.replace('#', '%23')}" stroke="%23666" stroke-width="5"/></svg>') ${appState.brushSize} ${appState.brushSize}, crosshair`;
            }
        }
        
        // Undo stack'ine kaydet
        function saveToUndoStack() {
            if (!canvas) return;
            
            const imageData = canvas.toDataURL();
            appState.undoStack.push(imageData);
            
            if (appState.undoStack.length > 20) {
                appState.undoStack.shift();
            }
            
            appState.redoStack = [];
            
            updateUndoRedoButtons();
        }
        
        // Geri al
        function undo() {
            if (appState.undoStack.length < 2) return;
            
            appState.redoStack.push(appState.undoStack.pop());
            
            const img = new Image();
            img.onload = function() {
                if (appState.layers.drawing) {
                    const drawingCtx = appState.layers.drawing.getContext('2d');
                    drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                    drawingCtx.drawImage(img, 0, 0);
                    renderCanvas();
                }
                
                appState.hasDrawing = appState.undoStack.length > 1;
                updateCanvasPlaceholder();
            };
            img.src = appState.undoStack[appState.undoStack.length - 1];
            
            updateUndoRedoButtons();
        }
        
        // İleri al
        function redo() {
            if (appState.redoStack.length === 0) return;
            
            appState.undoStack.push(appState.redoStack.pop());
            
            const img = new Image();
            img.onload = function() {
                if (appState.layers.drawing) {
                    const drawingCtx = appState.layers.drawing.getContext('2d');
                    drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                    drawingCtx.drawImage(img, 0, 0);
                    renderCanvas();
                }
                
                appState.hasDrawing = true;
                updateCanvasPlaceholder();
            };
            img.src = appState.undoStack[appState.undoStack.length - 1];
            
            updateUndoRedoButtons();
        }
        
        // Undo/redo butonlarını güncelle
        function updateUndoRedoButtons() {
            if (!undoOverlayBtn || !redoOverlayBtn) return;
            
            undoOverlayBtn.disabled = appState.undoStack.length < 2;
            redoOverlayBtn.disabled = appState.redoStack.length === 0;
        }
        
        // Araç butonlarını güncelle
        function updateToolButtons() {
            if (!eraserOverlayBtn) return;
            
            if (appState.currentTool === 'eraser') {
                eraserOverlayBtn.style.backgroundColor = 'var(--primary-color)';
                eraserOverlayBtn.style.color = 'white';
            } else {
                eraserOverlayBtn.style.backgroundColor = 'white';
                eraserOverlayBtn.style.color = 'var(--primary-color)';
            }
            
            updateCursor();
            updateToolIndicator();
        }
        
        // Canvas'ı temizle
        function clearCanvas() {
            if (!appState.hasDrawing) return;
            
            showConfirm(
                translations[appState.currentLanguage]?.clear || translations.en.clear,
                translations[appState.currentLanguage]?.clearCanvasConfirm || translations.en.clearCanvasConfirm,
                function() {
                    if (appState.layers.drawing) {
                        const drawingCtx = appState.layers.drawing.getContext('2d');
                        drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                        renderCanvas();
                    }
                    
                    saveToUndoStack();
                    appState.hasDrawing = false;
                    updateCanvasPlaceholder();
                }
            );
        }
        
        // Resim yükle
        function uploadImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        const scale = Math.min(
                            canvas.width / img.width,
                            canvas.height / img.height
                        );
                        const width = img.width * scale;
                        const height = img.height * scale;
                        const x = (canvas.width - width) / 2;
                        const y = (canvas.height - height) / 2;
                        
                        drawToDrawingLayer((drawingCtx) => {
                            drawingCtx.drawImage(img, x, y, width, height);
                        });
                        
                        appState.hasDrawing = true;
                        updateCanvasPlaceholder();
                        saveToUndoStack();
                    };
                    img.src = event.target.result;
                };
                reader.readAsDataURL(file);
            };
            
            input.click();
        }
        
        // Canvas'ı kaydet
        function saveCanvas() {
            if (!saveInput) return;
            
            const drawingData = canvas.toDataURL();
            
            saveInput.value = `${translations[appState.currentLanguage]?.drawingName || translations.en.drawingName}_${new Date().toLocaleDateString()}`;
            openModal(saveModal);
            saveInput.focus();
            saveInput.select();
        }
        
        // Kaydetme işlemini gerçekleştir
        function performSave() {
            if (!saveInput) return;
            
            const drawingName = saveInput.value.trim();
            if (!drawingName) {
                showMessage(translations[appState.currentLanguage]?.warning || "Warning", (translations[appState.currentLanguage]?.drawingName || translations.en.drawingName) + ' is required', 'warning');
                return;
            }
            
            const drawingData = canvas.toDataURL();
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            
            savedDrawings.push({
                name: drawingName,
                data: drawingData,
                date: new Date().toISOString()
            });
            
            localStorage.setItem('artcanvas_drawings', JSON.stringify(savedDrawings));
            showNotification(translations[appState.currentLanguage]?.savedNotification || translations.en.savedNotification);
            
            closeModal(saveModal);
        }
        
        // Renk seçme modal'ını aç
        function openColorModal() {
            createColorModalPalette();
            if (colorModalPicker) colorModalPicker.value = appState.currentColor;
            if (colorModalOpacity) {
                colorModalOpacity.value = appState.opacity * 100;
                if (colorModalOpacityValue) colorModalOpacityValue.textContent = `${colorModalOpacity.value}%`;
            }
            openModal(colorModal);
        }
        
        // Zoom işlemleri
        function zoomIn() {
            if (appState.zoomLevel < 3) {
                appState.zoomLevel += 0.1;
                updateZoom();
            }
        }
        
        function zoomOut() {
            if (appState.zoomLevel > 0.3) {
                appState.zoomLevel -= 0.1;
                updateZoom();
            }
        }
        
        function resetZoom() {
            appState.zoomLevel = 1.0;
            updateZoom();
        }
        
        function updateZoom() {
            if (!canvas || !zoomLevel) return;
            
            canvas.style.transform = `scale(${appState.zoomLevel})`;
            zoomLevel.textContent = `${Math.round(appState.zoomLevel * 100)}%`;
        }
        
        // Modal işlemleri
        function openModal(modal) {
            if (!modal) return;
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modal) {
            if (!modal) return;
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // Loading göster
        function showLoading() {
            if (!loading) return;
            loading.style.display = 'flex';
            loading.classList.remove('hidden');
        }
        
        // Yardım modal'ını aç
        function openHelpModal() {
            if (!helpModalTitle || !helpModalContent) return;
            
            helpModalTitle.textContent = translations[appState.currentLanguage]?.helpTitle || translations.en.helpTitle;
            helpModalContent.innerHTML = translations[appState.currentLanguage]?.helpContent || translations.en.helpContent;
            openModal(helpModal);
        }
        
        // Mesaj göster
        function showMessage(title, text, type = 'info') {
            if (!messageModalIcon || !messageModalTitle || !messageModalText) return;
            
            const iconMap = {
                'info': 'fas fa-info-circle',
                'success': 'fas fa-check-circle',
                'warning': 'fas fa-exclamation-triangle',
                'error': 'fas fa-exclamation-circle'
            };
            
            const colorMap = {
                'info': 'var(--primary-color)',
                'success': 'var(--success-color)',
                'warning': 'var(--warning-color)',
                'error': 'var(--danger-color)'
            };
            
            messageModalIcon.innerHTML = `<i class="${iconMap[type]}" style="color: ${colorMap[type]}"></i>`;
            messageModalTitle.textContent = title;
            messageModalText.textContent = text;
            
            openModal(messageModal);
        }
        
        // Onay mesajı göster
        function showConfirm(title, text, onConfirm) {
            if (!confirmModalTitle || !confirmModalText) return;
            
            confirmModalTitle.textContent = title;
            confirmModalText.textContent = text;
            
            if (confirmModalYesBtn) {
                confirmModalYesBtn.onclick = function() {
                    closeModal(confirmModal);
                    if (onConfirm) onConfirm();
                };
            }
            
            if (confirmModalNoBtn) {
                confirmModalNoBtn.onclick = function() {
                    closeModal(confirmModal);
                };
            }
            
            openModal(confirmModal);
        }
        
        // Bildirim göster
        function showNotification(text) {
            if (!notification || !notificationText) return;
            
            notificationText.textContent = text;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Dil değiştir
        function changeLanguage(lang) {
            appState.currentLanguage = lang;
            if (languageSelect) languageSelect.value = lang;
            
            // Tüm site dilini güncelle
            updateInterfaceLanguage();
        }
        
        // Tüm arayüz dilini güncelle
        function updateInterfaceLanguage() {
            const lang = appState.currentLanguage;
            const t = translations[lang] || translations.en;
            
            // Başlık ve placeholders
            updateCanvasPlaceholder();
            if (document.querySelector('.canvas-brush-title span')) {
                document.querySelector('.canvas-brush-title span').textContent = t.brushSize;
            }
            
            // Header butonları
            const updateButtonText = (id, text) => {
                const btn = document.getElementById(id);
                if (btn && btn.querySelector('span')) {
                    btn.querySelector('span').textContent = text;
                }
            };
            
            updateButtonText('saveBtn', t.save);
            updateButtonText('templatesBtn', t.templates);
            updateButtonText('galleryBtn', t.gallery);
            updateButtonText('uploadImageHeaderBtn', t.uploadImage);
            updateButtonText('newCanvasHeaderBtn', t.newCanvas);
            updateButtonText('downloadHeaderBtn', t.download);
            
            // Modal başlıkları
            const updateModalTitle = (modalId, text) => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    const title = modal.querySelector('.modal-title');
                    if (title) title.textContent = text;
                }
            };
            
            updateModalTitle('templatesModal', t.templates);
            updateModalTitle('galleryModal', t.gallery);
            updateModalTitle('saveModal', t.save);
            updateModalTitle('newCanvasModal', t.newCanvas);
            updateModalTitle('downloadModal', t.download);
            updateModalTitle('toolsModal', t.tools);
            updateModalTitle('textToolModal', t.text);
            updateModalTitle('shapeToolModal', t.shape);
            updateModalTitle('drawingViewModal', t.viewDrawing);
            updateModalTitle('helpModal', t.helpTitle);
            
            // Galeri butonları
            updateButtonText('selectAllBtn', t.selectAll);
            updateButtonText('deleteSelectedBtn', t.deleteSelected);
            
            // Diğer arayüz öğeleri
            updateToolIndicator();
            
            if (document.querySelector('.loading p')) {
                document.querySelector('.loading p').textContent = t.loading || 'Loading...';
            }
            
            // Save modal placeholder
            if (saveInput) {
                saveInput.placeholder = t.drawingName || 'Drawing name';
            }
            
            // Renk modal
            if (document.querySelector('.color-modal-title span')) {
                document.querySelector('.color-modal-title span').textContent = t.colorPicker;
            }
            if (document.querySelector('.color-modal-custom span')) {
                document.querySelector('.color-modal-custom span').textContent = t.colorPicker;
            }
            if (document.querySelector('.color-modal-slider-label span:first-child')) {
                document.querySelector('.color-modal-slider-label span:first-child').textContent = t.transparency;
            }
            if (document.getElementById('colorModalOkBtn')) {
                document.getElementById('colorModalOkBtn').textContent = t.ok;
            }
            
            // Tools modal
            if (document.getElementById('toolsModalOkBtn')) {
                document.getElementById('toolsModalOkBtn').textContent = t.ok;
            }
            if (document.getElementById('toolsModalCancelBtn')) {
                document.getElementById('toolsModalCancelBtn').textContent = t.cancel;
            }
            
            // New canvas modal
            if (document.getElementById('newCanvasModalOkBtn')) {
                document.getElementById('newCanvasModalOkBtn').textContent = t.create;
            }
            if (document.getElementById('newCanvasModalCancelBtn')) {
                document.getElementById('newCanvasModalCancelBtn').textContent = t.cancel;
            }
            
            // Download modal
            if (document.getElementById('downloadModalOkBtn')) {
                document.getElementById('downloadModalOkBtn').textContent = t.download;
            }
            if (document.getElementById('downloadModalCancelBtn')) {
                document.getElementById('downloadModalCancelBtn').textContent = t.cancel;
            }
            
            // Text tool modal
            if (document.getElementById('addTextBtn')) {
                document.getElementById('addTextBtn').textContent = t.text;
            }
            if (document.getElementById('textToolCancelBtn')) {
                document.getElementById('textToolCancelBtn').textContent = t.cancel;
            }
            if (document.getElementById('textInput')) {
                document.getElementById('textInput').placeholder = 'Enter text...';
            }
            
            // Shape tool modal
            if (document.getElementById('shapeToolCancelBtn')) {
                document.getElementById('shapeToolCancelBtn').textContent = t.cancel;
            }
            
            // Save modal
            if (document.getElementById('saveModalOkBtn')) {
                document.getElementById('saveModalOkBtn').textContent = t.save;
            }
            if (document.getElementById('saveModalCancelBtn')) {
                document.getElementById('saveModalCancelBtn').textContent = t.cancel;
            }
            if (document.querySelector('#saveModal .message-modal-text')) {
                document.querySelector('#saveModal .message-modal-text').textContent = 'Enter a name for your drawing:';
            }
            
            // Message modal
            if (document.getElementById('messageModalOkBtn')) {
                document.getElementById('messageModalOkBtn').textContent = t.ok;
            }
            
            // Confirm modal
            if (document.getElementById('confirmModalYesBtn')) {
                document.getElementById('confirmModalYesBtn').textContent = translations.en.ok;
            }
            if (document.getElementById('confirmModalNoBtn')) {
                document.getElementById('confirmModalNoBtn').textContent = t.cancel;
            }
        }
        
        // Çizim görüntüleme modal'ını aç
        function openDrawingView(drawingData, drawingName, drawingDate) {
            if (!drawingViewContent) return;
            
            const t = translations[appState.currentLanguage] || translations.en;
            
            drawingViewContent.innerHTML = `
                <img class="drawing-view-img" src="${drawingData}" alt="${drawingName}">
                <div class="drawing-view-info">
                    <h4>${t.drawingName || translations.en.drawingName}: ${drawingName}</h4>
                    <p>${t.drawingDate || translations.en.drawingDate}: ${new Date(drawingDate).toLocaleDateString()}</p>
                </div>
                <div class="message-modal-buttons">
                    <button class="btn btn-primary" id="loadDrawingBtn">${t.viewDrawing || translations.en.viewDrawing}</button>
                    <button class="btn btn-secondary" id="downloadDrawingBtn">${t.download || translations.en.download}</button>
                </div>
            `;
            
            openModal(drawingViewModal);
            
            setTimeout(() => {
                const loadBtn = document.getElementById('loadDrawingBtn');
                const downloadBtn = document.getElementById('downloadDrawingBtn');
                
                if (loadBtn) {
                    loadBtn.addEventListener('click', function() {
                        const img = new Image();
                        img.onload = function() {
                            if (appState.layers.drawing) {
                                const drawingCtx = appState.layers.drawing.getContext('2d');
                                drawingCtx.clearRect(0, 0, appState.layers.drawing.width, appState.layers.drawing.height);
                                drawingCtx.drawImage(img, 0, 0, canvas.width, canvas.height);
                                renderCanvas();
                                
                                appState.hasDrawing = true;
                                updateCanvasPlaceholder();
                                saveToUndoStack();
                                
                                closeModal(drawingViewModal);
                                closeModal(galleryModal);
                                showNotification(t.loadedNotification || translations.en.loadedNotification);
                            }
                        };
                        img.src = drawingData;
                    });
                }
                
                if (downloadBtn) {
                    downloadBtn.addEventListener('click', function() {
                        const link = document.createElement('a');
                        link.download = `${drawingName}.png`;
                        link.href = drawingData;
                        link.click();
                    });
                }
            }, 100);
        }
        
        // Galeri modal'ını aç
        function openGalleryModal() {
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            const galleryGrid = document.getElementById('galleryGrid');
            const t = translations[appState.currentLanguage] || translations.en;
            
            if (!galleryGrid) return;
            
            galleryGrid.innerHTML = '';
            
            if (savedDrawings.length === 0) {
                galleryGrid.innerHTML = `<p style="text-align: center; padding: 40px; color: #666;">${t.emptyGallery || translations.en.emptyGallery}</p>`;
                if (selectAllBtn) selectAllBtn.disabled = true;
                if (deleteSelectedBtn) deleteSelectedBtn.disabled = true;
            } else {
                savedDrawings.forEach((drawing, index) => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    galleryItem.dataset.index = index;
                    
                    if (appState.selectedDrawings.has(index)) {
                        galleryItem.classList.add('selected');
                    }
                    
                    galleryItem.innerHTML = `
                        <div class="gallery-img" style="background-image: url(${drawing.data}); background-size: cover; background-position: center;"></div>
                        <div class="gallery-name">${drawing.name}</div>
                        <div class="gallery-actions">
                            <button class="action-btn action-btn-download" data-index="${index}">
                                <i class="fas fa-download"></i> ${t.download || translations.en.download}
                            </button>
                            <button class="action-btn action-btn-delete" data-index="${index}">
                                <i class="fas fa-trash-alt"></i> ${t.deleteSelected || translations.en.deleteSelected}
                            </button>
                        </div>
                    `;
                    
                    galleryItem.addEventListener('click', function(e) {
                        if (e.target.closest('.action-btn')) {
                            return;
                        }
                        
                        const index = parseInt(this.dataset.index);
                        openDrawingView(drawing.data, drawing.name, drawing.date);
                    });
                    
                    galleryGrid.appendChild(galleryItem);
                });
                
                if (selectAllBtn) selectAllBtn.disabled = false;
                if (deleteSelectedBtn) deleteSelectedBtn.disabled = appState.selectedDrawings.size === 0;
                
                setTimeout(() => {
                    document.querySelectorAll('.action-btn-download').forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const index = parseInt(this.dataset.index);
                            const drawing = savedDrawings[index];
                            const link = document.createElement('a');
                            link.download = `${drawing.name}.png`;
                            link.href = drawing.data;
                            link.click();
                            showNotification(t.exportedNotification || translations.en.exportedNotification);
                        });
                    });
                    
                    document.querySelectorAll('.action-btn-delete').forEach(btn => {
                        btn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const index = parseInt(this.dataset.index);
                            showConfirm(
                                t.deleteSelected || translations.en.deleteSelected,
                                t.confirmDelete || translations.en.confirmDelete,
                                function() {
                                    savedDrawings.splice(index, 1);
                                    localStorage.setItem('artcanvas_drawings', JSON.stringify(savedDrawings));
                                    
                                    appState.selectedDrawings.clear();
                                    
                                    closeModal(galleryModal);
                                    setTimeout(() => {
                                        openGalleryModal();
                                        showNotification('Drawing deleted!');
                                    }, 300);
                                }
                            );
                        });
                    });
                }, 100);
            }
            
            openModal(galleryModal);
        }
        
        // Tüm çizimleri seç
        function selectAllDrawings() {
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            if (savedDrawings.length === 0) return;
            
            appState.selectedDrawings.clear();
            for (let i = 0; i < savedDrawings.length; i++) {
                appState.selectedDrawings.add(i);
            }
            
            openGalleryModal();
            
            if (deleteSelectedBtn) deleteSelectedBtn.disabled = false;
        }
        
        // Seçili çizimleri sil
        function deleteSelectedDrawings() {
            const t = translations[appState.currentLanguage] || translations.en;
            
            if (appState.selectedDrawings.size === 0) {
                showMessage(t.warning || "Warning", t.noDrawingsSelected || translations.en.noDrawingsSelected, 'warning');
                return;
            }
            
            const savedDrawings = JSON.parse(localStorage.getItem('artcanvas_drawings')) || [];
            if (savedDrawings.length === 0) return;
            
            const count = appState.selectedDrawings.size;
            
            showConfirm(
                t.deleteSelected || translations.en.deleteSelected,
                (t.confirmDeleteMultiple || translations.en.confirmDeleteMultiple).replace('{count}', count),
                function() {
                    const indicesToDelete = Array.from(appState.selectedDrawings).sort((a, b) => b - a);
                    
                    indicesToDelete.forEach(index => {
                        savedDrawings.splice(index, 1);
                    });
                    
                    localStorage.setItem('artcanvas_drawings', JSON.stringify(savedDrawings));
                    
                    appState.selectedDrawings.clear();
                    
                    closeModal(galleryModal);
                    setTimeout(() => {
                        openGalleryModal();
                        showNotification(`${count} drawings deleted!`);
                    }, 300);
                }
            );
        }
        
        // Event listeners
        function initEventListeners() {
            if (!canvas) return;
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            canvas.addEventListener('touchstart', function(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    startDrawing(e);
                }
            }, { passive: false });
            
            canvas.addEventListener('touchmove', function(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    draw(e);
                }
            }, { passive: false });
            
            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                stopDrawing();
            }, { passive: false });
            
            if (languageSelect) {
                languageSelect.addEventListener('change', function() {
                    changeLanguage(this.value);
                });
            }
            
            if (brushSizeSlider && brushSizeValue) {
                brushSizeSlider.addEventListener('input', function() {
                    appState.brushSize = parseInt(this.value);
                    brushSizeValue.textContent = `${appState.brushSize}px`;
                    updateCursor();
                });
            }
            
            if (templatesBtn) {
                templatesBtn.addEventListener('click', () => {
                    openModal(templatesModal);
                    createTemplates();
                });
            }
            
            if (closeTemplatesModal) {
                closeTemplatesModal.addEventListener('click', () => closeModal(templatesModal));
            }
            
            if (galleryBtn) {
                galleryBtn.addEventListener('click', () => {
                    openGalleryModal();
                });
            }
            
            if (closeGalleryModal) {
                closeGalleryModal.addEventListener('click', () => closeModal(galleryModal));
            }
            
            if (closeDrawingViewModal) {
                closeDrawingViewModal.addEventListener('click', () => closeModal(drawingViewModal));
            }
            
            if (closeSaveModal) {
                closeSaveModal.addEventListener('click', () => closeModal(saveModal));
            }
            
            if (saveModalCancelBtn) {
                saveModalCancelBtn.addEventListener('click', () => closeModal(saveModal));
            }
            
            if (saveModalOkBtn) {
                saveModalOkBtn.addEventListener('click', performSave);
            }
            
            if (saveInput) {
                saveInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSave();
                    }
                });
            }
            
            if (closeColorModal) {
                closeColorModal.addEventListener('click', () => closeModal(colorModal));
            }
            
            if (colorModalOkBtn) {
                colorModalOkBtn.addEventListener('click', () => {
                    if (colorModalOpacity) {
                        appState.opacity = colorModalOpacity.value / 100;
                    }
                    closeModal(colorModal);
                });
            }
            
            if (colorModalPicker) {
                colorModalPicker.addEventListener('change', function() {
                    appState.currentColor = this.value;
                    
                    if (appState.currentTool === 'eraser') {
                        appState.currentTool = 'brush';
                        updateToolButtons();
                    }
                    
                    updateCursor();
                    updateToolIndicator();
                });
            }
            
            if (colorModalOpacity && colorModalOpacityValue) {
                colorModalOpacity.addEventListener('input', function() {
                    colorModalOpacityValue.textContent = `${this.value}%`;
                });
            }
            
            if (newCanvasHeaderBtn) {
                newCanvasHeaderBtn.addEventListener('click', () => {
                    createNewCanvasModal();
                    openModal(newCanvasModal);
                });
            }
            
            if (closeNewCanvasModal) {
                closeNewCanvasModal.addEventListener('click', () => closeModal(newCanvasModal));
            }
            
            if (newCanvasModalOkBtn) {
                newCanvasModalOkBtn.addEventListener('click', createNewCanvas);
            }
            
            if (newCanvasModalCancelBtn) {
                newCanvasModalCancelBtn.addEventListener('click', () => closeModal(newCanvasModal));
            }
            
            if (downloadHeaderBtn) {
                downloadHeaderBtn.addEventListener('click', () => {
                    createDownloadModal();
                    openModal(downloadModal);
                });
            }
            
            if (closeDownloadModal) {
                closeDownloadModal.addEventListener('click', () => closeModal(downloadModal));
            }
            
            if (downloadModalOkBtn) {
                downloadModalOkBtn.addEventListener('click', downloadCanvas);
            }
            
            if (downloadModalCancelBtn) {
                downloadModalCancelBtn.addEventListener('click', () => closeModal(downloadModal));
            }
            
            if (brushOverlayBtn) {
                brushOverlayBtn.addEventListener('click', () => {
                    createToolsModal();
                    openModal(toolsModal);
                });
            }
            
            if (closeToolsModal) {
                closeToolsModal.addEventListener('click', () => closeModal(toolsModal));
            }
            
            if (toolsModalOkBtn) {
                toolsModalOkBtn.addEventListener('click', () => {
                    closeModal(toolsModal);
                    updateToolButtons();
                });
            }
            
            if (toolsModalCancelBtn) {
                toolsModalCancelBtn.addEventListener('click', () => closeModal(toolsModal));
            }
            
            if (closeTextToolModal) {
                closeTextToolModal.addEventListener('click', () => {
                    appState.currentTool = 'brush';
                    appState.textToolActive = false;
                    closeModal(textToolModal);
                    updateToolButtons();
                });
            }
            
            if (addTextBtn) {
                addTextBtn.addEventListener('click', addText);
            }
            
            if (textToolCancelBtn) {
                textToolCancelBtn.addEventListener('click', () => {
                    appState.currentTool = 'brush';
                    appState.textToolActive = false;
                    closeModal(textToolModal);
                    updateToolButtons();
                });
            }
            
            if (textSize && textSizeValue) {
                textSize.addEventListener('input', function() {
                    textSizeValue.textContent = `${this.value}px`;
                });
            }
            
            if (closeShapeToolModal) {
                closeShapeToolModal.addEventListener('click', () => {
                    appState.currentTool = 'brush';
                    appState.shapeToolActive = false;
                    closeModal(shapeToolModal);
                    updateToolButtons();
                });
            }
            
            if (shapeToolCancelBtn) {
                shapeToolCancelBtn.addEventListener('click', () => {
                    appState.currentTool = 'brush';
                    appState.shapeToolActive = false;
                    closeModal(shapeToolModal);
                    updateToolButtons();
                });
            }
            
            if (closeHelpModal) {
                closeHelpModal.addEventListener('click', () => closeModal(helpModal));
            }
            
            if (messageModalOkBtn) {
                messageModalOkBtn.addEventListener('click', () => closeModal(messageModal));
            }
            
            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', selectAllDrawings);
            }
            
            if (deleteSelectedBtn) {
                deleteSelectedBtn.addEventListener('click', deleteSelectedDrawings);
            }
            
            if (helpGuide) {
                helpGuide.addEventListener('click', openHelpModal);
            }
            
            window.addEventListener('click', function(e) {
                if (e.target === templatesModal) closeModal(templatesModal);
                if (e.target === saveModal) closeModal(saveModal);
                if (e.target === colorModal) closeModal(colorModal);
                if (e.target === newCanvasModal) closeModal(newCanvasModal);
                if (e.target === downloadModal) closeModal(downloadModal);
                if (e.target === toolsModal) closeModal(toolsModal);
                if (e.target === textToolModal) {
                    appState.currentTool = 'brush';
                    appState.textToolActive = false;
                    closeModal(textToolModal);
                    updateToolButtons();
                }
                if (e.target === shapeToolModal) {
                    appState.currentTool = 'brush';
                    appState.shapeToolActive = false;
                    closeModal(shapeToolModal);
                    updateToolButtons();
                }
                if (e.target === galleryModal) closeModal(galleryModal);
                if (e.target === drawingViewModal) closeModal(drawingViewModal);
                if (e.target === messageModal) closeModal(messageModal);
                if (e.target === confirmModal) closeModal(confirmModal);
                if (e.target === helpModal) closeModal(helpModal);
            });
            
            if (undoOverlayBtn) {
                undoOverlayBtn.addEventListener('click', undo);
            }
            
            if (redoOverlayBtn) {
                redoOverlayBtn.addEventListener('click', redo);
            }
            
            if (eraserOverlayBtn) {
                eraserOverlayBtn.addEventListener('click', function() {
                    if (appState.currentTool === 'eraser') {
                        appState.currentTool = 'brush';
                    } else {
                        appState.currentTool = 'eraser';
                    }
                    updateToolButtons();
                });
            }
            
            if (clearOverlayBtn) {
                clearOverlayBtn.addEventListener('click', clearCanvas);
            }
            
            if (colorOverlayBtn) {
                colorOverlayBtn.addEventListener('click', openColorModal);
            }
            
            if (saveBtn) {
                saveBtn.addEventListener('click', saveCanvas);
            }
            
            if (uploadImageHeaderBtn) {
                uploadImageHeaderBtn.addEventListener('click', uploadImage);
            }
            
            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', zoomIn);
            }
            
            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', zoomOut);
            }
            
            if (resetZoomBtn) {
                resetZoomBtn.addEventListener('click', resetZoom);
            }
            
            window.addEventListener('resize', resizeCanvas);
            
            window.addEventListener('orientationchange', function() {
                setTimeout(resizeCanvas, 100);
            });
        }
        
        // Uygulamayı başlat
        function initApp() {
            console.log("Initializing app...");
            
            // DOM'ın tamamen yüklendiğinden emin ol
            if (!canvas || !ctx) {
                console.error("Canvas not found, retrying...");
                setTimeout(initApp, 100);
                return;
            }
            
            // Başlangıçta loading ekranını göster
            loading.style.display = 'flex';
            loading.classList.remove('hidden');
            
            // Uygulamayı başlat
            try {
                resizeCanvas();
                createShapeOptions();
                initEventListeners();
                changeLanguage('en');
                updateUndoRedoButtons();
                updateToolButtons();
                updateZoom();
                
                // App state'i initialized olarak işaretle
                appState.appInitialized = true;
                
                console.log("App initialized successfully");
                
                // Loading ekranını gizle
                setTimeout(hideLoading, 500);
                
                // Karşılama mesajını göster
                setTimeout(() => {
                    showMessage(
                        translations[appState.currentLanguage]?.welcomeTitle || translations.en.welcomeTitle,
                        translations[appState.currentLanguage]?.welcomeMessage || translations.en.welcomeMessage
                    );
                }, 800);
                
            } catch (error) {
                console.error("Error initializing app:", error);
                hideLoading();
                showMessage("Error", "Failed to initialize the application. Please refresh the page.", "error");
            }
        }
        
        // DOM tamamen yüklendiğinde uygulamayı başlat
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM fully loaded, starting app initialization...");
            // Kısa bir gecikme ekle tüm elementlerin yüklendiğinden emin olmak için
            setTimeout(initApp, 100);
        });
        
        // Ayrıca window load event'ini de dinle
        window.addEventListener('load', function() {
            console.log("Window loaded");
        });
    </script>
</body>
</html>
